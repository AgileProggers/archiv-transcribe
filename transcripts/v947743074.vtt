WEBVTT

00:30.000 --> 00:50.040
Excellent, so, gucken wir mal wie lange ich das heute durchhalte.

00:50.040 --> 01:12.480
Ja, grausam, ich weiß, ja es ist besser, aber so nicht ganz gut, also ich habe immer noch ein bisschen Kopfweh, also insofern gucken wir mal, gucken wir mal wie lange ich das durchhalte.

01:12.480 --> 01:25.120
Ah, ich habe jetzt übrigens mal OBS hier oben, das Teil eingeblendet, dass wir besser sehen was passiert, aber mal gucken ob das, oh hängt das?

01:25.120 --> 01:36.240
Guck mal OBS ist Legamans, aber wir können uns das dann auch, wir müssen uns eigentlich nicht den OBS angucken, wir können es auch hier angucken.

01:36.240 --> 01:47.440
Mit meiner wahnsinnig super staubfreien gereinigten Unterlage, aber sieht das halt aus, wenn man es drauf macht, Keks ist auch am Start.

01:47.440 --> 02:09.840
So, ich mach mal OBS, kurz Browser auf, Terminal auf, exellent, danke für den Sub, dann haben wir den Breadtrooper, zwei Monate, Massive, Big IQ, Stonks für den Chat, ja.

02:09.840 --> 02:18.480
Ja, C++ wird wieder echt Pain's Champ in the Ass, Alter, ich sag's euch.

02:28.480 --> 02:38.400
Muss mal kurz mein lokales Git Repo aufmachen, dass ich ein bisschen abgucken kann, von anderen Sachen, ah yes, also folgendes.

02:38.400 --> 02:57.760
3 Monate, danke für den Sub, huge, PowerShell Skript, naja geht so, geht so, jetzt nicht unbedingt das wo ich scharf drauf bin.

02:57.760 --> 03:10.080
So, also ich hab den Stromzähler weitergebaut, den wir das letzte Mal gebaut haben, ich zeig euch das mal schnell, was ich da getan hat.

03:10.080 --> 03:35.040
Also, ich hab jetzt ein 3D gedrucktes Gehäuse am Start, ich hoffe man erkennt das, ein 3D gedrucktes Gehäuse am Start, mit Display, mit Display schon drinnen vorne, es ruckelt gerade ein bisschen bei der Übertragung kann das sein, naja gut.

03:35.040 --> 04:00.320
So, hinten Anschluss für Netzteil, unten mal ein Loch for future, warum leckt das, warum leckt das, liegt bestimmt daran, weil ich mehrere Streams auf hab, wartet mal, passt mal auf, ich mach mal kurz OBS zu, ich mach mal OBS zu.

04:05.920 --> 04:07.920
Reicht das wenn man das heidet?

04:11.120 --> 04:31.360
Komm wir machen das, wir removen das, scheiß drauf, dann leckt es nämlich nicht mehr, hoffe ich mal, ansonsten können wir die Bitrate auch noch ein bisschen runter machen, naja also zumindest 3D gedrucktes Gehäuse am Start, ihr seht Anschluss fürs Netzteil ist schon da,

04:31.360 --> 04:50.880
ich hab übrigens ein bisschen näher rangezoomt heute, falls euch das auffällt, dass man die Sachen ein bisschen besser sieht, also sprich ihr seht auch das funktioniert, wenn ich jetzt hier das Netzteil anschließe, dann leuchtet das, scharf stellen please, da wo die Mausteil ist, das geht an und es geht auch nicht kaputt.

04:50.880 --> 05:20.800
Und genau, so hier innen drin, das ist glaube ich jetzt nicht so wahnsinnig spannend, hier unten geht das Netzteil rein, da wo ihr das silberne Teil da seht, da geht das Netzteil rein und das da unten ist ein Spannungswandler, 12 Volt auf, Mensch machts einfach mal so, dass man was sieht, 12 Volt auf 5 Volt, das ist ein Board, das hatte ich noch übrig, eigentlich ist das Board da unten, ihr seht ihr ja gedacht, dass man da das Netzteil rein macht, aber keck wait,

05:20.800 --> 05:46.080
ich hab's einfach unten reingesetzt und gucken, dass das scharf stellt mal, genau und dann hab ich unten einfach hier an 5 Volt und Ground angelötet, so und dann geht das einfach hier an die Klemmen, das hier ist 5 Volt Anschluss für alle möglichen Board Sensoren

05:46.080 --> 06:16.000
und das hier ist, das andere ist mit dem weißen Kabel ist der Ground Anschluss, so und hier ist schon ein Controller dran, der letzte den ich grad hab von der Sorte, die anderen haben ja die Chinesen kaputt gemacht, aber irgendwie mag das heute nicht scharf schalten gell, naja, vielleicht muss man das so hinhalten, dann schaltet es scharf, scharf, iPhone, ah yes, da hängt ein, da hängt Chico dran,

06:16.000 --> 06:44.480
genau und was ich da jetzt angeschlossen hab aktuell ist nur das Display, nur das Display und Strom für den Controller, so, genau, so sieht das aus, excellent, excellent, wunderbar, ich lasse es einfach mal so stehen, setz mich mal wieder hin,

06:44.480 --> 07:13.440
und dass die Musik nicht zu laut ist, nee, passt eigentlich, also, jo, geht wieder halbwegs, setz Pudding, Dankeschön für den Sub, Tierborn, 13 Monate, das ist ja Hyper Subscription, oh ja, C++ wird echt ätzend, tja, ich würde empfehlen, geh lieber lernen,

07:13.440 --> 07:43.440
Woyzer Schlucker, moin, ich hoffe mal, ich hoffe mal für die Menschheit, dass die meisten das nicht geil finden, so, und was wir jetzt machen müssen ist, wir müssen den Controller programmieren, also das Teil hier, und zwar, also, ich zeig euch mal, ich hol mal aus diesem Berg, der da drüben liegt noch ein paar Sachen raus, also was da jetzt dran kommt am Ende ist folgendes, oh das Scam Train Leute, noch eine Sekunde, das Scam Train, nein, Twitch kriegt kein Geld, so, also was wir

07:43.440 --> 08:13.200
haben, nee, Spannungswander brauchen wir nicht, also, genau, das da ist der Sensor zum Stromzähler auslesen oben, das ist im Prinzip einfach nur so ein kleiner Foto Resistor, der erkennt, wenn es hell wird, das können wir einfach mit der Lampe hier oben ausprobieren, ich mach die Lampe dann einfach ein und aus, dann sehen wir, ob's zählt, oder ich deck's einfach ab, und dann sehen wir, ob's zählt, oh, das ist das eine,

08:13.200 --> 08:41.680
den brauchen wir, den müssen wir gleich dran machen, dann haben wir noch, oh guck mal, hab ich ein geiles Case für ausgedruckt, ratet mal, was hier drinnen ist, Massive 3D Druck Case, was könnte hier drinnen sein, ich kann's euch sagen, es ist der schlechteste und billigste von der Art und Weise, die ich, dieser Sensor, den ich hab, da ist drinnen, ein uralter DHT11,

08:44.000 --> 09:07.840
Luftdruck, Luftfeuchtigkeit und Temperatursensor, aber man muss zugeben, ah, da steht er sogar drauf, DHT11, lull, das Gehäuse ist nice, ne, da ist, ne, vorbei läuft noch, läuft noch, da ist die Ubisoft-Server drauf, korrekt, so, und das allerwichtigste an Sensor,

09:07.840 --> 09:33.680
irgendwo da ist der da, mit dem Sensor können wir dann erkennen, wenn am Stromzähler die Scheibe einmal durchgelaufen ist, das sind zwei Infrarot-LEDs und die erkennen, wenn quasi so ne, so ne weiße Linie unterbrochen wird, und damit können wir dann zählen, ob bei diesem oldschool Stromzähler die Scheibe durchläuft,

09:33.680 --> 09:48.720
so, also das muss man alles anschließen noch, aber das ist, wie gesagt, jetzt kein allzu großer Akt mehr, die drei Dinge, und ne, ich glaub, das war's, ähm, Display hab ich schon angeschlossen, da gucken wir uns das ganze mal an, würd' ich sagen,

09:48.720 --> 10:18.640
ähm, ich werd' mal kurz diesen, den Sensor hier, wobei den kann ich, den kann ich hier drin lassen, ist eigentlich kein Ding, so, genau, also ich würd' sagen, wir fangen jetzt folgendermaßen mal an, wir gucken mal, dass wir das Board geflasht kriegen, mit irgendwie, so nem Hello World fürs Display, dass wir wissen, dass das alles funktioniert, weil da bin ich, bin ich so sicher, das Display war die ganze Zeit eingebaut,

10:18.640 --> 10:35.040
wo ich hier drin rumgewurstet hab, aber ich hab, ich hab, falls ich's kaputtmache, falls ich's kaputtmache, ich hab noch ein Ersatzdisplay, kann ich mal hier hinlegen, ja, und dann, dann schauen wir mal, und dann, und dann versuchen wir die ganzen Sensoren anzuschließen und gucken, ob das dann klappt,

10:35.040 --> 10:52.560
äh, ihr könnt's euch aussuchen, Leute, wollen wir oben, also quasi hier in die Ecke, dieses Ding immer als Vorschau lasten, nee, ich glaub, das ist im Weg, spätestens, wenn ich den Editor auf hab, ist das im Weg, ich glaub, ich mach einfach nur so'n kleines Overlay in, in meiner Linux VM, das reicht.

10:52.560 --> 11:12.000
Wieder 5er Pack gekauft, nee, nee, nicht nur 5er Pack, ich glaub, 20er Pack oder so. Welchen 3D Drucker, ein i3 Mega S, kostet irgendwie 230 Euro, also jetzt nix wahnsinnig teures, und das hier sieht man ja auch, das ist auf dem gröbsten Druck-Setting gedruckt.

11:12.000 --> 11:18.600
Guck mal, das siehst du ja hier, die Schrift ist nicht sonderlich gut und man sieht hier

11:18.600 --> 11:23.960
auch die ganzen Streifen und so, also das ist 0,3mm oder was das ist, das geht noch

11:23.960 --> 11:25.520
ein bisschen besser, wenn man es kleiner stellt.

11:25.520 --> 11:36.880
Darf ich fragen, wieso du C++ nicht magst?

11:36.880 --> 11:40.520
Oh, das ist keine gute Idee, dann bin ich erstmal jetzt eine Stunde beschäftigt zu

11:40.520 --> 11:43.640
erzählen.

11:43.640 --> 11:48.400
Ich glaube, es wird sich rausstellen im Laufe des Streams, warum ich C++ nicht mag.

11:48.400 --> 12:11.880
Okay, also, machen wir mal, machen wir mal, Editor auf, ich werde mal, Sekunde, mach

12:11.880 --> 12:23.160
mal kurz eine Vorschau von der, von dem, ah, Bitrate, das glaube ich vollkommen egal,

12:23.160 --> 12:33.920
die Bitrate, Bitrate müsste wurscht sein, oh, oder auch nicht, das sieht jetzt ja mega

12:33.920 --> 12:41.840
schlecht aus, ach, das läuft gar nicht, okay, hallo, hallo, perfekt, äh, Picture in Picture

12:41.840 --> 12:47.280
S, jetzt haben wir es auf dem zweiten Desktop, jetzt machen wir es ein bisschen kleiner, da

12:47.280 --> 12:53.680
haben wir ein bisschen, bisschen Vorschau, wobei, also wirklich, so wirklich gut erkennen

12:53.680 --> 12:58.680
tut man ja nix, ne?

12:58.680 --> 13:08.120
Phoenix17mona, Dankeschön für den Sub, das ist ja Hypersubscriber, ich könnte das Teil

13:08.120 --> 13:13.920
ein bisschen weiter hoch legen, dann erkennt man was, ey, wenn man, wenn es was zu sehen

13:13.920 --> 13:23.200
gibt, wenn es was zu sehen gibt, dann switch ich einfach um und dann sieht man es ja, glaube

13:23.200 --> 13:32.920
ich am sinnvollsten, aber das ist wieder zu, so, also wir legen jetzt erstmal ein Projekt

13:32.920 --> 13:39.120
an und ich würde sagen, wir updaten erstmal, was haben wir denn da gemacht, oh ja, exzellent,

13:39.120 --> 13:43.640
wir haben schon ein leeres Projekt, wunderbar, ähm, wir updaten den ganzen Krampel jetzt

13:43.640 --> 13:50.360
erstmal, jawoll, hier, update, update, libraries, was haben wir hier noch, alles installiert,

13:50.360 --> 14:00.280
schon ne Weile her, brauchen wir alles nicht, aber trotzdem updaten, updaten, exzellent,

14:00.280 --> 14:07.600
jawoll, so, also wir legen jetzt mal das neues Projekt an und dann gucken wir mal, dass wir

14:07.600 --> 14:12.720
das Display, ich versuch das mal hier so zu machen, dass man es sieht, leg ich mir das

14:12.720 --> 14:19.440
jetzt am besten hin, dass man das Display gut erkennt, so, irgendwie, nein, das funktioniert

14:19.440 --> 14:27.560
ja nicht, da ist ja hinten jetzt die, da ist ja hinten der Anschluss für, hm, wartet mal,

14:27.560 --> 14:40.640
mach ich das jetzt am besten, so, irgendwie, ne, das ist ja wirklich, wirklich gut funktioniert,

14:40.640 --> 14:46.240
das ist grad nicht, nicht gut durchdacht, ähm, ich stell das einfach, wartet mal, ich stell

14:46.240 --> 15:04.560
das einfach hier, hier drauf, oder, ist das besser, ich druck nochmal, ich druck nochmal

15:04.560 --> 15:14.200
schnell den Ständer, Ständer aus, äh, nicht wirklich, oder, exzellent, perfekt, sieht

15:14.200 --> 15:20.640
sehr stabil aus, wie es jetzt da hängt, äußerst stabil, muss aber so rum, weil sonst ist falsch

15:20.640 --> 15:27.920
rum, hm, wie krieg ich das jetzt, ok, Moment, Moment, wie krieg ich das denn jetzt gescheiter

15:27.920 --> 15:39.880
positioniert, ok, lass mal, lass mal, lass mal überlegen, chat, ihr seid auch sonst

15:39.880 --> 15:47.680
immer so schlau, da kann das Kabel rein, du meinst, in die Dose, gut, in die Dose ist

15:47.680 --> 15:57.680
schlecht, da ist ne Lampe drin, aber, die müsst ich raus machen, könnte man ausprobieren,

15:57.680 --> 16:09.040
das könnte man ausprobieren, so, so, ah, yes, exzellent, chat, big brain, big brain chat

16:09.040 --> 16:15.200
wieder am Start, die Subs haben sich gelohnt, so, also, jetzt erkennt man den Kram auch,

16:15.200 --> 16:24.320
kdhks, dankeschön Twitch Prime, Qantas97, auch exzellent Prime Subscriptions, und in

16:24.320 --> 16:31.840
Phoenix haben wir schon, nice Subs, so, jetzt erkennt man glaube ich was, so, das erste,

16:31.840 --> 16:41.480
was wir jetzt mal probieren werden ist, zu flashen mit so nem Hello World Display Ding,

16:41.480 --> 17:06.520
ich mach mal ein neues Projekt, was ist es denn, open, new project, hi, es ist joe, 15

17:06.520 --> 17:17.120
Monate, hyper Subscription, danke für den Sub, thealfax, 3 Monate, dankeschön für

17:17.120 --> 17:21.120
den Sub, jetzt gehts ja hier Schlag auf Schlag, so, also, Projekt Name, Leute, wir brauchen

17:21.120 --> 17:29.280
einen guten Namen, ich hab ne Idee, Wattchamp, man soll immer den Stromzähler auslesen,

17:29.280 --> 17:35.360
und Wattchamp kann man sich wenigstens merken, so, das Board ist ein Tiny Pico, Framework

17:35.360 --> 17:48.760
Aruino, ja, passt, aber wir werden nicht ganz das Vanilla benutzen, sondern neuere Version,

17:48.760 --> 17:56.000
use default location, finish, hat sich der Shitrepo Azubi bei dir gemeldet, ja, ja hat

17:56.000 --> 18:08.760
er, was will der hier, ist es gut oder schlecht, User Bin GCC, das wird nicht funktionieren,

18:08.760 --> 18:13.080
User Bin GCC wird garantiert nicht funktionieren, das muss ich doch mal kurz zumachen, ich glaube

18:13.080 --> 18:29.840
nicht, dass das so klappt, der Wattchamp, hat er, hat er es jetzt gecheckt, Source, Main,

18:29.840 --> 18:37.360
ein, nein, nein, nein, geh mal fort, Visual Studio, Alter, so, kann er, kann er kompilieren,

18:37.360 --> 18:47.360
ok, funktioniert, alles klar, bei Azubi als nächstes kompiliert, ja, der Jesus, ne, aber

18:47.360 --> 18:58.320
fast, 408, Dankeschön für den Sub, so, auf gehts, huge, huge Startcode, ja, wir laden,

18:58.320 --> 19:01.720
wir laden jetzt einfach mal irgendwas hoch, achso, bei, das wichtigste hab ich ja noch

19:01.720 --> 19:08.160
vergessen, was euch vielleicht auffallen wird, ist, der Controller ist gar nicht bei mir

19:08.160 --> 19:11.920
am Rechner angeschlossen, ich kann da drauf nichts flaschen, ich hab jetzt aber überlegt,

19:11.920 --> 19:20.560
wir machen absolut Big Brain Modus, und zwar, ich hab hier ein Raspberry Pi liegen, in diesem

19:20.560 --> 19:26.480
nice, nice Case, und da ist ein USB Kabel dran, wenn ich das rausgezogen krieg, ohne

19:26.480 --> 19:31.680
dass ich das umschmeiße, das andere, und was wir jetzt machen können ist, das steht halt

19:31.680 --> 19:36.160
hier nicht wirklich stabil, aber, scheiß drauf, was wir machen können ist, ich kann

19:36.160 --> 19:39.120
jetzt, das probieren wir mal aus, ich hab das letzte Mal im Stream schon probiert, da hat

19:39.120 --> 19:43.280
es nicht ganz funktioniert, ich will ja, dass ihr das seht, ne, wenn ich das Ding rüber

19:43.280 --> 19:51.640
an den Rechner mache, dann seht ihr es ja nicht mehr, ja, wir müssen ein bisschen gewackelleben,

19:51.640 --> 19:58.880
glaub ich, zumindest, ich werd jetzt mir hier das USB Device sharen, auf meinen lokalen

19:58.880 --> 20:03.840
Rechner, um es dann über den Raspberry Pi zu flaschen, so als wäre es angeschlossen

20:03.840 --> 20:08.480
bei mir lokal am Rechner, hat man das verstanden, also ich leite quasi so den USB Anschluss

20:08.480 --> 20:12.880
weiter an meinen lokalen Rechner über den Raspberry, dass ich das hier auf dem Basteltisch

20:12.880 --> 20:20.560
haben kann, aber lokal entwickeln, richtig Massive, ja, Next Level 5 Head, so, jetzt

20:20.560 --> 20:26.960
muss ich mal gucken, ah, Moment, ha, guckte mal, ich bin auch doof, ich brauch das Kabel

20:26.960 --> 20:31.400
da gar nicht drinnen, weil zum Flaschen und zum Entwickeln machen wir das natürlich

20:31.400 --> 20:45.040
per USB an Strom, USB Strom, so, jetzt haben wir es per USB angeschlossen, jetzt müssen

20:45.040 --> 20:52.240
wir mal gucken, dass wir es, ah, yes, was eine Wackelei, aber es funktioniert, das mache

20:52.240 --> 20:56.320
ich nur so, dass man den Controller irgendwie sieht, exellent, da hängt ein bisschen viel

20:56.320 --> 21:09.840
davor, Moment, wir müssen das einmal ordentlich positionen, Positioning ist alles hier, Leute,

21:09.840 --> 21:18.000
nicht raus strafen, warte mal, wir machen das anders, wir machen das da einfach unten

21:18.000 --> 21:27.400
rein, ah, yes, so ist perfekt, jetzt erkennt man die LEDs, jetzt erkennt man den Controller,

21:27.400 --> 21:32.600
sieht zwar äußerst behilfsmäßig aus, aber man erkennt alles und das Display auch, exellent,

21:32.600 --> 21:46.080
so lassen wir das jetzt, perfekt, sehr gut, musst du an dem Konstrukt noch irgendwas dran

21:46.080 --> 21:53.920
bauen, ne, ich muss die Sensoren anschließen, das ist alles, also ich muss die Sensoren

21:53.920 --> 21:59.160
anschließen und dann passt, also eingebaut habe ich das hier schon, äh, nicht, noch nicht

21:59.160 --> 22:05.120
mal im letzten, nicht im Stream vorher, das habe ich Offstream gemacht, das Gehäuse, letztens

22:05.120 --> 22:09.640
im Stream vorher habe ich meine Boards gegrillt mit einem billigen China Spannungswandler,

22:09.640 --> 22:18.520
ok, also fangen wir mal an, das billigste, was man machen kann ist erstmal serielle Schnittstelle

22:18.520 --> 22:27.520
auf 9600 und jetzt machen wir nichts anderes wie Serial, äh, Print, soweit komme ich

22:27.520 --> 22:34.720
mit C++ auch noch klar, CacWade, so, und jetzt muss ich von meinem Raspberry Pi erstmal

22:34.720 --> 22:42.960
das USB Kabel scheren, dass ich dran komme, äh, was hat mein Raspberry Pi für eine IP,

22:42.960 --> 23:06.440
weißes Haar, ist das Staubsauger, der vielleicht, hm, was hat mein Raspberry Pi für eine IP,

23:06.440 --> 23:33.400
ah, hier, 126 hat der jetzt, ok, meinetwegen, yes, der Chat ist schon drin, ja, war klar,

23:33.400 --> 23:40.680
Chat ist immer schnell bei sowas, USB IP, genau, Lists, sonst kann man sich anzeigen

23:40.680 --> 23:47.760
lassen, was man für USB Geräte hat, das hier ist das Flashgerät, also die ist, äh,

23:47.760 --> 23:51.600
der, sag mal, ist die Auflösung schlechter geworden, eben war die Auflösung dann noch

23:51.600 --> 24:09.800
besser, weil die Auflösung ist doch echt passabel, genau, also sprich, der Serial-Converter,

24:09.800 --> 24:21.240
der per USB angeschlossen ist, ist das auf, ähm, 13, Unable, warum, oder, ach, ist das

24:21.240 --> 24:35.240
vielleicht schon, USB IP, USB, minus R, nee, wie ging das jetzt nochmal, Alter, USB IP,

24:35.240 --> 24:43.960
muss man mal, muss man mal angucken, minus R war das, USB IP, Lists, minus R, und jetzt

24:43.960 --> 24:54.800
die IP vom Raspberry Pi, 126, could not connect, ok, also, was muss ich machen, Modprobe, USB

24:54.800 --> 25:06.240
List, alles klar, USB IP List, minus L, alles klar, USB IP, minus groß D, Demon Mode, Bind,

25:06.240 --> 25:23.600
ok, ah, jetzt, exellent, und jetzt kann er das auch anzeigen, so, und jetzt, USB, konnte

25:23.600 --> 25:37.480
ich mit dem Kram nochmal mounten, Moment, wie mounte ich den USB-Gerät nochmal, mit

25:37.480 --> 25:46.600
USB List, minus R, soll nicht, äh, bin ich, ach, hier, ok, ich muss noch irgendwelche

25:46.600 --> 25:50.120
Module laden, was auch immer, ich mach jetzt einfach mal das Tutorial durch, ich mach das

25:50.120 --> 25:53.920
nur, dass ich euch das schön im Bild zeigen kann, ohne euch das Ding direkt an mein Rechner

25:53.920 --> 26:08.760
anschließen muss, ähm, Attach, ok, also, im Prinzip dann so, Attach, 1.1.3, sudo, oh,

26:08.760 --> 26:18.760
Moment, mein, mein, Keg-Wade, sudo, ah, jetzt, exellent, so, mal gucken, ob er jetzt das

26:18.760 --> 26:31.640
Gerät erkannt hat, der, hier, da ist es, USB, so, und jetzt, und jetzt müsste ich theoretisch,

26:31.640 --> 26:36.080
von meinem lokalen Rechner uploaden können, auf den Controller, über den Raspberry Pi,

26:36.080 --> 26:46.320
schauen wir mal, ob das funktioniert, yes, exellent, exellent, funktioniert, nice, so,

26:46.320 --> 26:59.280
Serial Output, Keg-Wade, also, funktioniert, das Ding läuft, too, way too smart, ja, so,

26:59.280 --> 27:07.200
jetzt können wir den Kram flashen, so, und jetzt wird es eklig, jetzt kommt C++-Time,

27:07.200 --> 27:15.400
oder wie die Cooloys sagen, C++, allerdings ist das unter, ist das mit den Arduino Sachen

27:15.400 --> 27:22.680
halbwegs erträglich, außer man muss Sachen machen, die nicht drin sind, dann ist, Keg-Wade,

27:22.680 --> 27:26.080
ok, lasst mal überlegen, wie fangen wir jetzt erstmal an, ich copy paste mir jetzt mal ein

27:26.080 --> 27:30.080
paar Sachen, die ich auch mit diesem anderen Projekt am Start habe, also, erstmal muss

27:30.080 --> 27:39.080
man die Projekt-Settings ändern, und zwar, ich muss mir das gerade mal aufmachen, also,

27:39.080 --> 27:50.720
die Settings ändern, wow, big, was habe ich denn da gemacht, ok, erstmal den Upload-Speed

27:50.720 --> 27:58.040
erhöhen, mal gucken, ob das da noch funktioniert, weil ansonsten ist das teilweise relativ lahm

27:58.040 --> 28:03.960
mit dem Upload von der neuen Firmware, ok, funktioniert noch, alles klar, das geht gleich,

28:03.960 --> 28:10.480
sobald wir WLAN-Includen geht das viel langsamer, so, Upload-Speed höher machen, äh, by the

28:10.480 --> 28:19.600
way, geht eigentlich noch mehr, was ist denn die nächste höhere, sagte mal, meint ihr

28:19.600 --> 28:34.480
ein serieller Portpack, das hier, habe ich noch nie ausprobiert, 3,6k, nee, ach, was

28:34.480 --> 28:39.440
auch immer, Keg-Wade, Keg-Wade, nein, geht nicht mehr, ok, dann muss man das da hinzufügen,

28:39.440 --> 28:43.040
das Copy gesagt, das weiß ich nicht, auf dem Kopf, das habe ich im anderen Projekt, dass

28:43.040 --> 28:47.800
man bessere Exceptions angezeigt bekommt, wenn der Controller abkackt, ansonsten, wenn

28:47.800 --> 28:53.880
der Controller abkackt, steht einfach nur drinnen, Stack Trace und Speicheradressen

28:53.880 --> 28:58.680
Offset, was ziemlich nichtsagend ist, wenn man das hier included, kriegt man wenigstens

28:58.680 --> 29:03.440
halbwegs eine Anzeige, in welchem Modul was kaputt gegangen ist, eigentlich ganz praktisch,

29:03.440 --> 29:19.160
so, dann ganz wichtig, wir wollen den neuesten C++ Shit verwenden, ja, korrekt, den neuesten

29:19.160 --> 29:30.960
C++ Shit, nämlich, wer das daraus nicht erkennt, das ist C++ 20, oh, geht nicht, was habe

29:30.960 --> 29:36.800
ich vergessen, ah, ich habe vergessen, die neueste, die neueste, die neueste Version

29:36.800 --> 29:45.280
vom Compiler zu include, ok, exzellent, exzellent, ich will unbedingt, wir brauchen C++ 20, einfach

29:45.280 --> 29:50.720
weil es neu, einfach weil es neu, es hat kein, was ist denn jetzt das Problem, es hat kein

29:50.720 --> 29:57.800
Tiefegekund, aber es muss neu sein, ja, weil umso, also C++ ist an sich ja schon absolut

29:57.800 --> 30:04.720
zumutig, zumutig und umso älter das ganze ist, umso, es ist ja kaum möglich, aber es

30:04.720 --> 30:13.960
ist dann noch schlechter, genau, C++ kommen tolle neue Dinge dabei und der alte Scheiß

30:13.960 --> 30:19.000
bleibt auch dabei, glaub, der installiert irgendwas im Hintergrund gerade, wir lassen

30:19.000 --> 30:28.280
den mal, wir lassen den mal kurz, yep, yep, cock, so, weiter geht's, haben wir hier, ah,

30:28.280 --> 30:33.480
jetzt kann er kompilieren, weil viel hilft viel, so siehts aus, das sieht schon mal gut

30:33.480 --> 30:49.640
aus, nice, ok, Upload funktioniert noch alles und Cack Weight wird auch noch ausgegeben,

30:49.640 --> 30:56.200
alles klar, passt, ok, ich würde sagen, Projekt Settings sind erstmal ok, neuester C++ Standard,

30:56.200 --> 31:02.920
bessere Exzeptions, schnellere Upload Speed, neueste Variante von dem Arduino Krams beziehungsweise

31:02.920 --> 31:11.760
dem, dem Framework vom Hersteller, was unter Arduino läuft, weil, das kann ich euch übrigens

31:11.760 --> 31:18.040
nur empfehlen, wenn ihr ESP32 Sachen programmieren wollt mit Plattform.io, nehmt das neuere,

31:18.040 --> 31:23.840
weil die alte Version basiert noch auf 3.3, glaube, und da sind ganz viele Sachen anders

31:23.840 --> 31:33.440
und ihr könnt kein C++20 verwenden, so, passt soweit, würde ich sagen, ok, exquisite, was

31:33.440 --> 31:45.240
ist Plattform.io, das ist, was sagen sie denn selbst, Professional Collaborative Platform

31:45.240 --> 31:49.800
for Embedded Development, im Prinzip ist es ein Visual Studio Addon, ein Visual Studio

31:49.800 --> 31:56.480
Addon, was das Einrichten von der Entwicklungsumgebung für Microcontroller easy as fuck macht,

31:56.480 --> 32:00.280
du musst nur das Addon installieren über den Addon Store und dann kannst du einfach

32:00.280 --> 32:04.240
ein neues Projekt anlegen und direkt Uploaden, du musst gar nichts machen, großartig, also

32:04.240 --> 32:07.640
die Settings, die ich jetzt gemacht habe, sind rein optional, weil es ein bisschen angenehmer

32:07.640 --> 32:14.680
ist, also nicht Arduino IDE oder sowas, nehmt Plattform.io, die Arduino IDE ist Crap, absolut

32:14.680 --> 32:27.720
Crap dagegen, ok, also legen wir mal los, lass mal kurz in mich gehen, wie fangen wir

32:27.720 --> 32:31.520
an, also wir fangen schon mal nicht damit an, indem wir unsere serielle Schnittstelle

32:31.520 --> 32:37.040
auf 9600 machen, sondern wir machen die auf ein bisschen mehr, so, ich hoffe es funktioniert

32:37.040 --> 32:46.080
noch, Monitor Speed brauche ich noch, genau, funktioniert, nehme ich nicht, Monitor Speed,

32:46.080 --> 32:58.160
das ist das, wie schnell die serielle Ausgabe ist, mal Uploaden, ah Moment, das nicht Uploads,

32:58.160 --> 33:08.200
Monitor Speed, ok, guck man sieht es glüht schon fast beim Uploaden, das schlimmste an

33:08.200 --> 33:13.360
der Arduino IDE ist ja das Theme und dass es keinerlei Code Assist gibt, also du hast ja

33:13.360 --> 33:19.360
keinerlei Autocomplete oder sowas, hier hast du wenigstens das Standard Visual Studio Autocomplete

33:19.360 --> 33:28.080
C++ Kram, das ist da noch ein bisschen erträglicher, ok, wir haben hochgeladen, Output Care Query

33:28.080 --> 33:34.200
Speed passt noch, ok, also wir fangen jetzt erstmal an das Display anzusteuern, also sprich

33:34.200 --> 33:42.080
das hier drauf was erscheint, übrigens wenn ihr was wissen wollt schreibt net Wupplos

33:42.080 --> 33:44.920
dabei, ich scroll dann gleich ab und zu mal über den Chat, falls ich zu lahm bin sagt

33:44.920 --> 33:51.520
mir Bescheid, so das heißt wir brauchen jetzt erstmal eine Library für das Display, also

33:51.520 --> 34:01.240
Libraries, so und das ist ein SSD 1306 Display und wir nehmen als Library die erste die ihr

34:01.240 --> 34:06.760
erfindet, weil die habe ich schon mal verwendet, die ist ganz ok, nein nicht die, ok ich habe

34:06.760 --> 34:10.240
Mist erzählt, die Library nehmen wir nicht fürs Display, wir nehmen auch nicht die, wir

34:10.240 --> 34:16.200
nehmen die hier, die da nehmen wir, die hier, warum ihr euch jetzt fragt, warum die, weil

34:16.200 --> 34:22.360
es so ist, weil die funktioniert und die anderen Crap zu bedienen sind und nicht richtig funktionieren.

34:22.360 --> 34:32.880
Oder nehmen wir sogar die, warte mal, was sind die neuere Version hier von, 4.2, warum

34:32.880 --> 34:53.520
gibt es denn die doppelt, 4.2, heck wait, hä, warum gibt es die Sachen doppelt, paper

34:53.520 --> 35:00.200
please, egal das ist der Treiber den wir wollen für das Display, fügen wir hinzu, wo ist

35:00.200 --> 35:06.880
der Watt, der Wattchamp, jawoll, Wattchamp, exellent, so und hier ist auch immer gleich

35:06.880 --> 35:14.040
ein Beispiel, das ist übrigens auch ein Vorteil von dieser, von der, von Platform.io, die

35:14.040 --> 35:21.000
haben das hier ganz schön integriert, klar die Beispielprogramme müssen die Library Autoren

35:21.000 --> 35:29.440
zur Verfügung stellen, aber hier kann man schön nachgucken wie der ganze Kram funktioniert,

35:29.440 --> 35:38.840
Simple Demo, Simple Demo ist immer gut, genau, das da müssen wir include und dann müssen

35:38.840 --> 35:45.080
wir display in it und irgendwas drauf anzeigen, genau das, das kann nicht so kompliziert sein,

35:45.080 --> 35:57.240
also include, das da, kompilierter Kram noch, so also wir versuchen jetzt erstmal auf dem

35:57.240 --> 36:03.680
Display was anzuzeigen, hier scheint zu funktionieren, also ich bin nicht ganz planlos, ich hab das

36:03.680 --> 36:17.440
schonmal gemacht, so display in it, flippen tun wir erstmal nix, wozu, areal plane, ne

36:17.440 --> 36:22.080
wir wollen eine größere Schriftart, was haben wir noch, areal 16, areal alter gibt's nicht

36:22.080 --> 36:27.920
monospace oder so, oh Gott was ist das denn, ok wir müssen unsere eigene Schriftart gleich

36:27.920 --> 36:33.680
noch holen, weil areal ist Crap, ne ne Leute, Comic Sans ist auch Crap, wisst ihr warum

36:33.680 --> 36:38.680
alles Crap ist außer Monospace, weil dann die Buchstaben unterschiedlich breit sind

36:38.680 --> 36:42.200
und wenn die Buchstaben unterschiedlich breit sind, dann kannst du nicht richtig ausrechnen

36:42.200 --> 36:47.680
wo du was auf dem Display hinschreiben musst, das ist Müll, Hack, Hack ist eine sehr gute

36:47.680 --> 36:55.640
Idee, mal gucken ob es das dafür gibt, ansonsten nehmen wir irgendeinen Monospace, Roboto oder

36:55.640 --> 36:59.440
sowas, Konsola, ja müssen wir mal gucken, aber wir versuchen jetzt erstmal was auf dem

36:59.440 --> 37:09.480
Display anzuzeigen, Text-Align, Drawstring, na gut, also im Prinzip sollte es das eigentlich

37:09.480 --> 37:17.120
gewesen sein, jetzt sollte was auf dem Display stehen, wenn ich das richtig sehe, ich sehe

37:17.120 --> 37:24.200
gerade eine Sache, wo ich noch mal machen, Display, Set, Contrast, wobei muss ich das

37:24.200 --> 37:29.960
machen, ich probier's mal so, so jetzt sollte da ganz oft Hello World drauf stehen, wobei

37:29.960 --> 37:39.120
wir schreiben da nur einmal Hello World drauf, das reicht ja, so Upload, Moment, das kann

37:39.120 --> 37:43.840
nicht funktionieren, ich hab das ja an den anderen Pins dran, Leute das kann nicht gehen,

37:43.840 --> 37:50.000
ich hab das gar nicht an den Standard Pins dran, ich hab das an Pin 25 und 26 dran und

37:50.000 --> 38:11.880
das hier ist Pin 25, das jebaitet mich, Moment, das ist Hex 26, das ist Hex 26 oder? 38, ok,

38:11.880 --> 38:20.280
das kommt eher hin, Moment, Tiny Pico Pinout, macht das Display was? Nein, macht nix, Pinout

38:20.280 --> 38:40.600
erstmal angucken, die Standardbus für so Displays ist bei dem auf 39 und 2 und what the fuck,

38:40.600 --> 38:57.880
auf 21, auf 21 und 22, warum, what the, ok, das ist falsch, das ist definitiv verkehrt,

38:57.880 --> 39:06.960
ich hab die auf GPIO 25, 25 und 26, ich bin mir jetzt nicht sicher, warum ich das Kabel

39:06.960 --> 39:10.760
angeschlossen hab, ehrlich gesagt, wir probieren das jetzt einfach mal aus, ob das Display

39:10.760 --> 39:29.080
angeht, ok, postchamp, postchamp, postchamp, postchamp, nope, probieren wirs mal andersrum,

39:29.080 --> 39:42.400
also die Adresse, die Adresse stimmt, das weiß ich, die Adresse stimmt, 03C, das steht hinten

39:42.400 --> 39:49.080
auf dem Display irgendwo drauf oder die Displays haben das, das weiß ich, das passt, ok, gehts

39:49.080 --> 39:59.440
jetzt, upload please, upload, upload, upload, upload, please, vielleicht sieht mans einfach

39:59.440 --> 40:23.400
nur auf der Kamera, nicht, ah, guck mal, warte mal, hier, das ist glaub ich gar nicht richtig

40:23.400 --> 40:32.640
sein, also 26, 25 müsste eigentlich richtig sein, ich guck mal nach, ich hab das doch

40:32.640 --> 40:41.840
schonmal gemacht, gehts jetzt, fuck, ok moin, ich muss mal abgucken kurz, init, display init,

40:41.840 --> 40:51.000
ok, das da, das da hab ich im anderen Projekt gemacht, display init, set contrast 255, ah,

40:51.000 --> 40:56.040
ich weiß, was ich vergessen hab, man muss ihm ja auch sagen, dass er was anzeigen soll

40:56.040 --> 41:07.520
am Ende, man muss sagen, display, display, display, dass er was anzeigt, calculate, postchamp,

41:07.520 --> 41:13.240
bam, ok, es sieht nicht gut aus in der Kamera, das stimmt, gerade mit diesem Winkel hier

41:13.240 --> 41:29.080
sieht das nicht gut aus, aber, ich glaub man erkennt was, huge refresh rate, massive refresh

41:29.080 --> 41:40.720
rate, easy clap, ich hab ne, ich hab ne andere Idee, wir nennen das nicht display, ich nenn

41:40.720 --> 41:52.520
das, ja, wie soll ich es denn sonst nennen, wenn ich display, lcd, lcd, display, da kann

41:52.520 --> 42:00.280
ich nämlich so machen, lcd, init, lcd, wobei es ist glaub ich ein led, screen, screen,

42:00.280 --> 42:11.560
screen ist gut, screen gefällt mir, oh, wie war multiple cursor in wishlist studio nochmal,

42:11.560 --> 42:18.320
wishlist studio code, anzeige, oh ja, anzeige ist raus, anzeige ist gut, chat soll ich es

42:18.320 --> 42:23.720
screen oder anzeige nennen, ne, anzeige, ich kann mit deutsche variablen Namen, geht

42:23.720 --> 42:36.480
nicht, wir können es auch ausgabegerät nennen, das ist doch auch was, oder, ausgabegerät,

42:36.480 --> 42:43.760
displaychamp, nein wir nennen das einfach nur screen und gut ist, paintschamp, ok das

42:43.760 --> 42:50.320
funktioniert, excellent, hello world ist jetzt huge chat, ok also das display an sich funktioniert

42:50.320 --> 42:55.440
schonmal, ich bin begeistert, ich muss mir gleich noch ein paar helper classes rüber

42:55.440 --> 43:00.960
kopieren, weil ich sonst zu viel raw c++ machen muss und das paintschamp mich schon

43:00.960 --> 43:06.720
wieder, was kann man denn hier eigentlich machen, build filesystem, was sind das für

43:06.720 --> 43:22.280
dinge da oben, build filesystem, ok, program size, aha, upload filesystem image, erase

43:22.280 --> 43:38.360
flash, ich hab irgendwie den eindruck, das klicke funktioniert irgendwie dazu richtig,

43:38.360 --> 43:48.400
pricked, ich hab mir ne eigene klasse mal gebaut, so als anti-prick maßnahme, die resettet

43:48.400 --> 43:53.920
erst nach nem erfolgreichen boot, muss ich mir gleich mal alles rüber kippen, wisst

43:53.920 --> 43:57.040
ihr was, wir klicken da jetzt nicht weiter, drehen rum, who cares, wir machen das einfach

43:57.040 --> 44:09.160
zu brauch ich eh net, ok also, bei der gelegenheit müssen wir gleich noch das filesystem aktivieren,

44:09.160 --> 44:16.960
weil, wenn wir Stromzählerstand auslesen, dann will ich den Kram ja auch, falls sich

44:16.960 --> 44:21.280
das ding mal neu startet, will ich ja auch den aktuellen stand mir merken, das heißt

44:21.280 --> 44:33.360
muss ich auf den flash speicher schreiben, so und jetzt würd ich sagen, bevor wir jetzt

44:33.360 --> 44:37.600
was, jetzt brauchen wir erstmal ne ordentliche schriftart, ich mein das sackt doch hier,

44:37.600 --> 44:44.960
guckt sich das mal an, das ja, areal, wo komm man da hin, wo komm man da hin, areal, wir

44:44.960 --> 44:49.720
brauchen monospace, wieso verwendest du c++, weil es keine andere, es gibt keine andere

44:49.720 --> 44:53.560
variante, also du kannst das nicht mit was anderem programmieren, es gibt theoretisch

44:53.560 --> 44:58.560
die variante mit micro python zu programmieren, da hast du aber andere probleme, oder es gibt

44:58.560 --> 45:05.200
ne experimental rust implementierung, die ist aber auch problematisch, also du kannst das

45:05.200 --> 45:16.840
nur sinnvoll in c++ machen, so also das brauchen wir schonmal nicht, ja gibts wirklich, gibts

45:16.840 --> 45:21.640
wirklich, so also wir brauchen jetzt erstmal ne ordentliche schrift, und dazu gibts ne poggers

45:21.640 --> 45:27.400
webseite, das hab ich schonmal vorbereitet, wie in der koch-sendung, hier kann man die

45:27.400 --> 45:35.440
schriftarten generieren, für so embedded-dinger, so und jetzt, jetzt müssen wir mal gucken,

45:35.440 --> 45:54.800
was wir als schriftart, was wir als schriftart haben wollen, kann man nach monospace, was,

45:54.800 --> 46:06.400
flashbang, ah gut, weils der chat ist, so monospace, was haben wir mal monospace, monospaced,

46:06.400 --> 46:13.480
crafty girls, ah grills, beste schriftart, so das brauch ich unbedingt da, gibt es hack,

46:13.480 --> 46:22.040
hack, ne, homemade apple gibt es, ach du große kacke, ich will mich jetzt allerdings da nicht

46:22.040 --> 46:30.840
so ehrlich gesagt, roboto, wir nehmen roboto medium, gibts konsolas, ne konsolas ist ne

46:30.840 --> 46:38.280
microsoft schrift, die gibts wahrscheinlich nicht, der ist auch ok, gibts ubuntu mono oder

46:38.280 --> 46:53.040
sowas, boss, ah da kann man icons mitmachen, ok das ist natürlich auch cool, nimbus mono,

46:53.040 --> 46:57.680
ne wir nehmen roboto und gut ist, da weiß ich, dass die gescheit aussieht, wir nehmen

46:57.680 --> 47:03.960
roboto mono medium, so und als, wir brauchen das einmal in schriftgröße 16 und einmal

47:03.960 --> 47:11.320
in schriftgröße 12, emoji support, das ist ne gute frage, ich kanns mir nicht vorstellen,

47:11.320 --> 47:15.360
wenn du die schriftarten hier quasi noch als bytearrays brauchst, ich kann mir nicht vorstellen,

47:15.360 --> 47:20.440
dass das ding emoji support hat, aber wir könnens mal ausprobieren, das würd mich äußerst

47:20.440 --> 47:28.320
wundern, wenn das emoji support hätte, ich glaube eher, dass es entweder abkackt oder

47:28.320 --> 47:34.640
nicht, was ich persönlich eher glaube ist, der zeigt irgendwelche byte geschwubbel an,

47:34.640 --> 47:52.480
was nicht funktioniert, pricked, huge music hier, ne guck da kann keine emojis, also wir

47:52.480 --> 48:00.240
brauchen roboto medium 16, da weiß ich glücklicherweise wie es funktioniert, wie man das einrichtet,

48:00.240 --> 48:06.680
man braucht ne extra datei, kann man zum Beispiel fonts.h, weil c und gerade c++ immer noch

48:06.680 --> 48:16.600
mit header scheiß rumhantiert, by the way 2021, fragt mich nicht warum, aber ist so,

48:16.600 --> 48:29.680
historisch gewachsen, so das machen wir weg, include arduino, sonst kann er den kram nicht

48:29.680 --> 48:43.320
verwenden, oh jetzt wär ich nervös bei der musik leute, gachi bassmusik, so und jetzt

48:43.320 --> 48:50.540
brauchen wir die ganze schriftgröße nochmal in 12, excellent, da seht ihr mal das ist

48:50.540 --> 48:56.320
richtig low level shit, aber ein bisschen low level shit, wenn man hier schriftarten

48:56.320 --> 49:03.720
noch als byte arrays rumhantieren muss, da weißt du schon was sache ist, ok und jetzt

49:03.720 --> 49:14.320
set font, roboto, ne erst mal include den ganzen kram, include font, jawoll, ich hab

49:14.320 --> 49:17.360
schon wieder vergessen was der unterschied ist zwischen include so und include so, ich

49:17.360 --> 49:30.440
glaub das search pass, so roboto, roboto medium exquisite, geht nicht, weil, warum, weil invalid

49:30.440 --> 49:41.160
conversion, oh die musik macht mich fertig, ich muss das überspringen, ok schon besser,

49:41.160 --> 49:53.680
ist mir aber eigentlich auch zu anstrengend, ja geht besser, weil const char geht nicht

49:53.680 --> 50:06.800
zu const uint, uint 8 underscore t pointer, tja, einfach jibay, wir ändern einfach den

50:06.800 --> 50:09.840
typ in der hoffnung dass es funktioniert, muss funktionieren, das sind im prinzip alles

50:09.840 --> 50:18.000
ein byte und gut ist, wenn man das nicht zueinander casten kann automatisch weiß ich nicht, aha

50:18.000 --> 50:32.760
scheint zu funktionieren, ruby in 2021 und als web framework immer noch rails wahrscheinlich

50:32.760 --> 50:44.880
ne, ich bin auch ruby fan aber es hat es leider dazu abgefahren, die schriftart jetzt

50:44.880 --> 51:01.800
anders, 16, also jetzt sollte es definitiv anders aussehen, das sollte jetzt auf jeden

51:01.800 --> 51:16.960
Fall, ah jetzt, bigger cute chat ist am start, nice, so, also das display, ich würde das

51:16.960 --> 51:23.280
ungefähr so aufbauen, wir machen mal so wie ich mir vorgestellt wie man das ganze anzeigen

51:23.280 --> 51:33.800
könnte, also, als erstes in die oberste zeile kommt ein bisschen debug info, falls ich in

51:33.800 --> 51:37.120
zwei jahren mal wieder in den keller gehe und wissen will was das ding für ne ip hat,

51:37.120 --> 51:42.680
das schreibe ich auf jedenfalls aufs display drauf, ich könnte im router gucken aber ip

51:42.680 --> 51:51.000
anzeige schadet auf jeden fall nix, also machen wirs mal so, screen clear bei jedem loop,

51:51.000 --> 52:00.960
tag rate als ausgabe können wir uns mal sparen, so screen set font auf 12, so und oben kommt

52:00.960 --> 52:06.000
die ip, ich trage jetzt einfach mal testweise was ein, also ich habe noch gar kein wlan,

52:06.000 --> 52:24.680
so, dann würde ich sagen ok dann bei 20 machen wir jetzt den, sowas wie ne uptime oder so,

52:24.680 --> 52:38.080
mal rein, so und dann unten drunter mit 16 machen wir dann quasi den total zähler stand

52:38.080 --> 52:42.000
und dann hier oben den für den ersten stock, den für den ersten stock kriegt so ein hütchen,

52:42.000 --> 52:53.320
also keine ah, kwh und unten irgendwie so habe ich mir das vorgestellt, mal gucken ob

52:53.320 --> 52:58.880
das überhaupt alles aufs display passt, wahrscheinlich nehme ich nicht, ne das kann nicht aufs display

52:58.880 --> 53:06.160
passen, das kann nicht aufs display passen, kwh das display ist ja plus 64 hoch, das kann,

53:06.160 --> 53:14.360
ne ja, aber die idee ist schon mal nicht verkehrt ne, also der sinn ist ja gibt es auch ne grafana

53:14.360 --> 53:19.200
page zum stromverbrauch, ja weil ich werde das so machen, ich exportiere das dann in

53:19.200 --> 53:24.240
mein home assistant, also es hat ja keinen sinn es einfach auf dem display anzuzeigen

53:24.240 --> 53:28.040
wenn man eh neben dem stromzähler steht, das ist einfach doch die bug dass ich gucken

53:28.040 --> 53:35.520
kann ob das übereinstimmt, ähm die eigentlichen daten überträgt das ja, überträgt das

53:35.520 --> 53:41.560
ja auf zu meinem home assistant, das ist ja der witz, ne das ist zu weit auseinander,

53:41.560 --> 53:44.760
also ich würde sagen wir fangen jetzt hier mal bei 0 an, dann machen wir das hier auf

53:44.760 --> 53:49.880
14 und das nächste machen wir dann irgendwie, keine ahnung, plus plus 20 oder so oder plus

53:49.880 --> 53:58.200
plus, ah so, müsste, müsste ungefähr hinhauen, draus nun, weil der ey bei uns ist auch am

53:58.200 --> 54:04.320
stürmen, es fuck, was ist denn das für ein controller, das ist ein, zeige ich dir, erst

54:04.320 --> 54:14.720
mal gucken ob die aus, ja so ist doch schick oder, exquisite ist das, äh das ist ein es

54:14.720 --> 54:23.600
p32 tiny pico und das ist ein standard esp32 halt in besonders klein, der hat nicht alle

54:23.600 --> 54:29.400
pins rausgeführt aber für meine zwecke reicht das, das gute ist halt, dass der ist mini,

54:29.400 --> 54:33.640
der passt da halt easy rein dann auch in das ganze zeug, ich mein die box ist an sich ja

54:33.640 --> 54:46.480
auch nicht groß, ip nur beim neustarten, nee nee nee, ip lass ich die ganze zeit da, weil

54:46.480 --> 54:50.160
wenn das an ist und ich will nicht auf den ersten blick einfach drauf gucken können

54:50.160 --> 54:56.600
dass es noch funktioniert und das, das passt schon, ip, uptime und dann die dinger, ich

54:56.600 --> 55:00.480
muss da, da guckt ja je keiner drauf, das ist ja rein für mich zum gucken falls irgendwas

55:00.480 --> 55:05.200
nicht funktionieren sollte, dass ich überprüfen kann ob alles in ordnung ist, weil wenn du

55:05.200 --> 55:15.840
eh unten bist kannst du auch so auf den zähler gucken, ist das, ja das ist tatsächlich oben,

55:15.840 --> 55:21.080
ok das ist, das ist eigentlich wunderbar so kann man das lassen, wie machst du stromversorgung

55:21.080 --> 55:33.360
oder akku oder netzgerät, achtung, kabelchamp, was du jetzt nicht siehst auf der rückseite

55:33.360 --> 55:41.400
hat das ding einen anschluss für 12 volt dc, what is happening im hintergrund gerade

55:41.400 --> 55:49.960
in der musik, warum ip und uptime nicht im wechsel, ja das könnte man machen, das ist

55:49.960 --> 55:54.360
mir aber fast schon der aufwand nicht wert, da müsste ich ja nämlich zählen und gucken

55:54.360 --> 56:00.880
wann der das wie macht, weiß ich nicht, das ist dann advanced, das ist dann advanced, das

56:00.880 --> 56:10.560
können wir dann, die musik alter, das macht mich voll nervös, du hast mein interview

56:10.560 --> 56:14.480
bei null gesehen, das video ist echt gut geworden, hätte ich nicht gedacht am anfang,

56:14.480 --> 56:21.880
dass wir da so guten flow entwickeln, nee es ist, nee nee es ist nicht, es ist 12 volt

56:21.880 --> 56:28.600
auf ein altes d1 mini shield, was ich noch hatte und von da 12 volt auf den 12 volt input

56:28.600 --> 56:35.520
von dem da, weil das schöne ist, wenn ich den über 5 volt, was laber ich denn, 12 volt

56:35.520 --> 56:40.080
auf 5 volt und wenn ich den über 5 volt power dann gehen die ganzen leds, das ding ist so

56:40.080 --> 56:46.280
gemacht zum strom sparen, dass keine leds an sind, wenn es über 3,3 volt gepowert wird,

56:46.280 --> 56:50.160
aber woher kommen denn deine daten, die kommen hier her, ich hab einmal im keller sowas hier

56:50.160 --> 57:02.800
hängen, so richtig oldschool dingen mit scheibe, die durchläuft, exellent, so einen hab ich

57:02.800 --> 57:12.640
unten, sieht dann so aus und ich hab oben einen stromzähler, der alle so und so viel wattstunden

57:12.640 --> 57:19.800
blinkt, so und das ganze, also ich weiß, dass es geht, weil ich hab unten im keller schon

57:19.800 --> 57:24.680
was hängen, was das auslesen macht, aber das ist total abartig gelöst und mit band

57:24.680 --> 57:29.400
dran geklebt und ich hab die passenden sensoren hier, also wie gesagt, der sensor ist zum

57:29.400 --> 57:42.280
auslesen von dem zähler, wo sichs dreht, iphone please, hat keinen bock, das sind zwei infrared

57:42.280 --> 57:51.080
leds, die erkennen, wenn der strich durchläuft, jaja, bei uns machen die auch keine anstatt

57:51.080 --> 57:55.080
den kram auszutauschen und wenn sie ihn austauschen, ist es für mich nur gut, da mach ich nämlich

57:55.080 --> 58:00.920
einfach zweimal den infrared sensor dran und es geht trotzdem wieder, so mal kurz konzentrieren,

58:00.920 --> 58:09.160
also setup wunderbar, dann brauchen wir folgendes, wir brauchen um den sensor, wir testen jetzt

58:09.160 --> 58:24.840
erstmal die ganzen sensoren, bevor wir wlan gedöns ausprobieren, würde ich sagen, wir

58:24.840 --> 58:33.960
testen erstmal die ganzen sensoren, so, also wir schließen immer den sensor an und auf

58:33.960 --> 58:37.720
dem display planten wir einfach jetzt mal den sensor stand ein, wir nehmen den da als

58:37.720 --> 58:44.920
erstes, weil der ist einfacher zum ausprobieren, wo ist er, da, den schließen wir jetzt einfach

58:44.920 --> 58:50.320
mal an, der ist, das ist ein lichtempfindlicher sensor, wenn da vorne licht drauf schaltet,

58:50.320 --> 58:56.040
dann ist es, wie wenn man den knopf drückt hier hinten, also ich hab den eingestellt auf,

58:56.040 --> 59:03.600
der ist eingestellt, hat man hier 4 outputs, ein analog output, ein digitaler output plus

59:03.600 --> 59:12.280
3,3 volt ground und wenn das ding licht erkennt, dann ist das, krieg ich halt auf dem digital

59:12.280 --> 59:17.280
pin ein signal, so und das schließen wir jetzt mal an und probieren mal aus, ob das funktioniert

59:17.280 --> 59:24.800
und danach schließen wir mal den temperatursensor an und gucken, ob das funktioniert, also, welchen

59:24.800 --> 59:29.440
port nehmen wir denn mal, also zum testen werde ich jetzt folgendermaßen machen, ich

59:29.440 --> 59:35.720
schließe das an 3,3 volt und ground, ah ne moment, ha, geht gar nicht, ich hab ja gar

59:35.720 --> 59:40.280
keinen, ähm, gar keinen freien, gar keinen freien pin mehr dafür, dann schließe ich

59:40.280 --> 59:48.160
es gleich richtig an, schließe ich es gleich richtig an und zwar hier in die Klemmen rein,

59:48.160 --> 59:51.480
dann mach ich es auch, dann mach ich es auch anders, dann mach ich das hier gleich mit

59:51.480 --> 59:57.520
den, da hab ich nämlich noch ein paar passende kabels für, guckt, das kann ich da, kann

59:57.520 --> 01:00:02.760
ich dann für ground nehmen, da weiß ich gleich, das hat passende farbe, nehme ich hier das

01:00:02.760 --> 01:00:09.560
eine weiße für ground und hier noch ein übrig gebliebenes rotes irgendwo, wenn ich noch eins

01:00:09.560 --> 01:00:18.960
hab, hab ich noch ein übrig gebliebenes rotes irgendwo, stop hier, ja, dann nehmen wir nämlich

01:00:18.960 --> 01:00:23.680
gleich die kabel, dann haben wir auch gleich die richtigen farben für den sensor, so,

01:00:23.680 --> 01:00:49.200
ich brauch den abisoliert champ, Leute, ich brauch den abisoliert champ, gucken, plopp,

01:00:49.200 --> 01:00:57.600
oh, fuck, es geht nicht raus, weil ich vorne irgendwie was zusammengelötet hab, schon,

01:00:57.600 --> 01:01:04.320
das zackt, ok, da muss ich nochmal, die sache nochmal kürzen, kürzen, nochmal abisolieren,

01:01:04.320 --> 01:01:20.360
so, wunderbar, einmal, zweimal, wunderbar, so, dann schließen wir den ganzen crempel

01:01:20.360 --> 01:01:31.600
mal an und gucken, ob es funktioniert, also, was brauchen wir denn, vcc ist das rote, ups,

01:01:31.600 --> 01:01:38.120
falscher sensor übrigens, by the way, vcc ist das rote, ich hoffe, man sieht irgendwas,

01:01:38.120 --> 01:01:53.640
das da, so, und ground ist, ja da, exellent, ja, und dann brauchen wir noch ein data pin,

01:01:53.640 --> 01:02:03.200
data pin nehme ich jetzt erst mal so ein langes kabel und gut ist, ok, ich mach mal kurz den

01:02:03.200 --> 01:02:09.880
ganzen kram aus, achso, kann ich das jetzt überhaupt vom raspberry pi abstöpseln und

01:02:09.880 --> 01:02:16.040
die usb weiterleitung geht dann weiterhin, ich hab jetzt zwei varianten, entweder ich

01:02:16.040 --> 01:02:20.280
machs aus und stöpsel es an oder ich machs on the fly, in der hoffnung ich schließ

01:02:20.280 --> 01:02:27.400
nix kurz, weiß ich nicht, was die bessere variante ist, wahrscheinlich ausschalten,

01:02:27.400 --> 01:02:43.960
wir müssen es ja nicht absichtlich kaputt machen, no risk, no fun, ja, ist klar, na gut,

01:02:43.960 --> 01:02:47.760
ich muss es hier eh runter machen, ich komm ja eh nicht dran, ich komm ja eh nicht richtig

01:02:47.760 --> 01:02:55.840
dran hier, kann ichs auch, kann ichs auch mal kurz ausmachen, so, also, gucken dass alles

01:02:55.840 --> 01:03:06.280
richtig angeschlossen ist, plus 5 volt ist vcc und das andere ist ground, passt, das heißt

01:03:06.280 --> 01:03:09.920
ich steck das mal in die klemmen rein und dann gucken wir mal, ob das ganze angeht,

01:03:09.920 --> 01:03:19.960
vor die ärmel hochkrempeln, der cursor, exquisite cursor, so, also schauen wir mal, ich mach

01:03:19.960 --> 01:03:28.320
mal kurz das kabel hier ab, dass ich besser dran komm, so, also einmal klemme, rein damit,

01:03:28.320 --> 01:03:42.080
guckt, einmal hier und einmal, na kann man den kram vielleicht bisschen fest machen,

01:03:42.080 --> 01:04:02.600
einmal an crown klemsorn, hoch, hab ichs nicht auf, exzellent, passt, ist dran, sicher, dass

01:04:02.600 --> 01:04:18.960
es auch bloß 5 sind, ich hoffe mal, ansonsten smokes klein, so und als data pin nehmen wir

01:04:18.960 --> 01:04:42.760
mal, was nehmen wir denn mal, 14, ok wunderbar, also passt, schließen wir mal in der hoffnung,

01:04:42.760 --> 01:04:54.120
es geht nicht direkt kaputt, also merkt ihr schon mal, 14 gpio ist das dran, ok noch raucht

01:04:54.120 --> 01:04:59.640
nix, noch raucht nix, der sensor ist übrigens by the way auch an, aber das ist auch klar,

01:04:59.640 --> 01:05:05.720
dass der sensor angeht, weil guckt mal, seht ihr, erkennt ihr das, das grüne licht vom

01:05:05.720 --> 01:05:19.800
sensor, der kennt man glaub ich nicht richtig, oder, der hat hier, der leuchtet grün, weil

01:05:19.800 --> 01:05:26.920
er was erkannt hat, erkennt man, ok und wenn ich das zu halte, je nachdem, dann geht das

01:05:26.920 --> 01:05:36.800
grüne aus, so, guckt jetzt das grüne aus, jetzt grüne wieder an, ok, so, also an 14

01:05:36.800 --> 01:05:45.120
ist es dran, schauen wir mal, dass ich euch das display wieder gezeigt krieg, so, exzellent,

01:05:45.120 --> 01:05:50.640
lassen wir es mal so hängen, wunderbar, so, natürlich ist das ding jetzt permanent auf

01:05:50.640 --> 01:05:59.520
grün, weil die lampe hier drauf donnert, ne, aber wenn ich das hier mal zu halte, dann

01:05:59.520 --> 01:06:15.600
gehts grüne aus, exzellent, exzellent, so, das werden wir jetzt versuchen mal zu detecten,

01:06:15.600 --> 01:06:27.160
und das ist das teil, was dann den oberen, für das obere stockwerk den stromzähler

01:06:27.160 --> 01:06:35.000
zählen lässt, gut, glaub so war besser, oder auch nicht, eben hatte ich es doch schön

01:06:35.000 --> 01:06:45.520
positiont, warum ging das eben so gut zu positionieren, jetzt gehts nicht mehr, so jetzt, exzellent,

01:06:45.520 --> 01:07:05.120
exzellent, sacked alter, so, sehr schön, oder auch nicht, aber es funktioniert, nice, ok,

01:07:05.120 --> 01:07:12.840
alles klar leute, dann probieren wir es mal den kram auszulesen, ich will eigentlich,

01:07:12.840 --> 01:07:17.960
dass ihr das grüne, ich will eigentlich, dass ihr die grüne led von dem ding seht, kann

01:07:17.960 --> 01:07:32.600
ich euch das irgendwie so einblenden, dass man die grüne led gescheit sieht, jetzt oder,

01:07:32.600 --> 01:07:51.400
jetzt sieht man es eigentlich ganz gut, ah, noch besser, guck mal, so ist perfekt, so

01:07:51.400 --> 01:08:07.840
ist poggers, exzellent, wo kann man den keks unten links kaufen, nirgendswo, ok, so, also

01:08:07.840 --> 01:08:18.520
pin 14, so, also von der idee her sollten wir das jetzt mal irgendwie auf die reihe

01:08:18.520 --> 01:08:24.880
kriegen, dass wir den pin auslesen können, wenn licht an und aus geht, wir können jetzt

01:08:24.880 --> 01:08:30.400
mal eine sache testen, ich kann mal das licht generell an und aus machen, ob das dann schon

01:08:30.400 --> 01:08:47.960
dunkel genug ist, ah guck, jetzt ist grüne licht aus, und jetzt, wenn ich die beleuchtung

01:08:47.960 --> 01:08:53.640
wieder anmache, geht auch das grüne licht wieder an, seht ihr das, also der erkennt,

01:08:53.640 --> 01:09:02.800
der erkennt, dass es, der erkennt kurz, dass es lichteinfall gegeben hat, ok, sehr schön,

01:09:02.800 --> 01:09:08.720
also dann gucken wir mal, wie wir die sensoren erkennen können, so und eine sache muss man

01:09:08.720 --> 01:09:15.080
beachten, wenn man so input ausliest, es gibt die einfache variante, dass man einfach hier

01:09:15.080 --> 01:09:22.840
direkt sagen kann, hier digital read und dann gpio, das problem ist nur, dass solche sensoren

01:09:22.840 --> 01:09:27.640
mal ganz gerne dazu neigen ein bisschen zu bouncen, also sprich, der geht, also sprich

01:09:27.640 --> 01:09:33.200
wenn das licht angeht, geht der sensor, oder wenn das licht ausgeht und das halt nicht

01:09:33.200 --> 01:09:42.080
so schnell geht, dann ist der sensor eventuell einfach 5000 mal ganz schnell an und aus,

01:09:42.080 --> 01:09:47.320
deswegen nehm ich da irgendeine library, die das ganze für mich schon debounst, also sprich,

01:09:47.320 --> 01:09:52.240
die dann quasi nur einmal schaltet alle 500 millisekunden oder so, hat ha auch, ja aber

01:09:52.240 --> 01:09:55.720
ich sende das nicht an ha, ich sende das nicht an meinen home assistant 5000 mal die

01:09:55.720 --> 01:10:06.200
sekunde, dass der das debouncen kann, dann nehmen wir easy button nehmen wir dafür, so

01:10:06.200 --> 01:10:13.080
und da hat hier irgendwo nen, der hat hier irgendwo nen example für interrupts, ach

01:10:13.080 --> 01:10:18.600
ist schon, ha ist home assistant, dass das was ich für heim automatisierung und anzeige

01:10:18.600 --> 01:10:26.680
verwende, so das brauchen wir jetzt hier, also wir brauchen nen button, easy button, button

01:10:26.680 --> 01:10:36.000
pin, so das ist kein button, sondern, äh, wie nennen wir das denn jetzt, äh, sensor

01:10:36.000 --> 01:10:54.480
LED, LED sensor oder nein, light sensor heißt das Ding, so, also include easy button und

01:10:54.480 --> 01:11:00.400
wir haben es dran an GPIO 14, oder chat, hab ich die richtige erinnerung, funktioniert

01:11:00.400 --> 01:11:07.440
ein Heizungsdashboard noch, ja, alles gut, funktioniert noch, gut, ähm, jetzt müssen

01:11:07.440 --> 01:11:14.360
wir uns mal das Beispiel angucken, button begin on press, on sequence, on support interrupt,

01:11:14.360 --> 01:11:20.000
also es gibt zwei varianten, wenn man schalter und buttons auslesen will, wie man das machen

01:11:20.000 --> 01:11:25.480
kann, man kann das über interrupts machen, oder man kann das in der main loop machen,

01:11:25.480 --> 01:11:32.320
ich persönlich bevorzuge das mit interrupts zu machen, ähm, was, willst du per camera

01:11:32.320 --> 01:11:36.120
deinen Stromzähler auslesen, nee nee nicht per camera, ich bevorzuge das per interrupts,

01:11:36.120 --> 01:11:41.560
weil man da nix verpassen kann, ansonsten in der main loop ist das mir n bisschen, hatte

01:11:41.560 --> 01:11:47.640
ich schon Probleme mit, ja, über interrupts funktioniert das folgendermaßen, sobald der

01:11:47.640 --> 01:11:52.760
button an oder aus, also sobald es registriert wird, ruft es ne funktion auf, die das dann

01:11:52.760 --> 01:11:57.160
hochzählt, man darf da allerdings nicht zu lange brauchen, weil ansonsten die Kiste abstürzt,

01:11:57.160 --> 01:12:01.760
weil die alles andere nicht mehr machen kann in der Zeit, wo es den interrupt ausführt,

01:12:01.760 --> 01:12:06.880
da muss man n bisschen aufpassen, so, das heißt nicht button, das heißt light sensor, was

01:12:06.880 --> 01:12:11.680
ich machen will ist folgendes, also, ich hab hier diesen controller, ich hab zwei sensor

01:12:11.680 --> 01:12:16.520
an, einmal nen sensor, der licht erkennt und einmal nen sensor, der auf so nem alten drehscheibenzähler

01:12:16.520 --> 01:12:19.960
erkennt, wenn der strich durchläuft, ich weiß, dass das funktioniert, weil ich hab

01:12:19.960 --> 01:12:27.480
sowas bei mir ähnliches im keller schon hängen, und da dran hängt nen microcontroller, hier,

01:12:27.480 --> 01:12:32.520
da, hier, man sieht ihn gerade nicht, aber doch da, neben hängt er, und der schickt

01:12:32.520 --> 01:12:40.320
es dann per mqtt an meine heimautomatisierung, so, on sequence brauchen wir nicht, beginn,

01:12:40.320 --> 01:12:48.080
supports, ich würde mal sagen, if supports interrupt können wir uns schenken, weil entweder

01:12:48.080 --> 01:12:56.520
gehts oder geht nicht, weil sonst krieg ich ja gar nix mit, so, on button pressed, was

01:12:56.520 --> 01:13:05.280
will der da haben, on button pressed, button pressed, ok, das gefällt mir nicht, machen

01:13:05.280 --> 01:13:16.120
die denn da, so, sequence brauchen wir nicht, read, button pressed, kann man das mit lambdas

01:13:16.120 --> 01:13:19.440
machen, wir müssen mal ausprobieren, vielleicht ist das, durch geht das schöner, also, das

01:13:19.440 --> 01:13:24.000
wir quasi sagen können, so, on pressed, ok, jetzt kommt die wunderschöne 10 plus plus

01:13:24.000 --> 01:13:37.480
lambdas und tags, geht das, potentiell, mag er das, ok, das würde funktionieren, äh,

01:13:37.480 --> 01:13:41.000
ich kenn das bitbastleih-video, da hab ich sogar nen kommentar drunter geschrieben damals,

01:13:41.000 --> 01:13:50.520
dass ich das ähnlich mach, da hab ich sogar nen kommentar damals drunter geschrieben,

01:13:50.520 --> 01:14:07.760
hier, so, ok, das funktioniert, on button pressed, also kann ich das jetzt so rum machen,

01:14:07.760 --> 01:14:14.160
ach, moment, das ist der interupt, ok, gucken wir mal, ob ich hier auch lambdas und tags

01:14:14.160 --> 01:14:17.840
verwenden kann, weil dann brauch ich den kram da oben nicht, hoffentlich geht das, das ist

01:14:17.840 --> 01:14:24.000
auf jeden fall die schönere variante, light sensor read, machen wir so, mag er das, frisst

01:14:24.000 --> 01:14:29.080
er das, ah, yes, scheint zu funktionieren, sonst hätte es schon einen Fehler gegeben,

01:14:29.080 --> 01:14:37.360
so, on pressed, so, und hier müssen wir jetzt eintragen, dass wir hochzählen, wenn, ich

01:14:37.360 --> 01:14:42.080
glaub ich muss noch was zu trinken holen, dass wir den schrumpfverbrauch hochzählen,

01:14:42.080 --> 01:14:49.800
wir machen das jetzt mal nur sehr, äh, prototypartig, also int, äh, total, nein das ist nicht total,

01:14:49.800 --> 01:14:58.960
das ist, ähm, first floor energy, von null, wobei, leute, wir können jetzt super advanced

01:14:58.960 --> 01:15:06.800
das c++ machen, wir nehmen kein int, sondern wir nehmen ein, wie heißt das, standard atomic,

01:15:06.800 --> 01:15:13.840
das, weil wir greifen ja da von verschiedenen, wir greifen da ja von verschiedenen sachen

01:15:13.840 --> 01:15:20.440
drauf zu, wir greifen da einmal aus dem interrupt drauf zu, und wir greifen aus der main loop

01:15:20.440 --> 01:15:28.840
drauf zu, wobei im interrupt kann eigentlich nichts passieren, weil nichts anderes ausgeführt

01:15:28.840 --> 01:15:37.560
wird, während der interrupt läuft, aber wenn der gerade, doch, doch, da kann was passieren,

01:15:37.560 --> 01:15:43.480
wenn der gerade liest, der interrupt kommt, oder was auch immer, context switch, wie auch

01:15:43.480 --> 01:15:50.200
immer, oder dann reinschreibt, oder dann wieder fortsetzt, ich glaub das ist wahrscheinlich

01:15:50.200 --> 01:15:55.040
so die bessere variante, syncchamp, genau, ok, first floor energy, und dann haben wir

01:15:55.040 --> 01:16:02.000
besser einmal zu viel gesynkt, als einmal, als einmal zu wenig, warum will der nicht,

01:16:02.000 --> 01:16:16.440
incomplete type, not allowed, c++70, ah yes, weil, ach stimmt, man muss den kram include,

01:16:16.440 --> 01:16:34.680
ja, hast recht, also, comic, ah nice, geht das jetzt, du kannst rust nicht gescheit verwenden,

01:16:34.680 --> 01:16:41.080
hast du mal versucht, ja guck mal, rust sp 32, das ist übelst, äh, nicht aus, das ist,

01:16:41.080 --> 01:16:45.520
äh, übelst outdated schon die versionen, die sie haben, ok, ach, 20 tage, ich hab nichts

01:16:45.520 --> 01:16:59.480
gesagt, das letzte mal, wo ich geguckt hab, ähm, und sehr experimentell, müssen wir mal

01:16:59.480 --> 01:17:08.960
ausprobieren, was magst du an c++ nicht, das fast machen wir nicht auf, sonst bin ich jetzt

01:17:08.960 --> 01:17:13.320
fünf Minuten drüber zu erzählen, fünf Minuten und 50 Minuten drüber zu erzählen, was ich

01:17:13.320 --> 01:17:21.920
an c++ nicht mag, das meiste mag ich an c++ nicht, also, es ist auf jeden fall besser geworden,

01:17:21.920 --> 01:17:29.280
aber das heißt nichts, es ist immer noch kacke, also, ok, ok, eine, eine, eine sache, eine

01:17:29.280 --> 01:17:35.280
sache, eine sache, ähm, zum beispiel, dass, dass, dass die sich ewig lang nicht drauf

01:17:35.280 --> 01:17:39.200
festgelegt haben, und wir fangen mit was viel einfacherem an, mit was viel einfachem was

01:17:39.200 --> 01:17:46.160
an c++ sagt, dass sie immer noch header verwenden, 2021, ich geb dir header alter, das ist doch

01:17:46.160 --> 01:17:50.760
kein halo, warum machen die nicht ein ordentliches modulformat und gut ist, jede sprache der

01:17:50.760 --> 01:18:01.680
letzten 50 jahre kriegt, ok, 40 jahre kriegt das halbwegs hin, 30 jahre, ähm, c++ nicht,

01:18:01.680 --> 01:18:11.200
findest du c besser, ehrlich gesagt, c ist wenigstens konsistent, leichtgewichtig und

01:18:11.200 --> 01:18:35.120
irgendwie in sich schlüssig, c++ nicht, ja, es gibt viele sachen, c++ 20 hat keine module,

01:18:35.120 --> 01:18:42.400
das haben sie, glaub ich, auf 23 verschoben, ok, light sensor read, enable interrupt light

01:18:42.400 --> 01:18:54.120
sensor, blablabla, ok, wir updaten jetzt unser display einfach mit den werten vom light sensor,

01:18:54.120 --> 01:19:01.600
was für programmiersprache ich mag, ruby, c sharp, python, zum teil auch go, ich bin

01:19:01.600 --> 01:19:06.600
mittlerweile sogar javascript magisch ganz gern, was ist der unterschied zwischen headern

01:19:06.600 --> 01:19:14.880
und modulen, ich hab keine ahnung wie c++ module implementiert, wahrscheinlich kacke,

01:19:14.880 --> 01:19:18.760
der große unterschied ist, du brauchst keine header mehr, du include, also was heißt du

01:19:18.760 --> 01:19:25.280
include, du importierst ein modul und dann ist gut, das ganze meta daten zeug spricht,

01:19:25.280 --> 01:19:32.640
welche metoden gibt's, nicht sachen doppelt importieren, passende abhängigkeiten, wie

01:19:32.640 --> 01:19:38.120
was importiert wird, das macht alles dann für dich, die sprache oder der compiler macht

01:19:38.120 --> 01:19:45.440
das dann für dich, bei c++ header hast du so ganz merkwürdige konstrukte wie if not defined,

01:19:45.440 --> 01:19:51.440
pragma once include, blablabla, einfach nur um darüber hin wegzutäuschen, dass header

01:19:51.440 --> 01:19:58.840
im prinzip nichts anderes ist wie reinkopieren, und das macht halt probleme manchmal, die

01:19:58.840 --> 01:20:03.600
include reinfolge macht probleme, alles mögliche, das hast du mit modulen gar nicht mehr, du

01:20:03.600 --> 01:20:13.640
hast dann auch eine einheitliche beschreibung, ich hab echt keine ahnung was mit c++ modulen

01:20:13.640 --> 01:20:23.160
ist, zumindest würde ich das halt erwarten, dass es das abfackelt, eine einheitliche sache

01:20:23.160 --> 01:20:35.880
was man exportieren will, was nicht, versuch mal templates, ahja klar, das soll natürlich

01:20:35.880 --> 01:20:42.200
auch ordentlich funktionieren, ohne header, mein andere sprachen kriegen das auch hin,

01:20:42.200 --> 01:20:46.760
deswegen verstehe ich nicht, ok mal go außen vor, go hat ja den google weg gemacht, wir

01:20:46.760 --> 01:20:53.560
machen einfach keine generics, wir sagen einfach man braucht das nicht, in go die taktik bei

01:20:53.560 --> 01:20:59.160
google ist eh geil, sobald was zu kompliziert wird, beziehungsweise zu anstrengend zu implementieren

01:20:59.160 --> 01:21:03.480
sagt go einfach nein nein nein nein, das verwirrt die leute, das bauen wir nicht ein, ja go

01:21:03.480 --> 01:21:10.560
kriegt jetzt nach 50 jahren mal generics, ja es gibt so viele sachen die mich nerven

01:21:10.560 --> 01:21:21.560
an c++, die standard library ist auch krass inkonsistent, da merkst du richtig, dass in

01:21:21.560 --> 01:21:26.120
der standard library die unterschiedlichen dinger von 50 verschiedenen leuten entwickelt

01:21:26.120 --> 01:21:33.320
wurden, ich paste euch mal kurz was in chat, was ich letztens bei stackoverflow gefunden

01:21:33.320 --> 01:21:41.000
habe, wie man den, wie man rausbekommt, wie die standard formatierung für das tausender

01:21:41.000 --> 01:21:47.520
trend zeichen ist, also normalerweise würde ich folgendes erwarten, in einer halbwegs

01:21:47.520 --> 01:21:53.120
normalen programmiersprache, würde ich sowas erwarten, ja, ich hab hier so ein print, irgendwie

01:21:53.120 --> 01:21:56.960
print, was auch immer, print sonst was, so da kann ich jetzt in irgendeiner art und

01:21:56.960 --> 01:22:03.640
weise formatierungsgedöns angeben und sag, ey komm ich will das formatieren, dezimal

01:22:03.640 --> 01:22:10.800
10 stellen, was auch immer und an der stelle will ich dann keine ahnung meine zahl reinschreiben,

01:22:10.800 --> 01:22:17.760
also so würde ich das erwarten, so und dann gibt es die sache, ok, tausender trend zeichen

01:22:17.760 --> 01:22:25.560
punkt oder komma, so und jetzt kommt der hit, mittlerweile hat c++ im standard was

01:22:25.560 --> 01:22:30.600
um sowas zu formatieren, das ist eigentlich ganz nice, wenn wir bringen später fmt, werden

01:22:30.600 --> 01:22:35.920
wir auch noch include, dass man, ich mag fmt, da opfer ich auch gerne ein bisschen flash

01:22:35.920 --> 01:22:42.360
speicherplatz für, so, so wäre das nice, so und jetzt kommt jetzt der hammer, wenn

01:22:42.360 --> 01:22:48.040
man jetzt sagen möchte, hey ich will aber nicht den standard tausender trend zeichen

01:22:48.040 --> 01:22:53.480
haben, sondern ich möchte einen punkt anstatt einen comma haben, dann würde ich erwarten

01:22:53.480 --> 01:22:56.800
keine ahnung, entweder dass man das hier vorne machen kann, das ist hässlich, dass

01:22:56.800 --> 01:23:02.280
man einen zusatz, einen zusatz parameter hat, irgendwie separator gleich sowas, übrigens

01:23:02.280 --> 01:23:09.080
name parameter c++ auch nicht, was ich auch absolut kacke finde, c++ hat default, default

01:23:09.080 --> 01:23:13.000
parameter aber keine name parameter, was das, was es eigentlich fast schon wieder sinnlos

01:23:13.000 --> 01:23:25.280
macht, so, also sowas würde ich erwarten oder aber, oder aber dass man sagt, local.de,

01:23:25.280 --> 01:23:31.400
das wäre auch noch ok, das wäre auch noch ok, aber wenn man rausbekommen will, wenn

01:23:31.400 --> 01:23:38.200
ihr mal eine runde kacken wollt, wie man rausbekommt, was der aktuell gesetzte sensor, äh, sensor,

01:23:38.200 --> 01:23:46.440
der aktuell gesetzte, ähm, tausender separator für ne länder setting ist in c++, ich habs

01:23:46.440 --> 01:24:05.480
mir extra raus kopiert, weil es so schön ist, muss man das hier machen, aha yes, dazu

01:24:05.480 --> 01:24:16.120
fällt der nix mehr ein oder, dazu fällt der nix mehr ein, trivial, trivial, wer macht

01:24:16.120 --> 01:24:30.160
es denn nicht, ok, Leute, ich sehe wir machen absolut keinen progress, obvious, ok, wir

01:24:30.160 --> 01:24:35.600
wollen jetzt auf dem sensor, äh, auf dem display ausgeben, was unser licht, light sensor

01:24:35.600 --> 01:24:40.760
gesenzt hat hier, light sensor read, achso, onpress muss ich auch machen, onpress wollen

01:24:40.760 --> 01:24:47.520
wir, äh, first floor energy++ einfach mal machen, so, und hier geben wir first floor

01:24:47.520 --> 01:24:53.840
energy aus, äh, ich muss das wahrscheinlich erstmal in den string konvertieren, dass das

01:24:53.840 --> 01:25:02.920
ordentlich funktioniert, ok, wunderbar, ich sollte jetzt mitten auf dem display eigentlich

01:25:02.920 --> 01:25:11.320
null stehen haben, oh, warum, oh, habe ich nicht angeschrieben, ach, der export ist ja

01:25:11.320 --> 01:25:31.120
weg, device not found, no exportable device, ich hab, ich hab, ich hab mein usb redirect

01:25:31.120 --> 01:25:46.120
kaputt gemacht, da ist es doch, find, complete, attach, ah, yes, excellent, alles klar, ok,

01:25:46.120 --> 01:25:58.440
jetzt upload, ja, ich kann, wie gesagt, ich habe für den fall der fälle, weil öfter

01:25:58.440 --> 01:26:06.640
weiß ich, ich habe ein textdokument bei mir am start, das ist mittlerweile 103 zeilen lang,

01:26:06.640 --> 01:26:11.120
und der titel ist warum c++ sackt, da hab ich nur so dinger drin stehen, weil, weil,

01:26:11.120 --> 01:26:14.480
weil, es wird immer wieder drüber diskutiert, so nach dem, oh, aber so schlecht ist es doch

01:26:14.480 --> 01:26:18.840
gar nicht, guck mal, da steht null, leute, es hat funktioniert, und jetzt ist die frage,

01:26:18.840 --> 01:26:25.080
zählt das hoch, ok, jetzt, jetzt kommt der special moment, zählt das hoch, wenns ausgeht,

01:26:25.080 --> 01:26:33.600
oh Mist, zu viel licht, ein fall aus dem fenster, es ist, es ist zu hell, es ist zu hell, ich

01:26:33.600 --> 01:27:03.080
muss es zu, da, zu, hm, hm, hm, hm, hm, haha, ok, ja, ja, ja, ja, ja, ja, ja, ja, ja, ja,

01:27:03.080 --> 01:27:12.580
Okay, wir machen wir machen serial output und gucken ob es funktioniert

01:27:12.580 --> 01:27:30.520
Serial print press press it upload

01:27:30.520 --> 01:27:38.080
Gpio 14, da ist es doch dran

01:27:38.080 --> 01:27:44.320
Warum hast du das Z-Font in der Lupe? Weil ich ansonsten oben drüber was hatte mit dem kleinen...

01:28:08.080 --> 01:28:13.920
Das funktioniert nicht

01:28:13.920 --> 01:28:27.320
Das funktioniert der Button funktioniert nicht, warum funktioniert der Button nicht?

01:28:27.320 --> 01:28:37.600
Habe ich irgendwas? Vielleicht sollte ich doch mal checken was der Typ im Beispiel drin stehen hat

01:28:37.600 --> 01:28:51.440
If button supports interrupt, guck mal lassen wir das mal ausgeben ob das...

01:28:51.440 --> 01:28:58.240
Was hat er übrigens für Schmerzen mit meinem Filesystem? Das kann ich mal wegmachen, das brauche ich jetzt nicht

01:28:58.240 --> 01:29:10.320
Aber ob Smiths fällt ist erstmal egal

01:29:10.320 --> 01:29:18.160
Gpio 14, hab ich doch

01:29:18.160 --> 01:29:35.440
Upload, okay zeig mal her, habe ich das auch richtig angeschlossen? Gpio? Ich sehe es jetzt nicht

01:29:35.440 --> 01:29:51.360
Leute, ich habe es falsch angestöpselt, guck mal

01:29:51.360 --> 01:30:06.240
Guck mal, ich habe es an den Port für einen Analogsensor angeschlossen

01:30:06.240 --> 01:30:20.480
Ich habe es den Analogsensorport angeschlossen, ich muss es an Digitalport anschließen

01:30:20.480 --> 01:30:26.000
Geh aus Lichtsensor, geh aus

01:30:26.000 --> 01:30:43.360
Geh aus, aus, es ist zu hell

01:30:43.360 --> 01:30:51.040
Einmal press, der hat es erkannt, der hat es erkannt

01:30:51.040 --> 01:31:19.360
Energy++, Upload, ausmachen, das ist irgendeine Mario Remix Playlist

01:31:19.360 --> 01:31:24.000
Es hat geruckelt

01:31:24.000 --> 01:31:27.600
Sorry Leute, die Kamera ist glaubt RIP

01:31:27.600 --> 01:31:36.400
Oh shit, oh oh oh, ich muss das Kabel anschließen an die Kamera Leute

01:31:36.400 --> 01:31:39.600
Ich habe das Stromkabel nicht dran gehabt, bald wäre die Kamera ausgegangen

01:31:39.600 --> 01:31:46.960
Guck mal, es hat übrigens gezählt by the way

01:31:46.960 --> 01:31:52.560
Boah übel, huge lag, was ist denn hier los, das ist massive lag gerade

01:31:52.560 --> 01:32:01.600
Mal kurz reloaden

01:32:01.600 --> 01:32:14.000
Ah yes, komm mal, seht ihr das?

01:32:14.000 --> 01:32:16.960
Das funktioniert

01:32:16.960 --> 01:32:31.440
Aus, an, also sprich bei jedem Lichtimpuls zählt der

01:32:31.440 --> 01:32:32.440
Exzellent

01:32:32.440 --> 01:32:42.280
Ok, von der Logik her klappt das ganze, wir sollten vielleicht hier nochmal einstellen

01:32:42.280 --> 01:32:45.720
dass der ein bisschen empfindlicher ist

01:32:45.720 --> 01:32:51.480
So, was kann man hier alles einstellen bei dem Button, das ist ja wirklich nicht wirklich

01:32:51.480 --> 01:32:52.480
ein Button

01:32:52.480 --> 01:32:55.080
Debounce Time, 35 Millisekunden

01:32:55.080 --> 01:33:06.360
Für was ist das unsigned Int oder für was ist das U wahrscheinlich, also da können

01:33:06.360 --> 01:33:09.840
wir auch durchaus mal 100 Millisekunden machen, schneller wird das Ding nicht play

01:33:09.840 --> 01:33:17.160
Pullup Enable, äh

01:33:17.160 --> 01:33:18.160
Active Low

01:33:18.160 --> 01:33:22.800
Ah stimmt, Moment, jetzt ist die Frage, was ist besser, was ist besser

01:33:22.800 --> 01:33:27.600
Moment, schaltet das?

01:33:27.600 --> 01:33:35.360
Das schaltet beim ausgehen, guck

01:33:35.360 --> 01:33:36.880
Das schaltet beim ausgehen

01:33:36.880 --> 01:33:42.720
Ok, das müssen wir umdrehen, das muss schalten beim angehen

01:33:42.720 --> 01:33:57.080
Ist gerade ein Zug vorbeigefahren, ja seht ihr, das ist das Problem, wenn es zu empfindlich

01:33:57.080 --> 01:33:58.880
eingestellt ist

01:33:58.880 --> 01:34:03.560
Da geht es total oft an und aus, dafür braucht man so eine Debounce Time

01:34:03.560 --> 01:34:07.080
Ok, um das jetzt abzufangen sind 100 Millisekunden auch zu wenig, aber passt schon

01:34:07.080 --> 01:34:11.640
Wir wollen, ja Pullup, meinetwegen, guck mal, by the way, dafür bräuchten wir jetzt die

01:34:11.640 --> 01:34:13.440
named parameters

01:34:13.440 --> 01:34:18.520
Hätte C++ named parameters, könnte ich jetzt einfach sagen, Active Low gleich

01:34:18.520 --> 01:34:21.160
Geht aber nicht und deswegen muss ich den ganzen anderen Mist angeben

01:34:21.160 --> 01:34:25.880
True und der ist false, das heißt er sollte eigentlich umgedreht schalten

01:34:25.880 --> 01:34:26.880
Upload

01:34:26.880 --> 01:34:45.400
Ok, also, dann machen wir jetzt nochmal Licht an

01:34:45.400 --> 01:34:57.040
1, habt ihr es gesehen?

01:34:57.040 --> 01:35:00.840
Das schaltet jetzt beim Licht angehen

01:35:00.840 --> 01:35:05.840
Bäm, 2

01:35:05.840 --> 01:35:06.840
3

01:35:06.840 --> 01:35:12.040
Ok, das funktioniert, sehr gut, exell

01:35:12.040 --> 01:35:16.800
OBS Ninja, das ist ein Github Projekt

01:35:16.800 --> 01:35:22.320
Da bekommst, da kannst du dein iPhone, deine iPhone Kamera recht easy in OBS einbinden

01:35:22.320 --> 01:35:23.320
mit

01:35:23.320 --> 01:35:26.400
Ich hab das bei mir lokal laufen hier, das da ist das

01:35:26.400 --> 01:35:29.800
Ok, das funktioniert schon mal, ich bin begeistert, exellent, exellent

01:35:29.800 --> 01:35:34.720
Debounce Time 100 Millisekunden ist auch in Ordnung

01:35:34.720 --> 01:35:38.800
Wir könnten das eigentlich noch deutlich höher stellen auf, keine Ahnung, 500 Millisekunden

01:35:38.800 --> 01:35:43.480
so viel, so viel brauche ich nicht, das blinkt alle, alle Minute mal oder so

01:35:43.480 --> 01:35:44.960
Das ist Manjaro mit E3WM

01:35:44.960 --> 01:35:55.560
Natürlich ist es ein Github Projekt

01:35:55.560 --> 01:35:59.880
Jemand ist auf Github gegangen, hat da ein Projekt angelegt

01:35:59.880 --> 01:36:05.720
Sonst, wenn es kein Github Projekt wäre, dann würdest du es ja auf Github nicht sehen

01:36:05.720 --> 01:36:14.640
Oh, oh, oh ja, es ist ein Open Source Projekt, welches auf Github gehostet wird

01:36:14.640 --> 01:36:28.920
Da muss man es aber ganz, das, genau, genau, man benutzt auch kein Linux, sondern wir benutzen

01:36:28.920 --> 01:36:30.240
nur noch GNU-Linux

01:36:30.240 --> 01:36:35.840
Außerdem wissen wir alle, dass es nicht Github heißt, Leute

01:36:35.840 --> 01:36:38.480
Chat, wie heißt das ganze richtig?

01:36:38.480 --> 01:36:41.000
Ihr wisst das, es ist nicht Github

01:36:41.000 --> 01:36:47.480
ShitHub, genau, korrekt

01:36:47.480 --> 01:36:52.400
So, so viel ShitHub

01:36:52.400 --> 01:36:56.680
Ich bin mal kurz schnell was zu trinken holen, dann bin ich gleich wieder da

01:36:56.680 --> 01:37:01.440
Ich bin mal kurz schnell was zu trinken holen, dann bin ich gleich wieder da

01:37:01.440 --> 01:37:28.440
Ich bin mal kurz schnell was zu trinken holen, dann bin ich gleich wieder da

01:37:28.440 --> 01:37:35.440
Ich bin mal kurz schnell was zu trinken holen, dann bin ich gleich wieder da

01:37:58.440 --> 01:38:26.440
Ich bin mal kurz schnell was zu trinken holen, dann bin ich gleich wieder da

01:38:26.440 --> 01:38:50.920
Ich bin mal kurz schnell was zu trinken holen, dann bin ich gleich wieder da

01:38:50.920 --> 01:38:54.780
So chat, ihr könnt euch aussuchen, was wir als nächstes machen wollen.

01:38:54.780 --> 01:39:01.500
Den Temperatursensor, also den anderen, den Infrarot-Sensor, den können wir uns jetzt

01:39:01.500 --> 01:39:04.260
erstmal sparen, der funktioniert exakt gleich wie der.

01:39:04.260 --> 01:39:11.300
Wollen wir jetzt zuerst WLAN machen?

01:39:11.300 --> 01:39:15.620
Also es gibt ein paar Tasks, die wir noch erledigen müssen.

01:39:15.620 --> 01:39:19.300
Also wir brauchen, wir müssen WLAN einrichten auf dem Ding.

01:39:19.300 --> 01:39:25.100
Wir müssen gucken, dass wir das auf die Air-Firmware updaten können, weil wenn das Ding im Keller

01:39:25.100 --> 01:39:28.700
hängt, will ich vielleicht mal eine Firmware hochladen mit einem Bug-Fix und ich will nicht

01:39:28.700 --> 01:39:30.420
mein Rechner anschließen müssen.

01:39:30.420 --> 01:39:39.140
Also OTA müssen wir machen und, oder den Temperatursensor, also wollen wir WLAN gedünst

01:39:39.140 --> 01:39:41.460
machen oder Temperatursensor als nächstes?

01:39:41.460 --> 01:39:56.060
Könnt ihr euch überlegen, WLAN, ja übrigens, das mit Leak ist tatsächlich so eine Sache.

01:39:56.060 --> 01:39:57.620
Wie habe ich das das letzte Mal denn gemacht?

01:39:57.620 --> 01:40:03.220
Secrets, ich glaube so, das müssen wir mal gucken.

01:40:03.220 --> 01:40:10.660
By the way, ich habe dafür einen extra Access Point bei mir jetzt gemacht für Stream, mit

01:40:10.660 --> 01:40:23.700
einem WLAN extra für Streamsorn, ja, include Secrets, ok, testen wir das mal, const wifi

01:40:23.700 --> 01:40:33.060
ssid gleich keg wait, by the way, ist falsch, ich will einfach nur wissen, ob das, wie ist

01:40:33.060 --> 01:40:34.060
das jetzt richtig?

01:40:34.060 --> 01:40:57.940
So, wifi ssid, ha, es wird nicht angezeigt, sehr gut, ah yes, exquisite, so ist das gut,

01:40:57.940 --> 01:41:03.740
es wird nicht angezeigt, dann passt das, dann kann ich das hier reinschreiben, also Secrets,

01:41:03.740 --> 01:41:08.500
so, da muss ich euch chat, chat, ich muss euch mal kurz aussperren, und es ist übrigens

01:41:08.500 --> 01:41:11.860
auch nicht schlimm, wenn ich was leake, weil ich habe ein Access Point und ein WLAN nur

01:41:11.860 --> 01:41:27.460
für ein Stream am Start jetzt mit sowas, äh, Moment, wo habe ich das Passwort?

01:41:27.460 --> 01:41:49.940
Oh Gott, das Passwort wieder hier, Massive Passwort, ok, passt, kann euch wieder anschalten,

01:41:49.940 --> 01:42:00.140
wifi pw, mal gucken, ob es uns anzeigt, nein, macht es nicht, alles klar, ich kann euch

01:42:00.140 --> 01:42:10.340
wieder einschalten, ja, wenn es liegt, ist nicht schlimm, so, also, ok, dann machen wir

01:42:10.340 --> 01:42:20.300
das jetzt mal, dann machen wir das jetzt mal mit WLAN, also, wir machen eine, jetzt wird

01:42:20.300 --> 01:42:24.820
es ein bisschen advanced, jetzt wird es ein bisschen advanced, im Notfall das nach dem

01:42:24.820 --> 01:42:28.860
Stream ändern, nee, ich muss es nicht ändern, ich habe ein extra Access Point mit einem extra

01:42:28.860 --> 01:42:33.140
WLAN nur für den Stream, da kann ich einfach das Ding resetten und was neues vergeben,

01:42:33.140 --> 01:42:37.740
es ist überhaupt kein Ding, also es ist überhaupt keine Auswirkung, wenn ich das leake, aber

01:42:37.740 --> 01:42:45.340
ich will es trotzdem nicht leaken, äußer nie, nutzt du eigentlich OBS in einer VM, nee,

01:42:45.340 --> 01:42:53.580
Windows Host, was diese ganzen CAC-Wörter bedeuten, das sind Emotes, ok, also wir brauchen

01:42:53.580 --> 01:43:08.340
Void-WiFi-Reconnect, nennen wir das mal, Voipt, so, das Copy-Paste ich mir jetzt aus einem

01:43:08.340 --> 01:43:15.740
anderen Projekt, weil ich habe keine Ahnung aus dem Kopf, was ich da alles gemacht habe,

01:43:15.740 --> 01:43:26.220
ich versuche es euch einfach mal zu erklären, also, also, Wi-Fi-Include vielleicht noch

01:43:26.220 --> 01:43:43.660
vorher, Wi-Fi-Hostname, haben wir sowas auch noch, ok, ok, das schreibe ich aber nicht

01:43:43.660 --> 01:44:01.100
in Secrets rein, haben wir hier, Hostname, Wattchamp, brauchen wir sonst noch was, NTP-Server-Default,

01:44:01.100 --> 01:44:11.700
was haben wir, was habe ich da gemacht, ok, gleich Default, also ok, ich versuche mal

01:44:11.700 --> 01:44:22.060
zu rekapitulieren, was ich mir dabei überlegt habe, was hat er für Schmerzen, oh, TZ-Info

01:44:22.060 --> 01:44:45.260
ist undefined, TZ-Info, wo habe ich das, Moment, Moment, TZ-Info, ok, ich glaube, das sorgt

01:44:45.260 --> 01:44:56.980
sogar dafür, dass die Zeitzone richtig gesetzt wird, wenn ich das richtig gemacht habe,

01:44:56.980 --> 01:45:04.620
das ist glaube ich alles in Ordnung, ich glaube, der zeigt sinnlose Fehler, oh, also, was ich

01:45:04.620 --> 01:45:22.460
verkehrt, also, was das Ding macht ist, was habe ich da, ich bin verwirrt, was ich da

01:45:22.460 --> 01:45:41.260
gemacht habe, also, das kann ich wohl direkt machen, geht das so, uns das was ich da gemacht

01:45:41.260 --> 01:45:47.860
habe, die Statusleistung ist Powerline, ok, das scheint zu funktionieren, ah, Moment,

01:45:47.860 --> 01:45:53.700
Moment, Moment, ah, Max, Max, was machst du da, stimmt überhaupt nicht, was ich da mache,

01:45:53.700 --> 01:46:07.340
das muss zwingend, glaube ich, ein NTP-Server Default sein, Wifi, NTP-Server, ok, ich bin

01:46:07.340 --> 01:46:21.940
echt so ganz sicher, warum ich das so gemacht habe, aber alles klar, also, was ich mir dabei

01:46:21.940 --> 01:46:26.940
gedacht habe, soweit ich das, soweit ich das erkenne, ist folgendes, also, der schreibt

01:46:26.940 --> 01:46:33.620
erstmal, er reconnectet sich, disconnectet alles, falls noch was da ist, automatisches

01:46:33.620 --> 01:46:47.220
Connecten schaltet er aus, er setzt den Hostnamen, er startet das WLAN, dann wartet er, dass

01:46:47.220 --> 01:46:55.220
das WLAN abkommt, 10 Sekunden lang, dann setzt er, dann setzt er den NTP-Server, warum kein

01:46:55.220 --> 01:47:01.100
Auto-Reconnect, ich bin mir ehrlich gesagt nicht so ganz sicher, warum kein Auto-Reconnect,

01:47:01.100 --> 01:47:07.820
kann ich jetzt nicht so genau sagen, dann setzt er den NTP-Server auf die Gateway-IP, weil

01:47:07.820 --> 01:47:10.860
ich jetzt einfach mal davon ausgehe, wenn das auf die Fall steht, ist das was ich haben

01:47:10.860 --> 01:47:18.380
will, so, jetzt schauen wir mal, ob das funktioniert, wir schauen jetzt mal, ob der sich connecten

01:47:18.380 --> 01:47:28.060
kann, WLAN-mäßig, so, also, start, setup, haben wir hier einen Delay, Delay 500, dass

01:47:28.060 --> 01:47:36.460
die Zeit hat mich zu attachen, so, und jetzt sagen wir, Wi-Fi reconnect, ob das jetzt funktioniert,

01:47:36.460 --> 01:47:48.660
ich hab da so meine Zweifel, Upload, hol dir doch die Gateway-IP vom DHCP, das ist, das

01:47:48.660 --> 01:47:57.900
ist die Gateway-IP vom DHCP, das ist die Gateway-IP, die ich per DHCP gekriegt habe, so, und

01:47:57.900 --> 01:48:06.060
funktioniert das jetzt, reconnect, reconnect, cac-wait, cac-wait, ah, ich hab meinen Access-Point

01:48:06.060 --> 01:48:09.220
ja noch gar nicht angeschlossen, kann ja gar nicht funktionieren, sehen wir auch gleich,

01:48:09.220 --> 01:48:18.820
was im Fehlerfall passiert, Wi-Fi connect failed, rebooting, ok, wo ist der Access-Point,

01:48:18.820 --> 01:48:41.540
da, warte mal, klick, der sollte jetzt eigentlich hochfahren, kurz in meinen, kurz in meinen

01:48:41.540 --> 01:48:58.140
Router gucken, ob, ob das Ding sich irgendwo meldet, das braucht ein bisschen zum starten,

01:48:58.140 --> 01:49:06.300
das ist so ein Access-Point hier, Mikrotik-Light, so, den kleinsten, nee, nee, nee, nee, nicht

01:49:06.300 --> 01:49:14.660
UHP, MP-Light, Map-Light, das Ding, das ist ein mini, also mini, furz mini Access-Point,

01:49:14.660 --> 01:49:19.180
der ist, der ist ein paar Zentimeter groß nur, kostet auch nur 20 Euro, aber für so kleine

01:49:19.180 --> 01:49:31.020
Test-Sachen ist das optimal, so, 2137 hat das Ding als IP, der Access-Point, alles klar,

01:49:31.020 --> 01:49:49.460
aber der Connect funktioniert nicht, warum nicht, ja Router OS ist echt Wissenschaft

01:49:49.460 --> 01:49:57.220
für sich, Wi-Fi Connect failed, ich mach mal kurz den Timeout noch ein bisschen höher,

01:49:57.220 --> 01:50:17.620
ich hol mal schnell mal ein Tablet und guck mal, ob der Access-Point auch da ist, ja,

01:50:17.620 --> 01:50:34.220
ich check immer, ob der Access-Point auch erreichbar ist, mit dem Handy kann ichs ja

01:50:34.220 --> 01:50:50.140
nicht so schlecht machen grad, ah, im Moment ist es heißt anders, Cacquade, die SSID ist

01:50:50.140 --> 01:51:12.860
falsch, die SSID ist falsch, so, und jetzt hoffen wir, dass WLAN funktioniert, come

01:51:12.860 --> 01:51:30.460
on please, give energy chat, reconnect, ich glaub, das ist gut, wenn da eins steht, ich

01:51:30.460 --> 01:51:35.020
bin mir nicht ganz sicher, ob das gut ist, aber ich glaub, das hat funktioniert, da

01:51:35.020 --> 01:51:43.260
steht eins, da steht eins, eins ist auch mal ne gute Ausgabe, ok, ich glaub, es hat funktioniert,

01:51:43.260 --> 01:52:01.420
wir gehen und wir lassen uns mal die IP ausgeben, wo geb ich denn hier eins aus, äh, Print,

01:52:01.420 --> 01:52:17.180
ach hier, ok, Wi-Fi reconnect und da kommt jetzt hier Serial, Print und zwar Wi-Fi, IP,

01:52:17.180 --> 01:52:36.780
Local IP to String, Upload, ah, yes, ihr seht, wie viel länger das Sketch zum Hochladen braucht,

01:52:36.780 --> 01:52:41.180
nur weil ich WLAN drin hab, by the way, ist euch das mal aufgefallen, das Ding ist einfach

01:52:41.180 --> 01:52:50.380
50% größer geworden wegen WLAN, ok, 2.138 bekommen wir, excellent, IP ist am Start,

01:52:50.380 --> 01:52:58.140
warst du das mit dem Arduino, ja so halb, das ist ein ESP32, aber die haben ein bisschen

01:52:58.140 --> 01:53:03.900
Arduino Zeug drum rum gestrickt, ja, wobei ich tatsächlich auch relativ viel eingebautes

01:53:03.900 --> 01:53:12.060
ESP Zeug verwende, oftmals, warum kein 2866, weil ich das mit dem ESP viel angenehmer finde,

01:53:12.060 --> 01:53:16.300
zum Beispiel, weil man ne Sache machen kann, die ich jetzt mache, da muss ich mir ein paar

01:53:16.300 --> 01:53:27.180
Helper Sachen mal copypasten aus meiner, äh, anderen Project, Helper Punkt, Hedder, ich

01:53:27.180 --> 01:53:37.100
geb dir Hedder, wir müssen uns zwei Sachen rüber kopieren, einmal das da, und einmal

01:53:37.100 --> 01:53:52.940
das da, Moment, ne, was muss man da alles noch machen, ich kopier einfach die ganze

01:53:52.940 --> 01:54:00.300
Datei, hab ich da irgendwas drin, was man nicht zeigen darf, NTP, Arduino Strings, Split,

01:54:00.300 --> 01:54:13.980
ne, ok, Helper, Helper Class, easy, brauchen wir, zack, weil viel Passwort liegt, ne, da

01:54:13.980 --> 01:54:29.420
ist nix liegt, genau, ok, so, und jetzt können wir sagen, include Helper, so, und jetzt können

01:54:29.420 --> 01:54:32.780
wir nämlich so Sachen machen, wie, ich hab mir da so einen kleinen Wrapper gebastelt

01:54:32.780 --> 01:54:45.660
für die, für den eingebauten zweiten Core, also sprich, der ESP32, der hat ja zwei CPU-Kerne,

01:54:45.660 --> 01:54:53.660
und man kann das mit den eingebauten Sachen machen, man kann das mit der C++ Standard

01:54:53.660 --> 01:54:59.700
Task, was auch immer Library machen, das Problem ist, dass die, standardmäßig die

01:54:59.700 --> 01:55:04.500
Speichergröße für die Task so klein ist, in C++, witzigerweise stellen die das glaube

01:55:04.500 --> 01:55:10.220
ich auf nur 512 Bytes, und sobald du ein bisschen was größeres in so einem Thread machst,

01:55:10.220 --> 01:55:15.140
kackts ab, deswegen hab ich mir so einen eigenen Mini-Wrapper drumherum gebastelt, das ist

01:55:15.140 --> 01:55:19.820
alles, wer macht das nicht, ja, ich weiß gar nicht, was ich da gebastelt hab, den nageln

01:55:19.820 --> 01:55:23.660
mich jetzt nicht, denkt nicht, das ist irgendwie geil, was ich da gebastelt hab, ich weiß

01:55:23.660 --> 01:55:29.260
gar nicht mehr, was ich da genau gemacht hab, also, ich erstelle einen Task auf dem ersten,

01:55:29.260 --> 01:55:35.420
auf dem zweiten Core, Default auf dem zweiten Core, einen Task, und ich führe die Funktion

01:55:35.420 --> 01:55:40.980
aus, die ich übergebe, das ist ein bisschen, wie man in C-Sharp einen Standard-Task, keinen

01:55:40.980 --> 01:55:46.860
Standard-Task, einen Task laufen lässt, ja, das ist ein Namespace, das ist ein Namespace,

01:55:46.860 --> 01:55:54.420
helper ist ein Namespace, so, run, und jetzt kommt das Coole, was man machen kann, ähm,

01:55:54.420 --> 01:56:01.580
warum kein ESP-266, weil, was man jetzt machen kann ist, man macht einen zweiten Thread auf,

01:56:01.580 --> 01:56:05.980
äh, zum Beispiel, halt so, wie man es hier sieht, das kann man auch, wie gesagt, man

01:56:05.980 --> 01:56:11.060
kann auch sagen, Standard-Thread, nee, Standard, ich hab gar keine Ahnung, was die Standard,

01:56:11.060 --> 01:56:14.740
doch Standard-Thread ist, glaube ich, bei C++, könnte man auch machen, aber ich hab so

01:56:14.740 --> 01:56:18.460
einen eigenen Mini-Wrapper gebastelt, einfach, weil mir viele Sachen schon oft, da sind

01:56:18.460 --> 01:56:22.620
auch ein paar andere Sachen drinne, also Sachen, die mir auf den Keks gegangen sind, so, und

01:56:22.620 --> 01:56:27.020
jetzt kann ich nämlich im Hintergrund immer checken lassen, dass W-Lan und so funktioniert,

01:56:27.020 --> 01:56:33.260
also, machen wir jetzt mal diese, diese, huge, beautiful Lambda-Syn-Task wieder rein, so,

01:56:33.260 --> 01:56:43.060
Endlosschleife, while true, Delay, einfach schlafen, 1000 Millisekunden, so, und da drinne

01:56:43.060 --> 01:56:53.220
kann ich jetzt zum Beispiel sagen, if Wi-Fi connected, oder is, is not connected, dann

01:56:53.220 --> 01:56:58.300
Wi-Fi reconnect, das heißt, ich kann permanent checken lassen, ob mein W-Lan in einem zweiten

01:56:58.300 --> 01:57:03.980
Thread, das heißt, ich muss das nicht in meiner Main-Loop hier drinne rumsauen, wie liest

01:57:03.980 --> 01:57:13.500
du denn die Zähler überhaupt aus, äh, wie gesagt, unter anderem mit, äh, LED, die an

01:57:13.500 --> 01:57:18.140
dem Zähler dran ist, und da kommt der Sensor dran, du siehst, wenn Licht, wenn Licht an

01:57:18.140 --> 01:57:22.780
und aus geht, zählt der hoch, ja, der hat ein bisschen Probleme mit dem Fenster, wie

01:57:22.780 --> 01:57:29.580
ihr hier grad seht, das geht jetzt, das geht jetzt grad ganz schnell an und aus, das Ding,

01:57:29.580 --> 01:57:34.220
weil Licht im Fenster reinkommt, jetzt hab ich die Hand drüber, dafür braucht man ein

01:57:34.220 --> 01:57:42.140
Deep Bouncing, das zählt jetzt nur alle 100 Millisekunden hoch, so, und, äh, das lese

01:57:42.140 --> 01:57:47.020
ich damit aus, den einen Sensor, den anderen Sensor lese ich aus mit einem anderen Infrarots,

01:57:47.020 --> 01:57:52.620
äh, LED-Sensor, der erkennt, wenn die Scheibe beim Zähler durchgelaufen ist, das funktioniert,

01:57:52.620 --> 01:58:05.060
so, und ich lass jetzt die ganze Zeit im Hintergrund checken, ob, äh, weil ich hatte schon öfters

01:58:05.060 --> 01:58:10.900
mal Probleme, dass, äh, wenn ich das, äh, den Controller, keine Ahnung, nen Tag hab

01:58:10.900 --> 01:58:14.380
laufen lassen, dann hat es Verbindungen zum W-Lan verloren und hat nie wieder ne Verbindung

01:58:14.380 --> 01:58:19.460
zum W-Lan aufgebaut, deswegen, das war übrigens der Grund für, warum ich Auto Connect und

01:58:19.460 --> 01:58:24.220
Auto Reconnect auf False gesetzt hab, das war der Grund, das hat rumgebackt bei mir,

01:58:24.220 --> 01:58:33.020
ähm, das hat rumgebackt, ich hab am Anfang auch immer gesagt, Auto Connect, Auto Reconnect

01:58:33.020 --> 01:58:37.740
und der hat manchmal nach einem Tag das W-Lan verloren und das hat nie wieder, hat nie wieder

01:58:37.740 --> 01:58:41.820
das W-Lan gestartet, deswegen hab ich mir sowas gedacht, ich lass einfach im Hintergrund

01:58:41.820 --> 01:58:46.500
permanent checken, ob, äh, ob das Connected ist, wenn es nicht Connected ist, Connecten

01:58:46.500 --> 01:58:54.100
ist, wenn es sich nicht Connecten lässt, dann startet er neu, wie setzt du den Absolutwetter

01:58:54.100 --> 01:59:07.780
am Anfang, äh, welchen, was, wo, Bit Connect, so, das ist schon mal gut, so und ich geh

01:59:07.780 --> 01:59:11.700
noch mal auf Nummer sicher, dass auch alles mit der Verbindung funktioniert, jetzt, das

01:59:11.700 --> 01:59:19.060
könnte man, könnte man sagen, ich bin super pingelig, aber, ich hab keinen Bock, dass

01:59:19.060 --> 01:59:24.100
die W-Lan Verbindung hängt, wir pingen jetzt auch regelmäßig unseren Gateway und gucken,

01:59:24.100 --> 01:59:34.580
ob das funktioniert, na, dass die Zahl in der Software gleich, der am Zähler ist, ach

01:59:34.580 --> 01:59:39.500
so, äh, die kann ich übers Webinterface später setzen, so hab ich mir das zumindest vorgestellt,

01:59:39.500 --> 01:59:43.500
das Webinterface setzen, oder ich schreib die Initial Hardcoded rein und upload in den

01:59:43.500 --> 01:59:49.860
Sketch, wo das Hardcoded drin steht am Anfang, muss ich mal gucken, wahrscheinlich lass ich,

01:59:49.860 --> 02:00:06.820
wahrscheinlich mag ich übers Webinterface, kriegt so ne, so, rudimentäres Webinterface,

02:00:06.820 --> 02:00:15.460
pingen den Gateway auch noch, das Copy-Paste ich mir, by the way, jetzt auch mal aus dem

02:00:15.460 --> 02:00:32.420
anderen, ah, gut, das heißt, ercheckt ist das, oh, ah, das hab ich mitkopiert und das

02:00:32.420 --> 02:00:40.020
gibt's hier nicht, ok, alles klar, ich hab nix gesagt, das brauchen wir jetzt nicht,

02:00:40.020 --> 02:00:51.020
äh, ich schreib das aufs Filesystem, FMT, oh, ich hab hier Sachen für Format drin,

02:00:51.020 --> 02:00:59.020
ah, exzellent, ok, dann muss ich die Format-Library noch reinmachen, hab ich das einzige, wo ich

02:00:59.020 --> 02:01:02.820
das drin hab, ok, das mach ich, das mach ich später, das will ich jetzt noch nicht machen,

02:01:02.820 --> 02:01:09.700
das ist zu viel auf einmal, ok, exzellent, FMT beste, ja, dafür opfer ich gerne auch

02:01:09.700 --> 02:01:16.020
ein paar Flash, bisschen Flash-Speicher, bevor ich mich hier mit Printline und anderen Konsorten

02:01:16.020 --> 02:01:20.660
rumschlage, da mach ich das lieb, habt ihr übrigens gesehen, wie fett das geworden ist,

02:01:20.660 --> 02:01:28.460
es war bei 20, 25 oder 20, 25% und jetzt nur durch den WLAN-Treiber ist aber 65% Sketch-Size,

02:01:28.460 --> 02:01:37.540
der Sensor bekommt das mit der Zehlscheibe mit, ja, guckt mal, der Sensor bekommt das

02:01:37.540 --> 02:01:42.180
mit der Zehlscheibe mit, der hier nicht, der ist für die LED, die blinkt, aber der Sensor

02:01:42.180 --> 02:01:51.660
bekommt das von der Zehlscheibe mit, du siehst, der Sensor, der hat zwei LEDs, eine Infrarot-LED

02:01:51.660 --> 02:01:58.140
und Infrarot-Empfänger und wenn der unterbrochen wird bzw. die Intensität sich ändert, dann

02:01:58.140 --> 02:02:03.900
erkennt der das und gibt den Signal weiter und wenn man das auf die Scheibe richtet und

02:02:03.900 --> 02:02:10.820
auch dann der schwarze oder rote Strich durchläuft, dann erkennt es der Sensor, dass die Intensität

02:02:10.820 --> 02:02:18.740
nachlässt und er weiß, aha, Signal, das funktioniert, das habe ich bei mir schon im Keller hängen,

02:02:18.740 --> 02:02:24.980
das geht, also das ist, wie viel kostet so ein Ding, nur 5 Cent oder so, bei Aliexpress,

02:02:24.980 --> 02:02:29.700
weiß nicht, wenn du bei Amazon guckst, IR-Line-Sensor, ich bin mir jetzt gar nicht sicher, nach was

02:02:29.700 --> 02:02:51.420
ich suchen muss, nope, so nicht, ja, wir nähern uns der Sache, ok, ich habe ehrlich gesagt

02:02:51.420 --> 02:03:08.180
keine Ahnung, was ich suchen muss, Barrier, Barrier, Barrier-Sensor, meine Upgrade-Library,

02:03:08.180 --> 02:03:19.020
ne, das mit HTTPS, das ist mir zu buggy, sowas hier, genau, die da braucht man, TCRT5000,

02:03:19.020 --> 02:03:25.820
ich mache zum HTTPS das Update und ich verwende auch was Fertiges, die da brauchst, ok, 5

02:03:25.820 --> 02:03:33.940
Stück, viel zu, wenn du bei Aliexpress guckst, wie gesagt, das Kram ist mega billig, guck

02:03:33.940 --> 02:03:58.060
mal, 26 Cent, oder aber du kaufst dir einen Pack, 10er Pack, 1144, bei den da wollen wir,

02:03:58.060 --> 02:04:06.220
ah, guck mal, da ist die Anordnung anders, mal horizontal, mal vertikal, ah, guck mal,

02:04:06.220 --> 02:04:15.140
hier, das ist Geld mit dem, was man bezahlt, ah, das ist dann doch nicht so günstig, wenn

02:04:15.140 --> 02:04:24.180
das, ah gut, das ist bei Aliexpress, kostet es jetzt tatsächlich was, ach, Moment, ich

02:04:24.180 --> 02:04:29.860
hab jetzt, ich hab jetzt 100 bestellt, oder, hab ich jetzt 100 bestellt gerade, weil das

02:04:29.860 --> 02:04:47.140
sind 10 Pieces, ach, ich hab 100 bestellt, great, ok, 100 für 30, für 40 Euro, ok,

02:04:47.140 --> 02:04:58.180
also einer, 10 Stück, also 10 Stück, 10 Stück für 5, 6 Euro, 650, ja, also ist nicht teuer,

02:04:58.180 --> 02:05:06.460
die ganzen Sensorkram sind nicht teuer, ok, also jetzt sollte sich WLAN technisch zumindest

02:05:06.460 --> 02:05:13.860
verbinden, hab ich eigentlich schon das WLAN Passwort irgendwie geleakt, ich hoffe nicht,

02:05:13.860 --> 02:05:25.700
er zeigt es aber auch glücklicherweise nicht an, ok, nice, nice, guck mal, reconnect, wunderbar,

02:05:25.700 --> 02:05:29.700
ok, dann machen wir das jetzt mit dem Display noch ein bisschen schöner und dann machen

02:05:29.700 --> 02:05:34.100
wir noch OTA, dass wir das updaten können über den Browser, also wir werden das so

02:05:34.100 --> 02:05:40.540
machen, wenn, ok, jetzt muss ich mal kurz in mich gehen, also, wir sagen starten, ich

02:05:40.540 --> 02:05:48.500
brauch auf jeden Fall das File System, wir formatieren ein, nee, ich brauch auf jeden

02:05:48.500 --> 02:05:56.140
Fall das File System, um Sachen drauf zu speichern, was hat er denn für Probleme, warum mag der,

02:05:56.140 --> 02:06:03.380
das, also ich muss nämlich den Zählerstand drauf speichern, wenn ich neu starte, den

02:06:03.380 --> 02:06:08.700
aktuellen Zählerstand, deswegen, ich brauch auf jeden Fall Flash Speicher Zugriff, weiß

02:06:08.700 --> 02:06:13.700
nicht was, ich weiß nicht warum der mounted failed hat, ich glaub ich muss einfach einmal

02:06:13.700 --> 02:06:20.860
Flash, einfach einmal reflashen, dass das funktioniert, machen wir mal über Kommandozeile,

02:06:20.860 --> 02:06:43.660
Documents, Project, der Watt, der Wattchamp, ich glaub, oh was war das, Upload, keine Ahnung,

02:06:43.660 --> 02:06:51.940
Erase, Flash, wie ging das nochmal, ich benutze, genau, ich benutze Anjaro mit die 3 WM, Erase,

02:06:51.940 --> 02:06:58.820
ich muss den Speicher mal löschen, dass ich den Flash Speicher richtig ansprechen kann,

02:06:58.820 --> 02:07:14.620
was, ach deswegen, hä, warum hab ich das nicht in meinem Pass drin, muss ich das jetzt

02:07:14.620 --> 02:07:26.020
verstehen, ok, Flash löschen, T, was, run, T, Erase, exquisite, auf, mach platt das Ding,

02:07:26.020 --> 02:07:33.340
Wattchamp, irgendwie mag er nicht, wir können auch noch, ich kann euch noch was cooles zeigen,

02:07:33.340 --> 02:07:37.700
wir können die Partitionstabelle, also, Partitionstabelle hört sich jetzt ein bisschen hochtrabend

02:07:37.700 --> 02:07:44.300
an, ja, aber man kann, also standardmäßig hat das 4MB Flash und man kann, weil ich

02:07:44.300 --> 02:07:50.540
es hier gerade sehe, man kann die unterschiedlich einteilen, was, der soll erstmal, der soll

02:07:50.540 --> 02:07:55.580
erstmal Flash, Flash löschen, und man kann das unterschiedlich einteilen, Standard-Einteilung

02:07:55.580 --> 02:08:02.500
ist glaube ich von diesen 4MB, ist glaube ich 1MB für die Firmware, 1MB für Update

02:08:02.500 --> 02:08:09.540
Firmware und 2MB für Dateien, wenn man jetzt allerdings mehr Platz, oh, ich muss den Monitor

02:08:09.540 --> 02:08:13.860
ausmachen, deswegen geht das nicht, wenn man mehr Platz braucht, kann man das ändern,

02:08:13.860 --> 02:08:17.860
ich kann euch auch mal zeigen, wie, das ist tatsächlich ganz nice, weil bei dem Projekt

02:08:17.860 --> 02:08:23.940
brauche ich eher weniger Speicher für zusätzliche Dateien, nur ein paar Bytes, aber es könnte

02:08:23.940 --> 02:08:29.900
sein, dass die Firmware relativ groß wird, jetzt hat das resettet, ok, und das kann man

02:08:29.900 --> 02:08:36.180
folgendermaßen machen, also jetzt, ich kann euch ja zeigen, dass es funktioniert, also

02:08:36.180 --> 02:08:41.260
wenn ich ihn jetzt frage, wie groß ist die Firmware, dann sagt er, ok, 65% vom Flash-Speicher

02:08:41.260 --> 02:08:50.580
sind belegt, also 65% von diesen 1,3MB, also der macht 1,3MB für die, also, der teilt

02:08:50.580 --> 02:09:04.980
sein Flash, Flash Partition, da gibt es bestimmt ein schönes Bild für, genau, also, der macht

02:09:04.980 --> 02:09:12.740
standardmäßig, teilt er sein Flash ein, das sind 4MB Speicher, so, und, der macht 1MB

02:09:12.740 --> 02:09:19.460
oder 1,3, in dem Fall MB für die Firmware, die wir jetzt drauf haben, nochmal 1,3MB für

02:09:19.460 --> 02:09:24.660
die Firmware, dass man nämlich Updates machen kann im laufenden Betrieb, und dann auch Filesystem,

02:09:24.660 --> 02:09:31.100
so, und das kann man ändern, das kann man ändern, und zwar, das machen wir jetzt mal,

02:09:31.100 --> 02:09:47.260
wollte ich nämlich eh schon machen, und zwar gibt es dann irgendwo, kann man eintragen,

02:09:47.260 --> 02:09:52.740
Outbuild Partitions, genau, hier, so, und jetzt merkt ihr euch, wir haben 65% belegt

02:09:52.740 --> 02:10:00.700
bei unserer Firmware von 1,3MB, so, und jetzt trage ich das hier mal ein und lasse den neu

02:10:00.700 --> 02:10:05.300
bilden, mit neuer Partitions-Tabelle, jetzt werdet ihr gleich sehen, jetzt haben wir eine

02:10:05.300 --> 02:10:11.900
ganze Ecke mehr Platz, ich lese gleich, ich scroll gleich, chat noch mal alles durch,

02:10:11.900 --> 02:10:15.620
falls ihr irgendwas über seht, schreibt netwoblos dabei, guck, und jetzt haben wir nur noch

02:10:15.620 --> 02:10:21.740
mit der Firmware 43% von 2MB belegt, also sprich, der hat einfach den Flash-Speicher,

02:10:21.740 --> 02:10:25.140
die hintere Partition, ein bisschen verkleinert, sodass ich mehr Platz für meine Firmware

02:10:25.140 --> 02:10:29.340
hab, eigentlich ne ganz nette Geschichte, dass man das, so 5, 6 verschiedene Presets

02:10:29.340 --> 02:10:33.220
gibts da, wenn es überhaupt nicht ausreicht, kann man auch ne eigene Partitions-Tabelle

02:10:33.220 --> 02:10:40.140
machen, in CSV, weiß nicht warum die sich gedacht haben, Partitions-Tabellen sind gut

02:10:40.140 --> 02:10:50.900
in CSV zu machen, man weiß es nicht genau, ok, also wir haben Wlan, ups, also wir haben

02:10:50.900 --> 02:10:56.300
Wlan-Verbindung, achso, der kackt übrigens ab, weil ich gerade meine Firmware gelöscht

02:10:56.300 --> 02:11:05.580
hab, muss ich die Firmware nochmal neu hochladen, so, ok Leute, also, wo sind wir stehen geblieben,

02:11:05.580 --> 02:11:12.260
also wir haben jetzt Verbindung, wir haben jetzt Verbindung zum Wlan, Mounting-Spiffs,

02:11:12.260 --> 02:11:13.260
warum?

02:11:13.260 --> 02:11:24.340
Warum, warum failt der?

02:11:24.340 --> 02:11:37.700
Format True, Flash kaputtgeschrieben, Quatsch, weil das Ding, er hat jetzt kein Real Level

02:11:37.700 --> 02:11:42.500
wie ne SSD, aber von zweimal schreiben ist er bestimmt nicht kaputt, ich muss einfach

02:11:42.500 --> 02:11:49.220
nochmal löschen, im Zweifelsfall hilft das, ohne Mist, es hilft wirklich, mehrfach löschen,

02:11:49.220 --> 02:12:07.980
Spiffs Mounted Fail, ok, google, Spiffs Mounted Fail, ok, was hat der für Schmerzen, ein

02:12:07.980 --> 02:12:25.300
der Flash ist nicht, warum ist der Chat so scharf drauf, dass man Flash RIP ist, Erase,

02:12:25.300 --> 02:12:39.380
ich lösche es jetzt nochmal, dann gehts, passt auf, what the fuck, ey, mit den alten

02:12:39.380 --> 02:12:45.420
sehr billigen 286 Dash kann das sein, aber nein, nein, der ist, oh Mist, der ist garantiert

02:12:45.420 --> 02:12:50.980
nicht kaputt, der Flash, ganz bestimmt nicht, das ist, das buggt manchmal ein bisschen,

02:12:50.980 --> 02:12:56.900
das hab ich schon öfters gehabt, ja das mit der Partitionstabelle kann tatsächlich sein,

02:12:56.900 --> 02:13:06.540
aber ich hab ja gelöscht, also das sollte, eigentlich sollte er das checken, das wars

02:13:06.540 --> 02:13:11.300
mit dem Flash für immer, ja irgendwie werden wir den Flash schon zum Leben wieder erwecken,

02:13:11.300 --> 02:13:30.460
warum, Mounting Spiffs Failed, kann das sein, weil ich das hier, warte mal, ich hab doch

02:13:30.460 --> 02:13:43.340
hier in diesem Helper nochmal drin stehen, Prick übrigens, der Name ist Programm, was,

02:13:43.340 --> 02:13:47.300
wo ist das Problem, ok, True, schreibe True rein, er formatiert das halt meinetwegen,

02:13:47.300 --> 02:14:00.820
warte mal, äh, wat, ah, Upload, nein, nein, der Flash ist nicht RIP Leute, im Zweifel

02:14:00.820 --> 02:14:11.700
verlöten wir neu Flash genau, der Flash ist garantiert nicht kaputt, redet das nicht

02:14:11.700 --> 02:14:20.980
herbei Chat, dass der Flash kaputt ist, ok, hat das jetzt funktioniert, hat das jetzt

02:14:20.980 --> 02:14:25.580
funktioniert oder war ich einfach, oder war ich einfach nur nicht schnell genug, probieren

02:14:25.580 --> 02:14:32.860
wir mal, probieren wir mal aus, äh, Spiffs Exists, gucken wir mal, wir tun einfach mal

02:14:32.860 --> 02:14:44.620
so, ob irgendeine Datei existiert, lalala.txt, so, und wenn das mit nem Fehler klappt, dann

02:14:44.620 --> 02:14:50.420
weiß ich, dass das funktioniert, ich hab kein Board mehr, wenn jetzt der Flash kaputt ist,

02:14:50.420 --> 02:14:57.500
hab ich ein Problem, der ist nicht kaputt, der Flash kann nicht kaputt sein, siehste,

02:14:57.500 --> 02:15:04.820
Flash geht, einfach nur ein paar mal, einfach ein paar mal cleart und jetzt funktioniert's,

02:15:04.820 --> 02:15:14.460
exellent, sehr schön, so, das war jetzt hier weg, und jetzt klappt's auch, also, sehr

02:15:14.460 --> 02:15:23.460
schön, gut, Flash ist nicht kaputt, so, jetzt können wir mal anfangen, also, äh, wir initialisieren

02:15:23.460 --> 02:15:28.260
das Serial, wir initialisieren den Flash, wir sagen, äh, Display Init, by the way, das

02:15:28.260 --> 02:15:32.700
können wir, müssen wir übrigens gar kein Delay hinmachen, Init Set Contrast, kann man

02:15:32.700 --> 02:15:39.740
auch Screen Set, was haben wir noch, Set Brightness, 255, wird das dann heller, wenn ich das noch

02:15:39.740 --> 02:15:46.260
hoch mach, oder ist es Default, Set Contrast Set Brightness, gucken wir mal, was passiert,

02:15:46.260 --> 02:15:58.780
wenn ich hier den, ist das dann irgendwie, ob das dann irgendwie heller wird, oder so,

02:15:58.780 --> 02:16:12.140
Flashbang Screen, ja, Leute, geht in Deckung, und, und, und, Postchamp, Postchamp, Postchamp,

02:16:12.140 --> 02:16:17.660
Nö, sieht exakt genauso aus, dann glaube ich, kann man sich den Kram auch komplett sparen,

02:16:17.660 --> 02:16:24.940
ähm, okay, also, Clear Screen kann man sich auch sparen, weil, warum will ich was clearen,

02:16:24.940 --> 02:16:33.100
was grad frisch, äh, dran kommt, so, äh, Screen, dann setzen wir Set Font, äh, ne,

02:16:33.100 --> 02:16:38.940
wie ging das, äh, Set Font, Font, äh, dann nehmen wir nämlich als Speicher, als, als

02:16:38.940 --> 02:16:44.740
Font, den kleinen, so, und jetzt schreiben wir ein bisschen Debug beim Starten, also,

02:16:44.740 --> 02:16:52.180
fangen wir mal an, ähm, Screen, Draw, String, und da schreiben wir jetzt erstmal einfach

02:16:52.180 --> 02:16:55.540
nur, dass ich weiß, dass es funktioniert, Punkt, Punkt, Punkt rein, und zwar ganz an

02:16:55.540 --> 02:17:05.500
Anfang, okay, Screen, Display, sehr schön, so, dann mach ich Wi-Fi Connect, nachdem ich

02:17:05.500 --> 02:17:13.380
Wi-Fi Connect mache, ähm, geben wir die IP aus, Moment, mach ich das nicht hier schon

02:17:13.380 --> 02:17:18.460
irgendwo, ach, mach ich hier schon, lull, da geben wir die IP aus, dass ich weiß, dass

02:17:18.460 --> 02:17:25.700
ich connected bin, äh, Local IP, und, ähm, was machen wir ansonsten noch, wir können

02:17:25.700 --> 02:17:32.340
auch IP Adresse da vorschreiben, oh, die Mario Musik, Alter, jetzt wollen sie wieder wissen,

02:17:32.340 --> 02:17:41.500
Gachi Bass Music, du, du, du, du, IP, können sogar sagen Print, dann steht es auf einer

02:17:41.500 --> 02:17:51.580
Zeile, okay, ähm, so, dann starten wir den, das WLAN-Task-Gedöns, hier könnten wir nochmal

02:17:51.580 --> 02:17:55.820
Delay machen, dass auf jeden Fall Display und so initialisiert ist, so, dann connecten

02:17:55.820 --> 02:18:00.940
wir uns zum WLAN, da geben wir die IP aus, dann schreiben wir die IP aufs Display, würde

02:18:00.940 --> 02:18:08.260
ich sagen, Display, ach, nicht Display, Screen, ich hab's ja umbenannt, Display, äh, Brindeln,

02:18:08.260 --> 02:18:17.220
und zwar die IP, und zwar jetzt auf links oben, 20 Pixel nach unten, Tool String, jetzt

02:18:17.220 --> 02:18:29.500
pass auf, jetzt wird's eklig, das mag er nicht, weil, äh, ach, Moment, es ist ja auch Draw

02:18:29.500 --> 02:18:42.660
String, lull, verschrieben, okay, da schreiben wir jetzt die IP drauf, Screen, Display, so,

02:18:42.660 --> 02:18:46.180
da weiß ich so auf jeden Fall schon mal jetzt, was los ist, wenn das Ding neu startet, uploaden

02:18:46.180 --> 02:18:52.460
wir mal, so, der sollte jetzt booten, sich verbinden und danach die IP anzeigen auf dem

02:18:52.460 --> 02:19:03.700
Display, zumindest kurz, muss mal aufs Klo pinkeln, ja, okay, schauen wir mal, ob das funktioniert,

02:19:03.700 --> 02:19:16.500
Reboot please, Punkt, Punkt, Punkt, Connect please, Connect, Connect, Connect, oh, das

02:19:16.500 --> 02:19:28.300
ging jetzt zu schnell, habt ihr die IP gesehen, ich hab nicht hingeguckt, er hat sich connected,

02:19:28.300 --> 02:19:35.060
er hat, er hat sich quasi, komm, sind wir mal so nett und machen Delay von 100, dass

02:19:35.060 --> 02:19:39.860
wir nicht so eine Chance haben, das zu sehen, du hast gesehen, ernsthaft, okay, nice, ich

02:19:39.860 --> 02:19:46.020
hab's nicht gesehen, ich hab nicht, ich hab nicht genau hingeguckt, so, jetzt müssen

02:19:46.020 --> 02:19:50.900
wir noch dafür sorgen, dass wir neue Firmware hochladen können und ich hab mir sowas mal

02:19:50.900 --> 02:19:57.980
selbst gebaut über HTTPS, das verwenden wir jetzt nicht, ah, da war's, habt ihr's gesehen,

02:19:57.980 --> 02:20:04.460
ganz kurz war die IP am Start, excellent, also falls das hängen bleibt, dann, dann passt

02:20:04.460 --> 02:20:12.580
das, so, das brauchen wir, so, und jetzt müssen wir noch für eine Sache vorsorgen und zwar

02:20:12.580 --> 02:20:17.860
sollte ich das Ding mit Firmware Updates kaputt machen, da muss ich sicherstellen, dass ich

02:20:17.860 --> 02:20:22.620
die Chance hab, eine neue Firmware zu flashen, sollte ich eine kaputte Firmware geflasht

02:20:22.620 --> 02:20:27.020
haben, ich hoffe, man versteht, was ich meine, also stellt euch vor, ich uploade eine neue

02:20:27.020 --> 02:20:34.300
Firmware, das Ding hängt im Keller und ich kann keine zweite Firmware uploaden, das wird

02:20:34.300 --> 02:20:42.100
ziemlich, ziemlich sackt, ja, was war die Frage, wie steuerst du den an und überträgst den

02:20:42.100 --> 02:20:43.100
an?

02:20:43.100 --> 02:20:46.900
Also, das ist ein bisschen advancedere Geschichte für den Stream, hier neben dem Raspberry

02:20:46.900 --> 02:20:53.300
Pi, da ist der USB angeschlossen, der Controller, und ich hab auf dem Raspberry Pi mein USB,

02:20:53.300 --> 02:21:03.100
äh, Device, was der erkannt hat, mein USB-Port, geshared übers Netzwerk mit meinem Desktop-Rechner,

02:21:03.100 --> 02:21:08.540
einfach nur, damit ich das hier stehen lassen kann, die Kamera am Start ist, ich euch was

02:21:08.540 --> 02:21:14.500
zeigen kann, und ich halt trotzdem am Desktop entwickeln kann, normalerweise würde man das

02:21:14.500 --> 02:21:23.840
einfach per USB an den Rechner anschließen und uploaden und gut ist, so, und jetzt kommt

02:21:23.840 --> 02:21:31.100
meine Big Brain selbstgebastelte Klasse zum Tragen, ich weiß nicht, ob das, äh, wahnsinnig

02:21:31.100 --> 02:21:33.980
durchdacht ist, und zwar, ich hab mir sowas gebastelt, für den Fall der Felder, ich's

02:21:33.980 --> 02:21:41.980
kaputt machen, nehm ich eine Brick Guard, so, und dann kann ich sagen, Last Boot Successful,

02:21:41.980 --> 02:21:49.580
wenn Last Boot nicht Successful ist, dann machen wir nen Delay von 45 Sekunden, dass

02:21:49.580 --> 02:21:56.140
ich die Chance hab, ne neue Firmware hochzuladen, bevor es wieder crasht, versteht man was

02:21:56.140 --> 02:22:00.620
ich mein, also stellt euch mal vor, das Ding hier steht am Arsch der Welt, ihr ladet ne

02:22:00.620 --> 02:22:08.700
neue Firmware hoch, und die Firmware hat nen Bug, und das Ding crasht immer wieder und

02:22:08.700 --> 02:22:16.300
startet sich neu, USB IP verwende ich, ja, und hier hab ich jetzt einfach 75 Sekunden

02:22:16.300 --> 02:22:23.220
Zeit, wenn es nicht richtig gestartet ist, die neue Firmware hochzuladen, so, und das

02:22:23.220 --> 02:22:29.340
funktioniert folgendermaßen, das ist eigentlich total simpel gelöst, ähm, ich leg ne Datei

02:22:29.340 --> 02:22:36.780
an auf dem Filesystem, die Setup OK heißt, wenn es die Datei gibt, Setup OK, dann bedeutet

02:22:36.780 --> 02:22:41.540
das, der Boot war erfolgreich, und wenn's die nicht gibt, dann bedeutet das, der Boot

02:22:41.540 --> 02:22:45.380
hat nicht funktioniert, das heißt, der letzte Boot, der letzte Boot hat nicht funktioniert,

02:22:45.380 --> 02:22:50.380
das heißt, wenn ich einmal meine komplette Logik durchlaufen habe, und ich weiß, dass

02:22:50.380 --> 02:22:56.700
meine neue Firmware funktioniert, muss ich quasi einmal sagen, äh, quasi hier so nach

02:22:56.700 --> 02:23:06.140
dem Motto, Set Boot Successful, ob das so die Weisheit, der Weisheitsletzter Schluss

02:23:06.140 --> 02:23:16.860
ist, weiß ich nicht, aber es funktioniert auf jeden Fall, so, wieso Delay und nicht

02:23:16.860 --> 02:23:27.460
Endlosschleife, äh, weil Delay die CPU-Zeit abgibt an andere Tasks, und Endlosschleife

02:23:27.460 --> 02:23:34.140
eben endlos ist, und ich brauch ja noch ein bisschen CPU-Zeit, wenn ich ein neues OTA-Firmware

02:23:34.140 --> 02:23:38.780
hochladen will, aber beschreibst du die Datei da nicht die ganze Zeit, das ist tatsächlich

02:23:38.780 --> 02:23:44.020
nicht so sinnvoll, das stimmt, aber bis jetzt ist mir noch kein Flash kaputt gegangen, ja,

02:23:44.020 --> 02:23:48.980
ist nicht, ist nicht so sinnvoll, man könnte zum Beispiel jetzt sagen, dass man sagt, äh,

02:23:48.980 --> 02:23:58.700
once oder so, aber wie ging das, Standard Once, Call Once, Call Once, nee, gibt's nicht,

02:23:58.700 --> 02:24:07.340
was muss ich da include'n für, thread, mutex, okay, wir machen jetzt C++-Magic, geht das,

02:24:07.340 --> 02:24:16.140
Call Once, geht's, ein Flag, nein, nein, wir wollen das mit exquisite C++-Botmitteln machen,

02:24:16.140 --> 02:24:22.700
das geht aber nicht, kann der wohl nicht, dann machen wir das anders, dann merken wir

02:24:22.700 --> 02:24:32.500
uns das einfach, wenn das okay war und gut ist, das C fehlt echt, oh, achso, nee, findet

02:24:32.500 --> 02:24:38.740
er aber auch so nicht, okay, probieren wir nochmal, aber ich glaube, findet er auch so

02:24:38.740 --> 02:24:58.620
nicht, ne, nee, kann er nicht, okay, was auch immer, was auch immer, welcher C++-Standard

02:24:58.620 --> 02:25:07.260
ist das, 11, warum ist das hier nicht drinne, warum kann er das nicht, ist doch C++-20 angeblich,

02:25:07.260 --> 02:25:18.660
vielleicht ist das include-experimental drinne, once, nee, ich hab keinen Plan, alter, C++,

02:25:18.660 --> 02:25:31.820
please, standard call once, once flag, okay, und warum genau findet er das nicht, oh, blieb,

02:25:31.820 --> 02:25:45.780
oh, guys, C++, nein, nein, stopp, was war denn das, alter, darf ich hier drinnen nichts

02:25:45.780 --> 02:25:57.420
include'n, muss ich das oben machen oder wie, ah, ah, okay, wenn man das oben include'n,

02:25:57.420 --> 02:26:07.740
dann funktioniert's auch, alles klar, works as intended, so, und wie macht man das jetzt,

02:26:07.740 --> 02:26:22.300
call once, aha, aha, excellent, call once flag, was, was mach ich hier überhaupt gerade,

02:26:22.300 --> 02:26:35.740
was, was mach ich hier, okay, excellent, C++-Stands mach ich, flag, so, perfekt, so, und jetzt

02:26:35.740 --> 02:26:42.020
sollte das nur noch einmal aufrufen, sehr schön, hoffentlich funktioniert das jetzt, ah, yes,

02:26:42.020 --> 02:26:48.980
ah, yes, exquisite, exquisite, sehr schön, was auch immer es jetzt genau tut, er sollte

02:26:48.980 --> 02:26:56.660
es nur noch einmal pro Boot machen, alles klar, sehr schön, oh, set, boot, successful, einmal

02:26:56.660 --> 02:27:09.820
durchgelaufen, wunderbar, richtig Pfeiffer, aber massive, die haben echt so'n Mist, ja,

02:27:09.820 --> 02:27:16.540
das ist C++, alter, was erwartest du, okay, ich bin jetzt ein bisschen aus dem Konzept

02:27:16.540 --> 02:27:22.100
gekommen, wo bin ich denn entstehen geblieben, ich hab, ich hab'n Linux-Desktop mit unterschiedlichen

02:27:22.100 --> 02:27:26.740
Desktops und, also Linux, Linux VM mit unterschiedlichen Desktops und ich hab'n Windows Host drunter,

02:27:26.740 --> 02:27:35.220
wo ich aus der VM raus switchen kann, relativ schnell, mit Windows Shortcuts, okay, so, und

02:27:35.220 --> 02:27:42.700
jetzt müssen wir OTA einbauen, Standard String ist nicht gescheit, nein, ich glaube, die

02:27:42.700 --> 02:27:46.580
Standard C++ String Klasse ist so ziemlich die schlechteste String Klasse, die von allen,

02:27:46.580 --> 02:27:54.220
von allen modernen Sprachen, man darf nicht vergessen, die hatten bis, bis, bis vorletztens

02:27:54.220 --> 02:28:02.220
Standard, hatten die nicht mal oder haben immer noch nicht, too lower, too lower und

02:28:02.220 --> 02:28:15.300
uppercase drinnen, auch kein Split oder irgendwas, nix, zu übelster Crap, ey, genau, Standard

02:28:15.300 --> 02:28:20.260
too lower, wenn ich sowas, wenn ich sowas schon sehe, Alter, warum ist das nicht einfach

02:28:20.260 --> 02:28:26.500
eine Methode an der String Klasse, also, du hast keinen Split, du hast keinen Partition,

02:28:26.500 --> 02:28:32.420
ich glaube Reverse hast du im Zweifelsfall noch irgendwo, du hast keinerlei sinnvolle

02:28:32.420 --> 02:28:39.580
String-Methoden, die man braucht, ich weiß nicht, was C++-Leute los ist, ja, will ich

02:28:39.580 --> 02:28:49.100
aber gar nicht jetzt verwenden, so, jetzt wirst du OTA machen, jetzt wirst du OTA machen,

02:28:49.100 --> 02:28:56.900
also sprich, dass wir, das ist Albi, exakt, da muss ich auch immer kecken, ja, wenn ich

02:28:56.900 --> 02:29:04.580
dann, manchmal sucht man in C++ nach den einfachsten Dingern und dann kommst du auf Stack Overflow

02:29:04.580 --> 02:29:09.580
und dann kommen die an, ach Leute, erst mal Boost include, mal ganz davon abgesehen, Boost

02:29:09.580 --> 02:29:14.540
für ESP32 gibt's überhaupt nicht, ich include doch keinen Boost für String Split, hallo,

02:29:14.540 --> 02:29:19.700
Split, das sollte Basic sein, by the way, das ist auch ne Sache, die hab ich mir selbst

02:29:19.700 --> 02:29:33.620
gebastelt, String Split, weil's nicht eingebaut ist, so fail, ok, also, weiter im Text, genau,

02:29:33.620 --> 02:29:38.340
wir müssen jetzt OTA-Updates machen, wie gesagt, ich hab schon selbst was für OTA-Updates

02:29:38.340 --> 02:29:42.540
gebaut, mit HTTPS und so, heute machen wir die einfache Variante, einfach ein fertiges

02:29:42.540 --> 02:29:54.340
Projekt verwenden und zwar, was ich ganz gut finde, ist das da, da kriegt man so ne Webseite

02:29:54.340 --> 02:30:01.700
zum Firmware-Hochladen, eigentlich relativ easy, muss man include und gut ist, also einbinden

02:30:01.700 --> 02:30:14.620
und gut ist, add, der Watt-Champ, bam, kann Standard String eigentlich UTF-8, das kommt

02:30:14.620 --> 02:30:22.580
ja auch noch dazu, Standard String ist komplett, Encoding unabhängig, das ist im Prinzip einfach

02:30:22.580 --> 02:30:40.260
nur ein besseres Byte-Array, was halt ein Witz ist 2021, ja, wobei es auch seine Vorteile

02:30:40.260 --> 02:30:46.260
hat, genau, W-String gibt's ja auch noch, so, da haben wir den Kram installiert, wie

02:30:46.260 --> 02:31:00.580
verwendet man das jetzt, include, Web-Server, Async, Alter, die Musik, LOLW, die Toads sind

02:31:00.580 --> 02:31:12.340
aber ganz schön am Rumschreien im Hintergrund, Moment, wir wollen ESP32-Demo, Async, ich

02:31:12.340 --> 02:31:25.300
nenne es Async, Main, also wie, lass mal kurz überlegen, wir include das, hier wo man Custom

02:31:25.300 --> 02:31:33.140
Libraries include, ja, das da, OTA, so und jetzt muss ich mal kurz in die Hilfe gucken,

02:31:33.140 --> 02:31:43.860
wie das funktioniert, Web-Server, auf Port, also wir brauchen einen Web-Server, damit wir

02:31:43.860 --> 02:31:51.860
die neue Firmware hochladen können, so, also sprich, dann machen wir hier mal einen Web-Server,

02:31:51.860 --> 02:31:57.700
auf Port 80, korrekt, Port 80 ist gut, dazu müssen wir noch ein paar anderes Zeug include,

02:31:57.700 --> 02:32:07.140
Alter, ich blick gerade, was hat der Typ für Abhängigkeit, nochmal, achso, Async, Web-Server,

02:32:07.140 --> 02:32:18.180
Async TCP braucht er noch, oh meinetwegen, Dependency Hell, so, wo ist es, ah, vor zwei

02:32:18.180 --> 02:32:29.980
Jahren, na top aktueller Web-Server, den brauchen wir, der Watt-Champ, Moment, das war jetzt

02:32:29.980 --> 02:32:35.180
aber eigentlich gar nicht das, was ich installieren wollte, oder, ich wollte den Web-Server installieren,

02:32:35.180 --> 02:32:49.180
Warte, Moment, jetzt hab ich irgendwie Mist installiert. Ah, ah, help, installed, weg damit.

02:32:49.180 --> 02:33:05.180
Oh, die Musik ist jetzt hier Massive, Massive Epic für ESP programmieren. Was brauche ich hier alles?

02:33:05.180 --> 02:33:17.180
Das da? Also das da? Der ist tatsächlich zwei Jahre alt, ok. Alter, MonkaS. Und das hier ist auch zwei Jahre alt.

02:33:17.180 --> 02:33:34.180
Ok, ich hatte tatsächlich das Richtige. So, der Watt-Champ ist am Start, Web-Server am Start, add. Ok, so.

02:33:34.180 --> 02:33:43.180
Hast du schon mal mit C++ Co-Routines und Async Await? Nee, habe ich noch nicht verwendet. So, ok, jetzt sollte das eigentlich funktionieren.

02:33:43.180 --> 02:33:54.180
Include, Include, Web-Server gestartet. Ok, nice. Post-Champ. Web-Server gestartet. Das heißt, wie geht es jetzt weiter?

02:33:54.180 --> 02:34:01.180
Web-Server, wir müssen uns mal die Demo angucken. Dann sollten wir eine Webseite kriegen zum Firmware-Hochladen.

02:34:01.180 --> 02:34:10.180
Also, WLAN gestartet haben wir. Web-Server und was macht der Typ hier jetzt? Start, Begin, on request. Nee, das brauchen wir eigentlich.

02:34:10.180 --> 02:34:18.180
Wir brauchen eigentlich nur das da. Und Server, Begin. Alles klar. Das sollte jetzt nicht allzu schwierig sein.

02:34:18.180 --> 02:34:34.180
Setup. Das müssen wir machen hier vor. Wartet mal, wartet mal, wir müssen das eigentlich... Ah, ich muss das ein bisschen umsortieren.

02:34:34.180 --> 02:34:44.180
So, hier muss ich warten, falls das Firmware-Update nicht funktioniert. Server, Begin, Begin und hier drinnen sagen wir jetzt OTA-Check.

02:34:44.180 --> 02:34:55.180
Loop. Und den Hostname müssen wir noch setzen auf Watt-Champ. Hab ich gerade gesehen. Set ID, dass ich auch weiß, auf welchem Controller ich bin.

02:34:55.180 --> 02:35:01.180
Und jetzt sollten wir eine Webseite haben, wo ich Sachen Firmware hochladen kann, wenn alles funktioniert hat.

02:35:01.180 --> 02:35:08.180
Server, Begin, Begin. Ja, okay, probieren wir mal aus. Jetzt bin ich echt gespannt.

02:35:08.180 --> 02:35:15.180
Also wie gesagt, C++, Go-Routines, Go-Routines, nicht Go-Routines, meine Güte. Hab ich noch nicht ausprobiert.

02:35:15.180 --> 02:35:20.180
Aber ich könnte mir vorstellen, dass das C++-Creamers auch geschafft hat, Async Away zu verkacken.

02:35:20.180 --> 02:35:34.180
Die Letzten, denen ich vertraue, das ordentlich zu implementieren und vor allem Syntax und Sachen zu viel erfinden, die angenehm zu benutzen sind, die Letzten, denen ich das zutraue, ist das C++-Cremium.

02:35:34.180 --> 02:35:39.180
Okay.

02:35:39.180 --> 02:35:50.180
So, dann schauen wir mal, ob ich jetzt, was für eine IP hat das? 1 und 2, 1, 6, 8, 2, 1, 3, 8. Pause-Champ.

02:35:50.180 --> 02:35:58.180
Is unreachable. Warum?

02:35:58.180 --> 02:36:03.180
Warum ist der Watt-Champ unreachable?

02:36:03.180 --> 02:36:07.180
Oh, ich hab ne Idee, warum der Watt-Champ unreachable ist, Leute.

02:36:07.180 --> 02:36:13.180
Ich glaub, mein Axis-Point hat ne Firewall drauf, die nicht funktioniert.

02:36:13.180 --> 02:36:15.180
Die, die, die den nicht durchlässt.

02:36:15.180 --> 02:36:24.180
Der Axis-Point hat, glaub ich, standardmäßig die Firewall aktiviert. Fuck. Was mach ich denn jetzt? Ich komm an den Watt-Champ nicht dran.

02:36:24.180 --> 02:36:29.180
Unreachable? Äh, dass keinerlei Pakete hinkommen und zurück, vor allem nicht zurückkommen.

02:36:29.180 --> 02:36:35.180
Äh, ja, wie, wie, Moment. Ich muss, ich muss den Axis-Point, fuck.

02:36:35.180 --> 02:36:39.180
Was war der Axis-Point? Hat der Axis-Point nochmal für ne, hier.

02:36:39.180 --> 02:36:43.180
Kann ich den Axis-Point managen über ein Browser? Nein! Okay.

02:36:43.180 --> 02:36:46.180
Wie komm ich auf den Axis-Point drauf?

02:36:46.180 --> 02:36:51.180
Ich muss die Firewall ausschalten. Okay, ähm.

02:36:51.180 --> 02:37:10.180
Über Winbox vielleicht auf den Axis-Point. IP gelegt. Oh nein. China Microcontroller detected. Habt ihr gesehen, dass Apple jetzt sogar all dies checkt von der Kamera im iPhone, falls die ausgetauscht wurde?

02:37:10.180 --> 02:37:25.180
Ach guck mal, da isser. 137. Vielleicht kann ich mich atmen. Äh. Please. Connect. Connect. Ah.

02:37:25.180 --> 02:37:43.180
Ähm. Ähm. Wie komm, wie krieg ich den Zugriff auf meinen Axis-Point? Scheiße. Ich versuch's mal vom Tablet aus.

02:37:43.180 --> 02:37:53.180
Sind Port 80 und 443. Ja, aber nicht, nicht eingehen. Für den Axis-Point bin, bin ich ja quasi das Internet. So.

02:37:53.180 --> 02:38:00.180
Aber ich hab den als Bridge eingestellt. Die Firewall sollte eigentlich aus sein.

02:38:00.180 --> 02:38:04.180
Die Firewall sollte eigentlich aus sein.

02:38:04.180 --> 02:38:15.180
Aber ich, ich, ich kann den, ich kann den Controller. Hä?

02:38:15.180 --> 02:38:20.180
Jetzt kann ich den Controller pingen?

02:38:20.180 --> 02:38:24.180
Leute, ich muss mal pinkeln. Ich bin gleich wieder da.

02:38:24.180 --> 02:38:53.180
Ich bin gleich wieder am Start.

02:38:53.180 --> 02:39:18.180
Ich bin gleich wieder am Start.

02:39:18.180 --> 02:39:38.180
So, wieder am Start. Also, weiter geht's.

02:39:38.180 --> 02:39:50.180
Warum kommt der da nicht drauf? Hä? Sogar Nmap meint, dass das offen ist, Port 80. Ah, muss ich vielleicht irgendwie Update oder so machen?

02:39:50.180 --> 02:39:58.180
Hä? Ok, Leute. Nmap meint, Port 80 ist offen.

02:39:58.180 --> 02:40:15.180
Oh, das hab ich vergessen, oder? Nee, hab ich nicht.

02:40:15.180 --> 02:40:29.180
Hab ich irgendwas? Falschgemachter? War das nicht Update?

02:40:29.180 --> 02:40:46.180
Ok, was ist die Default Domain? Ich muss auf Slash Update? Slash Update, ja, korrekt.

02:40:46.180 --> 02:41:14.180
Hä? Wie kann Nmap meinen, dass der Port offen ist und ich krieg da nichts? Ok, wir machen jetzt einfach einen Curl.

02:41:14.180 --> 02:41:43.180
Ok, wir kommentieren jetzt mal einfach alles aus, was irgendwie Probleme machen könnte.

02:41:43.180 --> 02:41:55.180
Einfach einfach alles weg. Alles weg, außer WLAN Connect.

02:41:55.180 --> 02:42:13.180
Moment, die Debug von der IP lasse ich noch drinnen. Upload. Der Browser hat einen Titel, stimmt? Wait a minute.

02:42:13.180 --> 02:42:27.180
Ok, dann bin ich vielleicht doch gecrashed. Oh, guck mal, das ist so oft auskommentiert, dass es schon durchgestrichen ist.

02:42:27.180 --> 02:42:51.180
So, reconnect. IP.

02:42:51.180 --> 02:43:09.180
Der bekommt die Seite. Der bekommt die Seite, es funktioniert alles. Aber App ist nicht da.

02:43:09.180 --> 02:43:33.180
Hä? Die Seite ist korrekt geladen. Content Length müssten... What the fuck?

02:43:33.180 --> 02:43:50.180
Ich hab da ja eigentlich nichts drauf. Hä? Also ich hab das schon mal verwendet, das funktioniert eigentlich ganz gut.

02:43:50.180 --> 02:43:59.180
Start das Ding mal neu, hab ich ja gerade. Das liegt bestimmt an dem Access Point dazwischen, habe ich irgendwie so die doofe Vermutung.

02:43:59.180 --> 02:44:07.180
Bei, eigentlich sehr merkwürdig. Also viel verkehrt laufen kann er hier schlicht, kann er hier nicht, ne?

02:44:07.180 --> 02:44:17.180
Er connectet sich zum WLAN. Kann man übrigens mal minimieren. Connectet sich zum WLAN und ansonsten macht er nix.

02:44:17.180 --> 02:44:44.180
Server. Moment, ich guck mir nochmal die Hilfe an. Moment, das ist das falsche. Example. Example.

02:44:44.180 --> 02:44:51.180
Ich, ich include den Scheiß mal so wie in der Reihenfolge. Man weiß, man weiß ja nie, man weiß, man weiß ja echt nie.

02:44:51.180 --> 02:45:07.180
Pass mal auf, am Ende liegt es irgendwie an der Include-Reihenfolge oder sowas. Mich würde, mich würde in C++ echt nix, nix, nix mehr wundern.

02:45:07.180 --> 02:45:22.180
Ich mach das direkt unterhalb vom Arduino. Das ist, was ich um sowas wie Include-Reihenfolge überhaupt Gedanken machen muss.

02:45:22.180 --> 02:45:51.180
Reconnect. Bosschamp. What the fuck, Alter? Was, warum will das nicht?

02:45:51.180 --> 02:46:11.180
Der dampft mir hier irgendwie Teile von der Firmware oder sowas. Keg-Wade? Was? Ok, was mach ich verkehrt? Was mach ich verkehrt?

02:46:11.180 --> 02:46:40.180
Das Beispiel ist doch, ich benutze C++ ja, aber das Beispiel ist doch easy. Soll ich mal Strom abziehen und wieder dran machen? Oh, ich hab immer noch.

02:46:40.180 --> 02:47:05.180
Es geht. Die Include-Reihenfolge wars. Und da sagt mal einer, was zu Header-Dateien sind was Gutes. So eine Rotzsprache.

02:47:05.180 --> 02:47:23.180
So ein abgrundtiefer Schrott, Alter. Es ist echter Wahnsinn, wie schlecht man sein kann 2021.

02:47:23.180 --> 02:47:37.180
Krasser Scheiß. Hättest du keine andere Sprache? Nein, leider nicht. Es gibt Micro-Python, ist auch manchmal ein bisschen problematisch, vor allem, weil es nicht so viele Libraries für gibt.

02:47:37.180 --> 02:47:52.180
Also für Hardware-Interaktionen und sowas. Und es gibt ein experimentelles Rust, das wars aber auch. So, und jetzt kann ich Firmware hochladen.

02:47:52.180 --> 02:48:00.180
Es gibt leider keine andere Auswahl. Freiwillig benutze ich den Schrott doch nicht.

02:48:00.180 --> 02:48:24.180
So. Ok, jetzt können wir die ganzen anderen Kran wieder einkommentieren und hoffen, dass es jetzt funktioniert.

02:48:24.180 --> 02:48:31.180
Gut, jetzt können wir auch gleich mal probieren, ob der Firmware-Upload funktioniert. Wenn ihr jetzt nach dem Einkommentieren wieder alles geklappt habt.

02:48:31.180 --> 02:48:56.180
Hier machen wir noch Screen, Drawstring, 00, wo haben wir denn hier aufgehört? 20, 40, 40, Waiting for OTA, oder machen wir einfach OTA, Waiting, Punkt, Punkt, Punkt. So, geht die Seite jetzt?

02:48:56.180 --> 02:49:12.180
Come on! Auf! Wird er kaputt?

02:49:12.180 --> 02:49:39.180
Calc Wait? Hä? Ich bin auch gradig verwirrt. Wo ist denn das Problem jetzt? Native Speed. Hä? Da ist er. Hab ich jetzt? Ok, hab ich sonst noch irgendwie Mist drinne vielleicht?

02:49:39.180 --> 02:49:55.180
Hab ich sonst vielleicht noch irgendwie Mist drinne?

02:49:55.180 --> 02:50:07.180
Ok, ok, ok. Mal mit nochmal Minimalprogramm. Ich bin echt grad voll verwirrt, was der für Schmerzen hat.

02:50:07.180 --> 02:50:15.180
Ok, ich mein, mehr kann ich nicht rausmachen.

02:50:15.180 --> 02:50:20.180
Warum steht da überhaupt noch ne Null drauf? Da sollte keine Null mehr draufstehen.

02:50:20.180 --> 02:50:26.180
Da sollte, da sollte ne... Vielleicht muss ich doch Kontrast und so setzen.

02:50:26.180 --> 02:50:37.180
Da sollte Punkt, Punkt, Punkt draufstehen. Aber sag mal so, mehr kann ich nicht. Mehr kann ich ja nicht machen.

02:50:37.180 --> 02:51:03.180
Irgendwann ich mach WLAN an, WLAN an, schreib was aufs Display und dann warte ich einfach nur, ob ich ein Update bekomme. Also, mehr ausschalten geht ja grad gar nicht.

02:51:03.180 --> 02:51:12.180
Ups. Ich mach jetzt mal den Browser schnell zu und wieder auf.

02:51:12.180 --> 02:51:23.180
Hä? Wo bin ich jetzt? Hä, was ist das denn? Eben ging's nur noch. Ah, wait, wait, wait.

02:51:23.180 --> 02:51:37.180
Das ist brutalst langsam.

02:51:37.180 --> 02:51:57.180
Ich... Hat ich eben noch mehr auskommentiert? Wie kann das? Ok.

02:51:57.180 --> 02:52:13.180
Hm. Also aus irgendwelchen Gründen hat der was dagegen, gegen was auch immer. Ok. Nochmal auskommentiert den ganzen Müll.

02:52:13.180 --> 02:52:31.180
Ok. Also ich mein, jetzt ist ja wirklich, jetzt ist ja nur wirklich gar nichts mehr drin. Außer WLAN. Also WLAN an, was ich ja brauch für ein Update und Server starten.

02:52:31.180 --> 02:52:45.180
Aber ihr habt die Seite eben gesehen, dass es prinzipiell funktioniert.

02:52:45.180 --> 02:53:07.180
Ok, jetzt aber. Was ist das für ein Kack? Warum geht das nicht? Die Seite hat doch eben unter exakt den gleichen Bedingungen schon mal geladen.

02:53:07.180 --> 02:53:25.180
Er überträgt, er überträgt es ja auch teilweise. Content length. Hä? What the fuck?

02:53:25.180 --> 02:53:44.180
Ok, das checke ich jetzt nicht. Example. Das checke ich nicht.

02:53:44.180 --> 02:53:56.180
Ist das doch an meinem Access Point? Dass das irgendwie Probleme macht? Ich mein, wir können uns ja mal ausgeben lassen, wie die Verbindungsgeschwindigkeit bzw. der Empfang ist.

02:53:56.180 --> 02:54:20.180
Das machen wir mal. Das ging, wie war das? Wi-Fi, R, R, S oder S? Nee. Nee. R, S, R, hier das da.

02:54:20.180 --> 02:54:31.180
OTR ist immer ein Problemthema. Also die Library habe ich schon öfters verwendet. Ist überhaupt kein Problem. Ich glaube irgendwie, es liegt an meinem Access Point.

02:54:31.180 --> 02:54:54.180
Aber das ergibt auch keinen Sinn. Es kann ja eigentlich nichts mehr sein. Also erstens die Seite ging schon mal und ich habe nichts mehr drin. Ich habe nur wirklich alles aus, was man ausschalten kann.

02:54:54.180 --> 02:55:14.180
Ich kann auch die Includes ausmachen. Jetzt ist gleich wirklich alles weg. Ich habe keine Ahnung, aber ich glaube WLAN Empfang ist zumindest ok.

02:55:14.180 --> 02:55:37.180
Spiffs was not declared. Ja, auch auskommentieren. Ok, jetzt ist wirklich gar nichts mehr drin. Jetzt muss es funktionieren. Und wenn nicht, dann mache ich jetzt mal Strom ab und Strom gleich wieder dran.

02:55:37.180 --> 02:55:58.180
Gucken, dass ich nicht zu oft drauf zugreife von allen Seiten.

02:55:58.180 --> 02:56:09.180
Ja.

02:56:09.180 --> 02:56:32.180
Ok, der hat echt irgendwelche Probleme und ich weiß nicht was. Gab es irgendwie ein Update in letzter? Hä?

02:56:32.180 --> 02:56:42.180
Jetzt hat, jetzt hat, jetzt hat er das Eigen geladen unten, aber der Rest nicht.

02:56:42.180 --> 02:56:56.180
Das stimmt doch irgendwie. Also außerdem dauert es auch viel zu lang. Normalerweise geht die Verbindung ziemlich schnell.

02:56:56.180 --> 02:57:06.180
Das ist der Exist Point. Ja, ich glaube ohne Scheiß. Ich glaube auch, dass es der Exist Point ist.

02:57:06.180 --> 02:57:22.180
Das fackt mich jetzt schon ein bisschen ab.

02:57:22.180 --> 02:57:28.180
Ja, und verbinden auf mein Exist Point kann ich mich ja auch nicht.

02:57:28.180 --> 02:57:49.180
Ok, das ist ok. Wir gehen einfach mal von aus, das ist der Exist Point. Ich mache den Kram mal wieder rückgängig, dass zumindest die Software halbwegs intakt ist wieder.

02:57:49.180 --> 02:57:56.180
Ok.

02:57:56.180 --> 02:58:08.180
Dann überlege ich gerade, wie kriege ich das jetzt mit dem Exist Point hin. Ich starte den mal neu. Also wir machen jetzt mal zwei Sachen.

02:58:08.180 --> 02:58:27.180
Ich komme nicht drauf auf meinen Exist Point. Ich habe den ursprünglich als Router konfiguriert, da hat er hinter seine Firewall eingeschaltet und dann habe ich ihn umgeschaltet auf Bridge. Ich kann mal gucken, ich gucke mal ob ich mit meinem Tablet drauf komme, dass ich das ausschalten kann.

02:58:27.180 --> 02:58:39.180
Ups. Ich mache jetzt erstmal den Exist Point nochmal kurz an und aus und stelle den mal auf den Tisch hoch. Ich brauche ein längeres USB-Card.

02:58:39.180 --> 02:59:08.180
Boah. Oh Gott. Oh Gott.

02:59:08.180 --> 02:59:15.180
Ok. Jetzt.

02:59:15.180 --> 02:59:22.180
Da steht bei mir jetzt auf dem Tisch der Exist Point. Ich habe auch mal.

02:59:22.180 --> 02:59:43.180
Ja, du bist nicht connected. Sollte er sich eigentlich versuchen zu reconnecten? So. Laut der Logik, die ich da programmiert habe, der kann sein Gateway doch gar nicht pingen.

02:59:43.180 --> 02:59:56.180
Ach nee, der macht. Der will mir doch nicht erzählen, dass er sein Gateway pingen kann.

02:59:56.180 --> 03:00:05.180
Ach Moment, das ist noch die alte Firmware. Ich habe die neue noch gar nicht hochgeladen. Ok. Upload.

03:00:05.180 --> 03:00:14.180
Ok, jetzt schauen wir mal. Ob der Exist Point jetzt funktioniert. Er ist wieder gestartet.

03:00:14.180 --> 03:00:20.180
Ich gucke im Tablet, ob er auch wirklich da ist.

03:00:20.180 --> 03:00:36.180
Jep. Jep Kok, der ist am Start. Ok. Reconnect. Alles klar. Nö, das hat einfach keinen.

03:00:36.180 --> 03:00:50.180
Ah, vielleicht lag das echt an der Positionierung vom Exist Point oder so. Alles klar. Guck mal. OTA-Page am Start. Choose File.

03:00:50.180 --> 03:00:58.180
So, jetzt können wir gleich mal gucken, ob das Firmware-Uploaden funktioniert. Und zwar die Firmware liegt unter Build.

03:00:58.180 --> 03:01:09.180
Hier. Also in einem äußerst einfach zu merkenden Verzeichnis ist die Firmware am Start, die wir jetzt hochladen müssen.

03:01:09.180 --> 03:01:20.180
Firmware-Bin. Firmware-Upload funktioniert. Exquisite.

03:01:20.180 --> 03:01:28.180
Und jetzt können wir zugucken. Er sollte jetzt neu starten, nachdem die Firmware hochgeladen wurde.

03:01:28.180 --> 03:01:33.180
Epische Musik zum Firmware-Uploaden. Ja, hat funktioniert.

03:01:33.180 --> 03:01:45.180
Taskwatch.com Triggered. Ja, das ist der Reboot von ihm.

03:01:45.180 --> 03:01:59.180
Ok. Nice. Ok, es funktioniert. Ich bin begeistert.

03:01:59.180 --> 03:02:06.180
Und jetzt Punkt Slash OTH. Kann ich einfach einen Curl hochschieben. So, aber das ist in Ordnung.

03:02:06.180 --> 03:02:18.180
Er heißt doch richtig alles, alles klar. Ok. Ok, soweit so gut. Also sprich, wir haben... Brauchen wir das jetzt eigentlich fürs Display?

03:02:18.180 --> 03:02:30.180
Braucht man nicht. Kann man löschen. Also sprich, Display initialisieren, bisschen Debug-Infos draufschreiben.

03:02:30.180 --> 03:02:37.180
Und jetzt müssen wir noch testen, ob das funktioniert, dass der wartet, wenn er kaputt geht.

03:02:37.180 --> 03:02:43.180
Das testen wir jetzt mal folgendermaßen. Also, der checkt ja hier, ob der letzte Boot geklappt hat.

03:02:43.180 --> 03:02:48.180
Wenn der letzte Boot nicht geklappt hat, dann wartet er 45 Sekunden, dass ich Zeit hab, noch ein Update zu machen.

03:02:48.180 --> 03:02:53.180
So und wir können einfach das jetzt mal kaputt machen. Nämlich einfach hier einen Restart reinschreib.

03:02:53.180 --> 03:03:02.180
Das heißt, der bootet jetzt erst mal bis dahin, restartet sich, hat dementsprechend den letzten Boot nicht als erfolgreich markiert

03:03:02.180 --> 03:03:06.180
und danach sollte er hängen bleiben, 45 Sekunden, dass ich updaten kann.

03:03:06.180 --> 03:03:11.180
In der Hoffnung, by the way, die Webseite geht jetzt wieder. Aber wir sollten es auf dem Display sehen.

03:03:11.180 --> 03:03:18.180
Wir sollten es auf dem Display sehen. Auf dem Display sollte dann die IP stehen und OTH-Waiting, 45 Sekunden.

03:03:18.180 --> 03:03:24.180
Wenn wir da richtig fancy sind, können wir noch eine Progress Bar machen.

03:03:24.180 --> 03:03:30.180
Ok, Crashed. Jetzt hat er gecrashed und jetzt sollte OTH-Waiting da stehen.

03:03:30.180 --> 03:03:35.180
Auf.

03:03:35.180 --> 03:03:37.180
Und warum nicht?

03:03:37.180 --> 03:03:43.180
Ah, weil ich kack genug bin und die Hälfte vergessen hab. Display.

03:03:43.180 --> 03:03:47.180
Aber es funktioniert, ihr seht, er bleibt schon hier hängen.

03:03:47.180 --> 03:03:52.180
Ok, uploaden wir die Firma nochmal.

03:03:52.180 --> 03:04:09.180
Was ich witzig finde, guck mal, wie fett die Firma geworden ist, von anfanglich 25 auf 65% nur durch WLAN hinzufügen.

03:04:09.180 --> 03:04:14.180
So, reconnect. Punkt, Punkt, Punkt. OTH-Waiting.

03:04:14.180 --> 03:04:20.180
So, und jetzt, während er auf OTH-Waited, kann ich auf die Webseite, die wahrscheinlich wegen meinem Access Point...

03:04:20.180 --> 03:04:26.180
Ah, guck. Und jetzt habe ich 45 Sekunden Zeit, eine gefixte Firmware hochzuladen.

03:04:26.180 --> 03:04:29.180
Genau, WLAN ist komplett TCP, IP, alles Mögliche.

03:04:29.180 --> 03:04:39.180
Also sprich, wenn ich den jetzt pricke, in Anführungszeichen, also sprich, wenn ich eine Firmware hochlade oder wenn irgendwas ist, dass der nicht ordentlich bootet,

03:04:39.180 --> 03:04:46.180
dann bleibt der beim zweiten fehlgeschlagenen Boot 45 Sekunden hängen und erlaubt mir eine neue Firmware hochzuladen.

03:04:46.180 --> 03:04:52.180
Das ist eigentlich eine ganz coole Taktik.

03:04:52.180 --> 03:04:57.180
Nice, so. Ok, dann können wir diesen Restart hier wieder raus machen.

03:04:57.180 --> 03:05:01.180
So, dann können wir auch gleich testen, ob der Firmware-Upload funktioniert, indem jetzt...

03:05:01.180 --> 03:05:09.180
Ach, Moment. Ich uploade gerade eine Firmware, die noch das Restart drin hat.

03:05:09.180 --> 03:05:17.180
Off. Neue Firmware erstellen, please. Jawoll. Upload. Excellent.

03:05:17.180 --> 03:05:24.180
Ok, also, nächster. Sensor haben wir, Sensor lesen funktioniert auch. OTH-Abdeckten funktioniert auch.

03:05:24.180 --> 03:05:31.180
Der Typ hat noch ein cooles Projekt. Web-Serial.

03:05:31.180 --> 03:05:34.180
Das finde ich für Debug-Zwecke auch äußerst praktisch.

03:05:34.180 --> 03:05:39.180
Sowas habe ich auch schon selbst gebastelt über HTTPS, aber ich nehme jetzt einfach mal fertige Sachen.

03:05:39.180 --> 03:05:51.180
Das ist auch ganz nice. Wow, retry.

03:05:51.180 --> 03:05:55.180
Wir haben es kaputt gemacht, Leute.

03:05:55.180 --> 03:06:06.180
Da kann ich Debug-Ausgabe im Browser machen über WebSockets. Das ist ziemlich nice.

03:06:06.180 --> 03:06:15.180
Rein. Zack. Vor 8 Monaten. Add. Der Watt-Champ. Der Watt-Champ braucht es. Alles bam.

03:06:15.180 --> 03:06:27.180
So.

03:06:27.180 --> 03:06:40.180
Ich glaube einfach so. War das so? Ich glaube schon.

03:06:40.180 --> 03:06:47.180
Mal gucken, ob es doch die Include-Reihenfolge war, die kaputt ist. Ob es jetzt funktioniert.

03:06:47.180 --> 03:06:55.180
So. Und jetzt konnte man ihm irgendwo sagen, das muss ich mir mal kurz abgucken. Web-Serial.

03:06:55.180 --> 03:07:10.180
Genau. Einfach beginnen. Und dann kann ich jetzt Debug-Ausgaben im Browser machen, was äußerst praktisch ist.

03:07:10.180 --> 03:07:21.180
So. Und dann testen wir auch gleich, ob das funktioniert. Wir machen hier mal eine Debug-Ausgabe alle Sekunde.

03:07:21.180 --> 03:07:30.180
Check W. So. Jetzt bin ich mal gespannt. Was meint ihr, Flash schneller? Über USB oder über WLAN?

03:07:30.180 --> 03:07:36.180
Meine Übertragung über WLAN ist vielleicht sogar fast schneller.

03:07:36.180 --> 03:07:41.180
Nee, aber ich denke mal, über Serial Flash doch immer noch ein bisschen schneller.

03:07:41.180 --> 03:07:49.180
Leute, ich muss euch sagen, Streaming hilft mir echt. Mir tut der Kopf weniger weh.

03:07:49.180 --> 03:07:56.180
Ich glaube ehrlich gesagt, dass der limitierende Faktor hier sogar ist, wie schnell er die Sachen ins Flash schreiben kann.

03:07:56.180 --> 03:08:01.180
Gar nicht so sehr der Upload-Speed.

03:08:01.180 --> 03:08:14.180
So. Wenn jetzt alles funktioniert. Moin, Midnightwolf. Wenn jetzt alles funktioniert, dann sollten wir jetzt eine Debug-Ausgabe bekommen.

03:08:14.180 --> 03:08:22.180
Nice. Check W. Jetzt können wir quasi Logs ausgeben im Browser. Und ich brauche gar keine serielle Verbindung mehr.

03:08:22.180 --> 03:08:33.180
So. Und wisst ihr, was das Coole daran ist? Jetzt könnte ich ihn anschließen, nicht mehr über USB, sondern direkt über die externe Stromversorgung.

03:08:33.180 --> 03:08:43.180
Und ich könnte Firmware hochladen über den Browser. Also sprich, ich muss ab jetzt nicht mehr mit dem Kabel dran.

03:08:43.180 --> 03:08:53.180
Also sprich, wenn das Ding jetzt im Keller hängt, könnte ich ab jetzt hochladen, ohne dass ich ein USB-Kabel dran machen muss.

03:08:53.180 --> 03:08:57.180
Was ja praktisch ist. Ich will ja nicht runter rennen müssen mit dem Raspberry Pi oder so.

03:08:57.180 --> 03:09:06.180
Und ich habe sogar einen Schutz drin, dass falls ich den kaputt mache mit einer neuen Firmware, ich 45 Sekunden Zeit habe, noch eine gefixte Firmware dann hochzuladen bei jedem Reboot.

03:09:06.180 --> 03:09:15.180
Chat, ist das nicht? Moment. Wait. Ist das nicht exzellent?

03:09:15.180 --> 03:09:36.180
So, also weiter im Text.

03:09:36.180 --> 03:09:46.180
So, Debug-Ausgabe über Web geht auch. Können wir jetzt wieder rausschmeißen.

03:09:46.180 --> 03:09:53.180
Wir können die Zeit ausgeben.

03:09:53.180 --> 03:10:01.180
Was ich immer ganz gerne mache, ist, dass ich weiß, dass das Ding live ist.

03:10:01.180 --> 03:10:09.180
Irgendwie die Zeit ausgeben. Dass ich weiß, es kommt jede Sekunde in eine Ausgabe und die serielle Schütztelle funktioniert.

03:10:09.180 --> 03:10:18.180
Wie tiny ist der Tiny Pico eigentlich? Da. Ziemlich klein, guck mal.

03:10:18.180 --> 03:10:27.180
Oh, ich sollte, Moment, ich sollte mal das Licht wieder anmachen, das sehe ich gerade. Ich habe meine Beleuchtung gar nicht an.

03:10:27.180 --> 03:10:37.180
Ja, guck, der ist ziemlich klein.

03:10:37.180 --> 03:10:47.180
Also so mit der kleinste sinnvoll benutzbare ESP32 mit halt schon fertigen Board und wo man auch Pins dran machen kann.

03:10:47.180 --> 03:10:57.180
Es gibt noch kleinere, aber die sind dann schon wirklich sehr, sehr raw alles, ja.

03:10:57.180 --> 03:11:02.180
Funktioniert das Zählen noch?

03:11:02.180 --> 03:11:07.180
Okay, das Zählen vom Sensor haben wir irgendwie kaputt gemacht.

03:11:07.180 --> 03:11:18.180
Ah, nee, guck, der bei Licht anzählt, ja. Guck, seht ihr, zwei, drei, vier.

03:11:18.180 --> 03:11:30.180
Okay, der Sensor funktioniert noch. Fünf.

03:11:30.180 --> 03:11:38.180
Das ist doch open source, wundert mich, dass es das, der ESP, dreimal darfst du raten, aus welchem Land der kommt.

03:11:38.180 --> 03:11:44.180
Die Kokomoto zwar noch am Start, das ist schon aus China.

03:11:44.180 --> 03:11:50.180
Die Chinesen fahren wieder am Start.

03:11:50.180 --> 03:12:03.180
Ach so, ja, das wundert mich auch, dass sie das noch nicht kopiert haben.

03:12:03.180 --> 03:12:07.180
Ach, das ist die Abtime, die ich ausgebe.

03:12:07.180 --> 03:12:12.180
Gut, also weiter im Text, wie lange bin ich schon am Start?

03:12:12.180 --> 03:12:16.180
Ich kriege langsam Hunger, drei Stunden schon.

03:12:16.180 --> 03:12:25.180
Okay, also Basics sind ja schon am Start, Sensors funktionieren, OTA funktioniert, Debug-Ausgabe funktioniert.

03:12:25.180 --> 03:12:31.180
Jetzt können wir uns noch mal die aktuelle Zeit anzeigen lassen, dafür muss ich mir aber ein bisschen mehr Zeug kopieren.

03:12:31.180 --> 03:12:33.180
Zock.

03:12:33.180 --> 03:12:39.180
Haben wir nicht vorher den FMT-Fan am Start?

03:12:39.180 --> 03:12:43.180
Ich finde das auch beste Textformat Library überhaupt.

03:12:43.180 --> 03:12:51.180
Dazu muss ich mir aber was kopieren aus dem anderen Projekt, nämlich, ich habe mir mal irgendwann

03:12:51.180 --> 03:12:59.180
Logger was gebastelt zum Text formatieren, was FMT unter der Haube verwendet,

03:12:59.180 --> 03:13:06.180
was aber die Arduino Custom Typen kann, also sprich, der kann IP-Adressen gleich formatieren und sowas in der Richtung.

03:13:06.180 --> 03:13:12.180
Da muss ich schon mal kurz gucken, Logger.

03:13:12.180 --> 03:13:15.180
Das ist an manchen Stellen etwas hässlich.

03:13:15.180 --> 03:13:22.180
C++.

03:13:22.180 --> 03:13:27.180
FMT ist nicht drinne.

03:13:27.180 --> 03:13:29.180
Okay.

03:13:29.180 --> 03:13:31.180
Ey!

03:13:31.180 --> 03:13:36.180
Das ist auch so ein Ding, ne?

03:13:36.180 --> 03:13:43.180
Ich habe keine Ahnung, ob das eine schöne Variante ist, aber der Arduino String,

03:13:43.180 --> 03:13:51.180
der konvertiert selbst nicht implizit zu Character Pointer.

03:13:51.180 --> 03:13:57.180
Ich habe das einfach mal überschrieben, ich habe keine Ahnung, ob man das sinnvollerweise so machen sollte, aber es funktioniert.

03:13:57.180 --> 03:14:01.180
Da muss ich weniger schreiben.

03:14:01.180 --> 03:14:06.180
Welches Volk sind diese Chinesen? Na, die aus China.

03:14:06.180 --> 03:14:08.180
PainsChamp, ich weiß.

03:14:08.180 --> 03:14:15.180
Irgendwie habe ich mir das letzte Mal zu angewöhnt, wenn ich 50 Mal Chinesen gesagt habe, irgendwann muss ich dann mal zum Außer-Chinesen sagen.

03:14:15.180 --> 03:14:29.180
Wobei ich Schwachsinn ich finde, es gibt ja Leute, die stehen da voll drauf und sagen das standardmäßig, aber ich bin Team China und nicht China.

03:14:29.180 --> 03:14:33.180
Ich meine Chinesen, genau. Die Chinesen meine ich.

03:14:33.180 --> 03:14:38.180
So, und jetzt müssen wir uns erstmal GitLab, FMT, klonen.

03:14:38.180 --> 03:14:43.180
Und exzellent Text formatieren zu können.

03:14:43.180 --> 03:14:46.180
So, clone, code, zack.

03:14:46.180 --> 03:14:51.180
Dump, dump, dump, lib, git.

03:14:51.180 --> 03:14:56.180
Oh, wir wissen, das heißt, ich gehe jetzt halt shit, shit, clone.

03:14:56.180 --> 03:15:00.180
FMT, git, checkout, den letzten Tag.

03:15:00.180 --> 03:15:04.180
Der letzte Tag ist glaube ich 7113.

03:15:04.180 --> 03:15:05.180
Jawoll.

03:15:05.180 --> 03:15:09.180
Jetzt build, zack, bumm.

03:15:09.180 --> 03:15:12.180
Minecraft, oh, oh, oh, oh, oh, was jetzt?

03:15:12.180 --> 03:15:18.180
FMT has not been declared?

03:15:18.180 --> 03:15:25.180
Hä?

03:15:25.180 --> 03:15:32.180
Wie richtig ist FMT deklariert, da ist es doch.

03:15:32.180 --> 03:15:40.180
Jetzt muss ich rollen.

03:15:40.180 --> 03:15:47.180
FMT has not been declared, what?

03:15:47.180 --> 03:15:52.180
Wo ist das hier?

03:15:52.180 --> 03:15:57.180
Hä?

03:15:57.180 --> 03:16:06.180
Wait a minute, da fehlt die Hälfte.

03:16:06.180 --> 03:16:07.180
Hä?

03:16:07.180 --> 03:16:10.180
Dann muss die Library doch einfach nur klonen oder hat es funktioniert?

03:16:10.180 --> 03:16:17.180
Jetzt bin ich verwirrt.

03:16:17.180 --> 03:16:21.180
Oder musste das in Include?

03:16:21.180 --> 03:16:22.180
Hä?

03:16:22.180 --> 03:16:27.180
Das verstehe ich jetzt nicht.

03:16:27.180 --> 03:16:36.180
Was habe ich jetzt verkehrt gemacht, clone?

03:16:36.180 --> 03:16:49.180
Muss schon in normaler Weise?

03:16:49.180 --> 03:16:52.180
Muss schon in normaler Weise?

03:16:52.180 --> 03:16:55.180
Nicht.

03:16:55.180 --> 03:17:00.180
Ich habe das beim anderen auch im Lip.

03:17:00.180 --> 03:17:02.180
FMT has not been declared?

03:17:02.180 --> 03:17:04.180
Ich weiß warum, ich weiß warum.

03:17:04.180 --> 03:17:11.180
Weil ich es hier nicht included habe.

03:17:11.180 --> 03:17:15.180
Jetzt funktioniert es auch.

03:17:15.180 --> 03:17:18.180
Kaum included, man richtig schon funktioniert.

03:17:18.180 --> 03:17:23.180
Checkout 713, wenn er fertig ist.

03:17:23.180 --> 03:17:26.180
Wunderbar.

03:17:26.180 --> 03:17:29.180
Erst mal 3 Stunden kompilieren den Kram wieder.

03:17:29.180 --> 03:17:35.180
Let's go.

03:17:35.180 --> 03:17:43.180
Guck mal, 4% Flash kann man dafür schon mal opfern.

03:17:43.180 --> 03:17:45.180
Wunderbar.

03:17:45.180 --> 03:17:47.180
Jetzt können wir auch ordentlich Text formatieren.

03:17:47.180 --> 03:17:52.180
Jetzt können wir auf dem Display die Sachen richtig nice formatieren.

03:17:52.180 --> 03:17:58.180
Nämlich so mit rechts aligned und sowas.

03:17:58.180 --> 03:18:01.180
Also ich würde sagen, unser Setup ist eigentlich okay.

03:18:01.180 --> 03:18:06.180
Da ist fertig, da muss man immer allzu viel machen.

03:18:06.180 --> 03:18:08.180
Fonts haben wir auch.

03:18:08.180 --> 03:18:13.180
WLAN Connect wunderbar.

03:18:13.180 --> 03:18:16.180
Ich würde sagen, das passt eigentlich jetzt so.

03:18:16.180 --> 03:18:24.180
MQTT brauchen wir dann noch später für den Q-Chat.

03:18:24.180 --> 03:18:29.180
Aber ich habe keinen MQTT Server zum ausprobieren.

03:18:29.180 --> 03:18:34.180
Außerdem Public MQTT Server.

03:18:34.180 --> 03:18:38.180
Ich würde sagen, wir machen morgen Mittag fertig.

03:18:38.180 --> 03:18:42.180
Morgen Mittag machen wir noch die MQTT Geschichte und das Einbinden in Home Assistant.

03:18:42.180 --> 03:18:46.180
Heute machen wir noch die Basics fertig.

03:18:46.180 --> 03:18:50.180
Bis 18 Uhr, dann habe ich Hunger und muss was essen.

03:18:50.180 --> 03:19:00.180
Pepofett.

03:19:00.180 --> 03:19:03.180
Jetzt können wir auf dem Display die Sachen ordentlich anzeigen.

03:19:03.180 --> 03:19:06.180
Das machen wir jetzt noch.

03:19:06.180 --> 03:19:13.180
Wir haben hier Total Energy von dem Zähler mit der Drehscheibe.

03:19:13.180 --> 03:19:18.180
Ich weiß nicht, soll ich lieber Upper Floor nennen?

03:19:18.180 --> 03:19:21.180
Erster Stock halt.

03:19:21.180 --> 03:19:27.180
Lichtsensor funktioniert.

03:19:27.180 --> 03:19:31.180
Dann faken wir das jetzt mal.

03:19:31.180 --> 03:19:37.180
Jede Schleife mache ich die Total Energy um 3 höher.

03:19:37.180 --> 03:19:41.180
Ich tue so, als hätte ich etwas gemessen mit meinen Sensoren.

03:19:41.180 --> 03:19:43.180
Das andere um 1.

03:19:43.180 --> 03:19:51.180
Dann schauen wir mal, dass wir die ganzen Sachen anzeigen können.

03:19:51.180 --> 03:19:53.180
Was schreiben wir jetzt auf unser Display?

03:19:53.180 --> 03:19:55.180
Da steht ja aktuell nur 5.

03:19:55.180 --> 03:19:59.180
Das sieht ein bisschen armselig aus.

03:19:59.180 --> 03:20:03.180
Wir schreiben jetzt aufs Display das, was ich ursprünglich vorhatte.

03:20:03.180 --> 03:20:06.180
Wir schreiben oben hin in die erste Zeile aufs Display.

03:20:06.180 --> 03:20:11.180
Erstmal pro Schleifendurchlauf haben wir das Display leer.

03:20:11.180 --> 03:20:13.180
Dass wir was Neues drauf schreiben können.

03:20:13.180 --> 03:20:18.180
Wir fangen bei 0 an und da schreiben wir hin die IP.

03:20:18.180 --> 03:20:22.180
Also WIFI.

03:20:22.180 --> 03:20:25.180
Local IP to String.

03:20:25.180 --> 03:20:28.180
Das brauche ich zu Debug-Zwecken, sonst blick ich da nicht mehr durch.

03:20:28.180 --> 03:20:32.180
Wenn ich ein halbes Jahr oder Jahr später in den Keller gehe, finde ich die IP nicht mehr.

03:20:32.180 --> 03:20:34.180
Klar, da muss ich den DHCP gucken.

03:20:34.180 --> 03:20:38.180
Aber die IP auf dem Display ist immer gut.

03:20:38.180 --> 03:20:43.180
Dann schreiben wir die Uptime.

03:20:43.180 --> 03:20:45.180
Mal aufs Display.

03:20:45.180 --> 03:20:48.180
Wir können die Uptime oder die Zeit schreiben.

03:20:48.180 --> 03:20:50.180
Wir schreiben die Zeit hin.

03:20:50.180 --> 03:20:52.180
Ich glaube, das ist schöner aufs Display.

03:20:52.180 --> 03:20:54.180
Wen interessiert die Uptime?

03:20:54.180 --> 03:20:57.180
Wobei die Uptime ist gar nicht so schlecht.

03:20:57.180 --> 03:21:01.180
Wenn ich die Uptime sehe, weiß ich, ob das Ding mal gecrasht ist oder nicht.

03:21:01.180 --> 03:21:09.180
Wenn es eine Uptime von 600 Sekunden hat, weiß ich, das Ding ist garantiert gecrasht in letzter Zeit.

03:21:09.180 --> 03:21:11.180
Wir machen die Uptime.

03:21:11.180 --> 03:21:20.180
Das ist sinnvoller in dem Fall.

03:21:20.180 --> 03:21:25.180
Jetzt können wir die Anzeige machen für den Stromverbrauch.

03:21:25.180 --> 03:21:30.180
Stromverbrauch formatieren wir folgendermaßen.

03:21:30.180 --> 03:21:33.180
Zack.

03:21:33.180 --> 03:21:36.180
38, 38, 48.

03:21:36.180 --> 03:21:44.180
Das ist der vertikale Abstand zwischen den Zeilen.

03:21:44.180 --> 03:21:49.180
Nachdem wir die Schriftgröße größer gemacht haben, müssen wir das ändern,

03:21:49.180 --> 03:21:55.180
weil ansonsten hängen die Zeilen ineinander drin.

03:21:55.180 --> 03:21:58.180
Total.

03:21:58.180 --> 03:21:59.180
Jetzt gucken wir uns das mal an.

03:21:59.180 --> 03:22:01.180
Das sollte jetzt schon eine ganze Ecke besser aussehen.

03:22:01.180 --> 03:22:04.180
Ich uploade das jetzt mal übers Webinterface.

03:22:04.180 --> 03:22:07.180
Und dann schauen wir mal, was schneller uploadet.

03:22:07.180 --> 03:22:09.180
Das vergleichen wir zwar.

03:22:09.180 --> 03:22:14.180
Ich mache jetzt Firmware-Upload übers Webinterface.

03:22:14.180 --> 03:22:16.180
Leute, das nimmt sich nichts.

03:22:16.180 --> 03:22:18.180
Der Firmware-Upload ist überall gleich schnell.

03:22:18.180 --> 03:22:21.180
Ob Serial oder Webinterface ist egal.

03:22:21.180 --> 03:22:24.180
Ich glaube, der limitierende Faktor ist der Flash-Spalch.

03:22:24.180 --> 03:22:26.180
Oder was meint ihr?

03:22:26.180 --> 03:22:30.180
Ich weiß nicht, wie schnell der Flash maximal ist.

03:22:30.180 --> 03:22:37.180
Schauen wir mal, wie es jetzt aussieht auf dem Display.

03:22:37.180 --> 03:22:47.180
Ich gucke mir das ein bisschen besser hin.

03:22:47.180 --> 03:22:56.180
Okay, das ist doch schon besser.

03:22:56.180 --> 03:22:59.180
Das sieht kacke aus, wenn das so...

03:22:59.180 --> 03:23:02.180
So ist gut, so sieht man schön was.

03:23:02.180 --> 03:23:03.180
Das ist doch schon mal besser.

03:23:03.180 --> 03:23:05.180
Oben hast du die IP draufstehen.

03:23:05.180 --> 03:23:12.180
Und unten drunter die Refreshrate sackt ein bisschen.

03:23:12.180 --> 03:23:18.180
Und unten drunter hast du stehen, was aktuell gemessen wurde.

03:23:18.180 --> 03:23:21.180
Sag mal, ist der Chat kaputt oder sagt gerade keiner was?

03:23:21.180 --> 03:23:23.180
Keck wait.

03:23:23.180 --> 03:23:28.180
Ich glaube, es sagt gerade gerade keiner was.

03:23:28.180 --> 03:23:32.180
Test alive.

03:23:32.180 --> 03:23:35.180
Ich wundere mich immer, wenn in 5 Minuten bei mir einer was nicht sagt.

03:23:35.180 --> 03:23:36.180
Das ist massig.

03:23:36.180 --> 03:23:42.180
Normalerweise wird ja, wenn schon auch wenigstens, ein bisschen sinnloses Zeug gespammt.

03:23:42.180 --> 03:23:46.180
Alle gestunt von Big Brain Proggers.

03:23:46.180 --> 03:23:50.180
Und jetzt machen wir mal richtig nice Text-Formatierungen.

03:23:50.180 --> 03:23:56.180
Und zwar, das kann man mit FMT richtig cool machen.

03:23:56.180 --> 03:24:02.180
Und zwar können wir jetzt sagen, wir formatieren das jetzt folgendermaßen.

03:24:02.180 --> 03:24:04.180
So soll das Ganze aussehen.

03:24:04.180 --> 03:24:09.180
Als erstes kommt ein Hütchen, weil erster Stock.

03:24:09.180 --> 03:24:12.180
Gibt es eigentlich schon Ergebnisse bei dem Projekt Minecraft Staubsauger?

03:24:12.180 --> 03:24:15.180
Ne, ne, gute Sache, muss ich mal aufschreiben.

03:24:15.180 --> 03:24:23.180
Hab ich noch gar nicht mehr weiter mir angeguckt nach dem letzten Stream.

03:24:23.180 --> 03:24:26.180
So, dann wollen wir das Ganze formatieren, die Zahlen.

03:24:26.180 --> 03:24:34.180
Und zwar, wir wollen es rechts alignen, dass die Zahl immer rechtsbündig geschrieben wird.

03:24:34.180 --> 03:24:40.180
Und maximal neun Stellen und zwar formatiert.

03:24:40.180 --> 03:24:47.180
Also mit tausender Trennzeichen formatiert.

03:24:47.180 --> 03:24:49.180
Mit ordentlichen tausender Trennzeichen formatiert.

03:24:49.180 --> 03:24:54.180
Und weil C++ so eine schöne Sprache ist,

03:24:54.180 --> 03:24:57.180
sieht das tausender Trennzeichen formatieren so aus.

03:24:57.180 --> 03:25:06.180
Wartet mal, hier.

03:25:06.180 --> 03:25:10.180
Das muss man machen, damit die Sache ordentliche tausender Trennzeichen hat.

03:25:10.180 --> 03:25:16.180
Fragt mich nicht, warum, aber es ist so.

03:25:16.180 --> 03:25:21.180
Man muss ihm sagen, man muss ein extra Struct anlegen für tausender Separator.

03:25:21.180 --> 03:25:24.180
Dann den tausenden Separator auf Punkt setzen.

03:25:24.180 --> 03:25:27.180
Sagen, dass es nach dreier Gruppen gruppiert wird, total wir.

03:25:27.180 --> 03:25:31.180
Dann irgendwie den Unique-Pointer anlegen, weil, ich hab keine Ahnung.

03:25:31.180 --> 03:25:39.180
Dann aus der Default Länder-Setting ein neues Länder-Setting erstellen.

03:25:39.180 --> 03:25:44.180
Mit neben Pointer auf diesen Settings Struct.

03:25:44.180 --> 03:25:48.180
Und das kann ich dann verwenden beim Text formatieren.

03:25:48.180 --> 03:25:52.180
Meine Fresse, Alter.

03:25:52.180 --> 03:25:56.180
Richtig, richtig massiv.

03:25:56.180 --> 03:26:02.180
Und das müsste dann eigentlich so aussehen, wenn ich es richtig gemacht hab.

03:26:02.180 --> 03:26:04.180
Das kopieren wir noch mal.

03:26:04.180 --> 03:26:06.180
48.

03:26:06.180 --> 03:26:12.180
Moment, da hinten fehlt jetzt noch First-Floor-Energy.

03:26:12.180 --> 03:26:15.180
Total Energy.

03:26:15.180 --> 03:26:18.180
So, und jetzt sollte das eigentlich hübsch aussehen auf dem Display.

03:26:18.180 --> 03:26:21.180
Endlich mal in Ordnung programmiert.

03:26:21.180 --> 03:26:26.180
So sieht's aus.

03:26:26.180 --> 03:26:27.180
Ah, ich bin ja auch blöd.

03:26:27.180 --> 03:26:33.180
Ich muss ja auch noch sagen, dass ich das formatieren will.

03:26:33.180 --> 03:26:39.180
Das ist ein Rapper von mir für die FMT-Lib, der ein paar...

03:26:39.180 --> 03:26:41.180
Warum hab ich das noch mal gemacht?

03:26:41.180 --> 03:26:44.180
Genau, die FMT-Lib, die benutzt standardmäßig Standard-String.

03:26:44.180 --> 03:26:46.180
Und ich will Arduino-Strings haben.

03:26:46.180 --> 03:26:49.180
Deswegen hab ich das mal einmal gerappt.

03:26:49.180 --> 03:26:52.180
So, jetzt sollte es funktionieren, obwohl das als rot angezeigt wird.

03:26:52.180 --> 03:26:54.180
Sollte es jetzt funktionieren.

03:26:54.180 --> 03:26:55.180
Oh, Regex.

03:26:55.180 --> 03:27:00.180
Hat die Standard-Lib im ESP überhaupt eine Regex-Implementierung?

03:27:00.180 --> 03:27:03.180
Wo gibt's denn normalerweise Regex?

03:27:03.180 --> 03:27:04.180
Oh, yes.

03:27:04.180 --> 03:27:06.180
Exquisite Standard-Regex.

03:27:06.180 --> 03:27:09.180
Jawoll.

03:27:09.180 --> 03:27:11.180
Da.

03:27:11.180 --> 03:27:14.180
Hab ich ja schon drauf gewartet.

03:27:14.180 --> 03:27:20.180
Was genau hat der Regex mit ECMAScript, Javascript-Zeugs zu tun?

03:27:20.180 --> 03:27:22.180
So, mal gucken, wie es jetzt aussieht auf dem...

03:27:22.180 --> 03:27:23.180
So, Postchamp.

03:27:23.180 --> 03:27:24.180
Postchamp.

03:27:24.180 --> 03:27:27.180
Mal gucken, ob es gut ausschaut.

03:27:27.180 --> 03:27:30.180
Hey, das sieht nice aus.

03:27:30.180 --> 03:27:31.180
Guck mal.

03:27:31.180 --> 03:27:33.180
Und der Write-Aligned auch.

03:27:33.180 --> 03:27:34.180
Also sprich...

03:27:34.180 --> 03:27:35.180
Oh, nee.

03:27:35.180 --> 03:27:36.180
Es ist zu fett, Leute.

03:27:36.180 --> 03:27:37.180
P-Pro-Fett.

03:27:37.180 --> 03:27:38.180
Es steht bloß K da.

03:27:38.180 --> 03:27:43.180
Es kann da stehen.

03:27:43.180 --> 03:27:48.180
Also, machen wir mal hier 7 Stellen.

03:27:48.180 --> 03:27:56.180
7 Stellen sollte wahrscheinlich reichen.

03:27:56.180 --> 03:27:59.180
Kann man das überprogrammieren, wenn man nicht konstant leidet?

03:27:59.180 --> 03:28:06.180
C++ programmieren auf jeden Fall nicht.

03:28:06.180 --> 03:28:11.180
P-Pro-Fett.

03:28:11.180 --> 03:28:20.180
Okay, Rebooten.

03:28:20.180 --> 03:28:23.180
Ah, so ist das schön.

03:28:23.180 --> 03:28:26.180
So, und jetzt haben wir 7 Stellen.

03:28:26.180 --> 03:28:28.180
Ich glaube, 7 Stellen reicht für so einen Stromzähler.

03:28:28.180 --> 03:28:32.180
Was hat denn so ein Stromzähler da normalerweise drauf hier?

03:28:32.180 --> 03:28:35.180
Wie viele Stellen sind denn da drauf?

03:28:35.180 --> 03:28:43.180
Wie viele Stellen sind denn da drauf?

03:28:43.180 --> 03:28:48.180
Ja, sollte reichen, ne?

03:28:48.180 --> 03:28:50.180
Oh, der hat...

03:28:50.180 --> 03:28:52.180
Vielleicht sollte ich kein Int nehmen, sondern ein Float.

03:28:52.180 --> 03:28:53.180
Guck mal.

03:28:53.180 --> 03:28:56.180
Der kann ja sogar Kommas haben.

03:28:56.180 --> 03:28:58.180
Was soll denn sowas?

03:28:58.180 --> 03:29:00.180
Kommas.

03:29:00.180 --> 03:29:01.180
Cacquade.

03:29:01.180 --> 03:29:03.180
Warum?

03:29:03.180 --> 03:29:09.180
Warum nicht einfach Ints?

03:29:09.180 --> 03:29:12.180
Du lockst dich als Route ein, resetzt das Passwort.

03:29:12.180 --> 03:29:13.180
Die haben alle Kommas.

03:29:13.180 --> 03:29:16.180
Okay, wenn die alle Kommas haben, dann muss...

03:29:16.180 --> 03:29:22.180
First, dann muss das kein Int sein, sondern ein Float.

03:29:22.180 --> 03:29:30.180
Würde ich mal behaupten.

03:29:30.180 --> 03:29:35.180
Wow.

03:29:35.180 --> 03:29:36.180
Moment.

03:29:36.180 --> 03:29:42.180
Int++ geht, Float++ geht nicht.

03:29:42.180 --> 03:29:46.180
Was genau hat der jetzt für Schmerzen?

03:29:46.180 --> 03:29:58.180
Okay, Double.

03:29:58.180 --> 03:30:10.180
Äh.

03:30:10.180 --> 03:30:12.180
Plus gleich.

03:30:12.180 --> 03:30:15.180
Warum haben die++ nicht definiert?

03:30:15.180 --> 03:30:21.180
Aber ich kann doch ein normales Float auch++en, oder?

03:30:21.180 --> 03:30:23.180
Oder geht das nicht?

03:30:23.180 --> 03:30:27.180
Das geht doch auch.

03:30:27.180 --> 03:30:35.180
Warum geht das dann damit nicht?

03:30:35.180 --> 03:30:37.180
Wirkt ein wenig.

03:30:37.180 --> 03:30:39.180
++ ist nicht Atomic.

03:30:39.180 --> 03:30:44.180
Aber plus eins schon, oder wie?

03:30:44.180 --> 03:30:49.180
Nee.

03:30:49.180 --> 03:30:52.180
Okay, ja.

03:30:52.180 --> 03:31:02.180
Und wie mache ich das mit Floats?

03:31:02.180 --> 03:31:07.180
Okay, da hört mein C++ Pick-Prain-Stells auf.

03:31:07.180 --> 03:31:09.180
Keine Ahnung.

03:31:09.180 --> 03:31:18.180
Atomic, Float++.

03:31:18.180 --> 03:31:25.180
Ja, ja, ich weiß, aber hier meckert er doch auch drüber, guck mal.

03:31:25.180 --> 03:31:29.180
Dass plus gleich nicht geht.

03:31:29.180 --> 03:31:31.180
Special, okay.

03:31:31.180 --> 03:31:36.180
Long Double?

03:31:36.180 --> 03:31:38.180
Fetch, Sub?

03:31:38.180 --> 03:31:43.180
Was?

03:31:43.180 --> 03:31:47.180
Du brauchst Fetch, Add?

03:31:47.180 --> 03:31:49.180
Okay, jetzt wird's advanced.

03:31:49.180 --> 03:31:51.180
Was muss ich fett?

03:31:51.180 --> 03:31:54.180
Nee.

03:31:54.180 --> 03:31:56.180
Ich hab keinen Plan, Alter.

03:31:56.180 --> 03:32:03.180
Okay, wie kriege ich das jetzt um eins hoch?

03:32:03.180 --> 03:32:12.180
Fetch, Add.

03:32:12.180 --> 03:32:14.180
Fetch, Add.

03:32:14.180 --> 03:32:24.180
Das hab ich probiert, aber das ist hier gar nicht drinne.

03:32:24.180 --> 03:32:28.180
Oder muss ich da jetzt einen Long Long nehmen?

03:32:28.180 --> 03:32:31.180
Nee.

03:32:31.180 --> 03:32:35.180
Nee.

03:32:35.180 --> 03:32:37.180
Okay.

03:32:37.180 --> 03:32:41.180
Ich hab keine Ahnung, ich hab echt...

03:32:41.180 --> 03:32:46.180
Kein Schimmer.

03:32:46.180 --> 03:32:49.180
Ah, please.

03:32:49.180 --> 03:32:54.180
Dankeschön für den Prime, Sub.

03:32:54.180 --> 03:32:56.180
Increment, wie geht das?

03:32:56.180 --> 03:32:59.180
Stack Overflow helft mir.

03:32:59.180 --> 03:33:03.180
How to perform basic operations?

03:33:03.180 --> 03:33:06.180
Load?

03:33:06.180 --> 03:33:11.180
Compare, exchange?

03:33:11.180 --> 03:33:17.180
What?

03:33:17.180 --> 03:33:23.180
Nee, das ist eine globale Variable, die brauch ich nicht im Capture Clause.

03:33:23.180 --> 03:33:35.180
What the hell?

03:33:35.180 --> 03:33:39.180
Okay, okay, das erlaubt, das leuchtet ein.

03:33:39.180 --> 03:33:40.180
Compare, exchange?

03:33:40.180 --> 03:33:50.180
Ich hab keinen Plassen Schimmer, was hier abgeht.

03:33:50.180 --> 03:33:54.180
What the fuck?

03:33:54.180 --> 03:34:06.180
Ich bleib doch bei Int.

03:34:06.180 --> 03:34:13.180
Das könnte funktionieren, aber das kommt nicht das raus, was ich haben will.

03:34:13.180 --> 03:34:17.180
Okay, okay, okay, Kommando zurück, Kommando zurück.

03:34:17.180 --> 03:34:21.180
Wir bleiben einfach bei Int.

03:34:21.180 --> 03:34:27.180
Und gut ist.

03:34:27.180 --> 03:34:33.180
Wir bleiben einfach bei Int.

03:34:33.180 --> 03:34:36.180
Chaos, wurscht.

03:34:36.180 --> 03:34:51.180
Piss dich, Float.

03:34:51.180 --> 03:34:52.180
Nee, das geht nicht.

03:34:52.180 --> 03:34:53.180
Fetched.

03:34:53.180 --> 03:34:54.180
Gibt's nicht.

03:34:54.180 --> 03:34:57.180
Gibt's dafür nicht.

03:34:57.180 --> 03:34:59.180
Hab ich grad schon ausprobiert.

03:34:59.180 --> 03:35:04.180
Gut, wie dem auch sei.

03:35:04.180 --> 03:35:11.180
Ich kann ja einfach sagen, die letzte Stelle.

03:35:11.180 --> 03:35:13.180
Die letzte Stelle ist in Float oder irgendwie sowas.

03:35:13.180 --> 03:35:15.180
Keine Ahnung.

03:35:15.180 --> 03:35:16.180
Mal gucken.

03:35:16.180 --> 03:35:17.180
Ich bin noch nicht sicher.

03:35:17.180 --> 03:35:21.180
Ich sollte schon als Float machen.

03:35:21.180 --> 03:35:25.180
Du musst mit Long, Long initialisieren.

03:35:25.180 --> 03:35:30.180
Aber ich will keinen Float.

03:35:30.180 --> 03:35:31.180
Ich will kein Int.

03:35:31.180 --> 03:35:34.180
Also ich will ja was mit Kommas.

03:35:34.180 --> 03:35:38.180
Einfach den Int als Float casten.

03:35:38.180 --> 03:35:40.180
Nein, das funktioniert nicht.

03:35:40.180 --> 03:35:41.180
Das funktioniert nicht.

03:35:41.180 --> 03:35:42.180
Guck.

03:35:42.180 --> 03:35:45.180
Ich zeig sie, dass es nicht funktioniert.

03:35:45.180 --> 03:35:46.180
Zwar.

03:35:46.180 --> 03:35:54.180
Wo sind wir?

03:35:54.180 --> 03:36:00.180
Und jetzt sagt er mir.

03:36:00.180 --> 03:36:02.180
Das plus plus nicht geht.

03:36:02.180 --> 03:36:05.180
Plus gleich geht auch nicht.

03:36:05.180 --> 03:36:11.180
Und das, was du schreibst, gibt's auch nicht.

03:36:11.180 --> 03:36:12.180
Exzellent.

03:36:12.180 --> 03:36:18.180
Ich könnte einfach einen Log nehmen und auf diesen Atomic scheißen.

03:36:18.180 --> 03:36:22.180
Was in Long Float ist, ich würde sagen 64 Spit.

03:36:22.180 --> 03:36:26.180
Also quasi ein doppelt so großes Float.

03:36:26.180 --> 03:36:29.180
Also 64 Spit Float dann wahrscheinlich.

03:36:29.180 --> 03:36:30.180
Was weiß ich?

03:36:30.180 --> 03:36:33.180
Keine Ahnung.

03:36:33.180 --> 03:36:37.180
Aber ich muss sagen, die Ausgabe finde ich schon mal nice.

03:36:37.180 --> 03:36:38.180
Das gefällt mir.

03:36:38.180 --> 03:36:39.180
Versuch mal Float.

03:36:39.180 --> 03:36:40.180
Nein, nein, nein, nein.

03:36:40.180 --> 03:36:44.180
Das liegt daran, das ergibt schon Sinn, was sie schreiben auf ihrer Seite.

03:36:44.180 --> 03:36:50.180
Das für Floating Point ist keine Assembly oder keine Assembler Operationen gibt, die

03:36:50.180 --> 03:36:52.180
das in einem CPU Cycle macht.

03:36:52.180 --> 03:36:54.180
Deswegen kann man das nicht Atomic machen.

03:36:54.180 --> 03:36:55.180
Das ergibt schon Sinn.

03:36:55.180 --> 03:36:58.180
Aber das gefällt mir.

03:36:58.180 --> 03:36:59.180
Das ist nice.

03:36:59.180 --> 03:37:12.180
Ich meine, ich könnte einfach aus KWH WH machen und dann brauch ich kein Komma mehr,

03:37:12.180 --> 03:37:23.180
aber dann reicht mir die Stelle nicht.

03:37:23.180 --> 03:37:24.180
Doch, das gefällt mir.

03:37:24.180 --> 03:37:25.180
Das ist nice.

03:37:25.180 --> 03:37:33.180
So, wir haben jetzt keine Zeit mehr, Leute.

03:37:33.180 --> 03:37:36.180
18 Uhr, ich hab Hunger.

03:37:36.180 --> 03:37:39.180
Kannst du nicht einfach später nach Float umwandeln?

03:37:39.180 --> 03:37:40.180
Ja, doch.

03:37:40.180 --> 03:37:45.180
Aber es bringt mir ja nichts, wenn ich in Float caste und ich möchte ja Komma haben.

03:37:45.180 --> 03:37:47.180
Ich brauche ja die hundertstel.

03:37:47.180 --> 03:37:51.180
Also es bringt mir ja nichts.

03:37:51.180 --> 03:37:59.180
So, dann machen wir morgen weiter.

03:37:59.180 --> 03:38:01.180
Irgendwann morgen Mittag.

03:38:01.180 --> 03:38:03.180
Morgen früh erstmal wieder auf Wachen Stream.

03:38:03.180 --> 03:38:12.180
Dann machen wir morgen weiter und dann machen wir die MQTT Geschichte und die anderen Sachen

03:38:12.180 --> 03:38:13.180
fertig.

03:38:13.180 --> 03:38:16.180
Aber es funktioniert ja alles schon mal relativ nice, muss man echt sagen.

03:38:16.180 --> 03:38:24.180
Du machst WH als Int und castest dann nach Float?

03:38:24.180 --> 03:38:32.180
Ne, ich müsste es als Float machen, dann als Int casten, weil meine globale Variable,

03:38:32.180 --> 03:38:33.180
wo das reinkommt...

03:38:33.180 --> 03:38:48.180
Ne, wie kriege ich denn sonst in das Int 1000,8 rein?

03:38:48.180 --> 03:38:49.180
Gar nicht.

03:38:49.180 --> 03:39:00.180
Ach, wie auch immer, das muss ich mir mal überlegen.

03:39:00.180 --> 03:39:01.180
Das passt schon.

03:39:01.180 --> 03:39:09.180
Ja, doch, doch, ich will das ja haben.

03:39:09.180 --> 03:39:16.180
Muss ich mir mal überlegen, wie man das am besten macht.

03:39:16.180 --> 03:39:21.180
Wahrscheinlich ist das Beste, ich lasse diesen Atomic Kram weg und mache einfach eine Lok

03:39:21.180 --> 03:39:24.180
hin oder so und gut ist.

03:39:24.180 --> 03:39:32.180
So Leute, ich hoffe es hat euch gefallen, weil wieder richtig viele Leute am Start, exquisite.

03:39:32.180 --> 03:39:39.180
Mal ganz schnell gucken, ob es irgendjemand gibt, den ich hosten kann, den ich kenne.

03:39:39.180 --> 03:39:43.180
Der Lost, aber der hat es nicht wirklich nötig, haben wir einen kleineren am Start.

03:39:43.180 --> 03:39:48.180
Der Krieger spielt Fifa, nee Fifa ist echt nicht meins.

03:39:48.180 --> 03:39:51.180
So, ne, keiner am Start.

03:39:51.180 --> 03:39:54.180
Was macht denn der Frasier?

03:39:54.180 --> 03:39:55.180
Ist der Frasier am Start?

03:39:55.180 --> 03:39:58.180
Ist der Frasier da?

03:39:58.180 --> 03:39:59.180
Stopp.

03:39:59.180 --> 03:40:08.180
Alles klar Leute, wir machen Schluss, bis denn, machts gut, wir sehen uns.

03:40:08.180 --> 03:40:11.180
Was ist das?

03:40:11.180 --> 03:40:21.180
Bis denn, C U.

