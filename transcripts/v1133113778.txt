Jetzt bin ich wieder am start
So ich bin wieder da wie gesagt ich muss das machen dass der wort danach noch da ist
Stimmt das war schon umgestellt auf hetzer name servers
Vielleicht braucht es jetzt erst ein bisschen okay kein schimmer wir machen das erste mal
Wir warten mal kurz
Was sagt er denn hier genau die stimmt die waren schon umgestellt auf hetzner das hat er beim import glaube ich mitgemacht kann das sein
Dein gut haben ist weg ja sollst du auch keine 300 euro server holen
Ne das ist kein fail das ist das ist absicht das geht bei allen diesen services so
Die domain zeigt ja aber noch nicht auf hetzner dns hier müsste jemand explizit auf den richtigen hetzner dns zeigen lassen dass das ganze funktioniert
das ist bei allen diesen services so
Guck mal jetzt hat er es gecheckt jetzt hat er es gecheckt
Das habe ich das um umgestellt
Es kleint bei someone else
Okay, keine ahnung
Ich glaube das das müssen wir nächsten stream machen ich glaube da braucht jetzt erst mal bis das time outet
Versuch mal keck w.tf zu nehmen
Tatsächlich
Keck w.wtf
Aber warum kann man warum kann man das claimen
Häh das verstehe ich nicht
Was ist das für eine komische logik
Häh das ergibt überhaupt keinen sinn
Bei cloudflare funktioniert das anders bei cloudflare musst du dass das überhaupt angelegt wird
Innerhalb von keine ahnung einem halben tag deine dns server hinterlegen sonst geht das nicht
Okay, das ist aber schon fail
Keck w.services
Okay, kein schimmer müssen wir müssen erwarten wir machen das heute nur wir machen das heute nur mit ttp
Keine ahnung was was da was da los ist
Wir legen die loadbalancer mal an nur mit ttp
So jetzt kommt das wofür ich den health check angelegt habe also ihr erinnert euch ich habe hier eine health check drin stehen
Wo der loadbalancer testen kann ob das ganze funktioniert
also
enter your custom response
healthy
Pass
slash health
So also domain bräunert
Also
Domain bräunert
Also ich hoffe das ich hoffe das funktioniert so also was ich jetzt erwarten würde ist der
loadbalancer geht jetzt zu meinen app server hinten dran alle
15 sekunden und guckt ob das service noch lebt
Werden wir jetzt mal ausprobieren so sticky sessions brauchen wir nicht sticky sessions bedeutet wenn du einen loadbalancer hast mit
mit fünf app server
Dann kannst du mit sticky sessions dafür sorgen wenn jetzt hier der erste user wenn jetzt hier in den user reinkommt
Das rote ist ein user und er kommt jetzt zum ersten mal auf diesem server und macht weitere requests dann kommt er immer auf diesem server raus
Das sind sticky sessions
So und wenn ein anderer user reinkommt dann dahin ansonsten macht er standardmäßig hier
Alles im kreis
So also sticky sessions aus proxy protokoll brauchen wir auch nicht status cones 300 200 alles vollkommen in ordnung okay
Versuch mal keqwee.tf anzulegen
Tatsächlich ja das ist ja bescheuert
Warum kann man das anlegen ohne dass man beweisen muss dass es einem gehört
Das ist ja hängen geblieben das kann doch nicht das kann doch nicht im sinne des erfinder sein
Keqwee services
Jetzt jetzt funktioniert's okay
alles klar wunderbar warum auch immer
Ich musste das doch hier umstellen wahrscheinlich
okay
So ich continue jetzt erst mal
Okay genau so funktioniert das normalerweise
Normalerweise normalerweise ist das genauso wie
Also das funktioniert folgendermaßen man registriert eine domain irgendwo
Übrigens max ich muss ich dann auch da wieder raus rausschmeißen aus dem weiß nicht warum die das mit übernommen haben
Also auf namcheap mach mal hinne
Namcheap hat kein bock mehr zu cheap
Hallo namcheap please
hallo namcheap please
auch pause champ
Ne namcheap ah jetzt okay
Also
Normalerweise funktioniert das folgendermaßen man legt das an bei irgendeinem domain registrar kann bei hetzner selbst sein ist aber egal
Bei irgendeinem domain registrar legt man das an
Und wenn man dann einen anderen anbieter haben will der sich um diese ganze geschichte kümmert mit zertifikaten
Und namensauflösung dann kann man sagen hey
Lieber anbieter da wo ich meinen domain registriert habe der zukünftige dns ist das hier und da muss ich den kram hier hinterlegen
So und die sind randomized dass es nicht zufällig passieren kann zumindest ist das ist das normalerweise so
Also gehe ich noch mal hier rein ohne den max zu leaken
Und jetzt sagen wir custom dns hydrogen ns hetzner oxygen ns hetzner
Helium ns hetzner
add
Gut
Gut
Und jetzt finish
Und jetzt sollte das eigentlich
funktionieren
Ich habe bloß noch nicht gesehen wie es aussieht wenn es funktioniert
Hetzner boah das ging aber schnell namcheap ist auf zack
Genau das sollte eigentlich erst blocken wenn es verifiziert ist sehe ich genauso weiß nicht wo da die logik ist so
Edit zone file wow das ist ja richtig oldschool taktik hier
Gibt es da ah nee es gibt auch es gibt auch so einen so einen edit
Was ist das eigentlich für eine logik
Okay also wir brauchen ein a record für meinen load balancer von dem ich die adresse noch nicht habe
Also von der idee her soll das jetzt so sein wenn ich sage ping
keck w punkt services
Dann soll das auflösen auf die ip von meinem load balancer
Das heißt ich lege jetzt den load balancer mal an also machen wir doch http add certificates add
Certificate create certificate selector keck w services da ist es bam
Managed services okay das ding heißt
Keck w nee nee nee wait keck w as a service
keck w as cars keck w as a service
keck w cert
Keck w as a service
Subdomains alle also wildcard wildcard domain machen wir reicht wunderbar
create certificate
Sehr schön sehr schön mal gucken ob das jetzt funktioniert
Jawoll nee
Hat es jetzt schon gemacht okay wir warten mal ab
Normalerweise müsste ich jetzt hier was sehen
Sternchen macht man nie warum nicht
In dem fall ist doch vollkommen in ordnung keck was keck was
Keck was
Er soll mal createn
Er soll mal createn create mal Und gucken vielleicht vielleicht braucht es noch kurz bis es das gecheckt hat keine ahnung
Und dann sollten wir jetzt eigentlich hier dns einträge sehen
Ist gerade alles hardcore
Und jetzt habe ich mal wieder mein kundennummer liegt dns was nicht wirklich schlimm ist alter das ist gerade wahnsinnig geschwind alles
So okay das generiert ziemlich ziemlich langsam warten wir es mal ab warten wir es mal ab was ist da generatet
Ah hier guckt das sind die challenges für let's encrypt
Jetzt passt das jetzt passt das und jetzt löscht er die auch wieder genau und jetzt kriegt er jetzt hat er gleich das zertifikat am start
Der macht ja unter der kann er und der kann ja auch nicht zaubern der macht ja unter der haube auch nur ganz normales let's encrypt
Wo wir gerade wieder dabei sind während wir auf das zertifikat warten leute
Dieser stream ist gesponsert von
Sekunde wir machen jetzt einfach mal eine
Mal in rot
Alter paint come on so sehr schön so
Also dieser stream ist gesponsert von hetzerklaus und wenn euch selbst danach ist mal ein bisschen hier linux server technisch rumzubasteln
Einfach ausrufezeichen hetzner im paintchamp genau ausrufezeichen hetzner im chat 20 euro startguthaben sichern
Und direkt loslegen bei stündlicher abrechnung das heißt ihr könnt euch auch fette server kaufen
Und ja haben wir es hier bald noch mal
Ihr könnt euch auch fette server kaufen und wenig dafür bezahlen
Okay add services passt ich hoffe ich habe das hier alles richtig gemacht
Dein guthaben ist weg ernsthaft okay
Keck w dann würde ich dann schreibt den support doch mal an
Keck w lb ist das hier ach ja und hier kann man jetzt übrigens auswählen abgelaufen
Ja gut das läuft nach drei monaten aus
Das das das ich glaube ich habe das hier nicht richtig gemacht
Das läuft nach drei monaten aus das das das ich glaube drei monate kannst du das kannst du das guthaben verwenden
Wenn du das vor drei monaten eingelöst hast dann ist kein wunder
Richtig keck w ja
So ihr habt auch nur drei euro naja da gibt es nur eins fake account anlegen
Dann sehen meine statistiken auch besser aus ganz einfach
So also loadbalancing algorithmus folgendermaßen man kann auswählen round robin und least connections
In der regel bedeutet das round robin ist einfach erster request erster server zweiter request
zweiter server dritter request vierter und bei fünften server wieder sechster request
erster server siebter request zweiter server also im prinzip immer der reihe nach
So und least connection vor allem in verbindung mit sticky sessions ist das ganz praktisch da kann ich sagen
Hey es geht immer auf den server der die wenigsten verbindungen hat
Also wir machen aber round robin warum auch immer das ewig braucht für das erstellen vom zertifikat keine ahnung
Okay private ip dann schauen wir mal dann schauen wir mal
Ja du kannst jetzt der server downcrayen das ist tatsächlich in der tat sehr praktisch
Ich würde dir aber dazu folgendes empfehlen wenn du einen neuen server anlegst
Dann leg den immer an als den billigsten ich zeige ich zeige euch das mal kurz ja also
Ihr tests sv also du legst den an mit dem billigsten möglichen dann warte bis der erstellt ist
Was machen denn meine load balancer gehen die jetzt
Haha guck mal mein health check funktioniert poggers
Der load balancer balanced schauen wir mal ob es funktioniert public ip
Ist das zertifikat immer noch nicht da oder oder wie
Aber der load balancer an sich funktioniert guckt
Load balancer an sich geht
Achso ich bin ja auch doof ich bin über die ip gegangen hackw.services
Und ich habe noch kein dns eintrag alter ich bin ja auch wieder richtig richtig
Ich darf nicht mehrere sachen gleichzeitig machen also erst mal erst mal server skalieren
Erst mal erst mal server skalieren also du legst den server an als kleinsten server von allen
So und dann kannst du rauf skalieren aber wenn du rescale machst sagen wir du skalierst jetzt
Rauf auf hier irgendwie bisschen größere kiste sagen wir hier irgendwie auf auf den da skalierst
Du rauf dann ist wichtig dass du sagst cpu and ram only skalieren weil wenn du die festplatte
Skalierst diagonal natürlich dann kannst du nicht mehr runter skalieren weil die größeren
Kisten haben wie du hier siehst zack die größeren kisten haben größere platten und du kannst ja
Schlecht eine größere platte auf eine kleinere größe runter skalieren
So deswegen immer häkchen cpu und ram only machen server ausschalten
Rescale
Warten bis er gerescale ist also du siehst aktuell aktuell ist es noch einen cx11 20g eine cpu
Wenn wir jetzt kurz warten dann rescale das ganze auf drei cpus und dann wenn du das gemacht hast
So wie ich das gezeigt habe dann kannst du auch wieder runter runter skalieren
So und jetzt nebenbei machen wir noch den eintrag für den load balancer also das ist unsere public ip
Auf dem load balancer
Jetzt gehen wir dns eintragen sagen ip adresse den da ach gucke mal da
Also immer
Den da
Und
Kann man die partition auf der platte manuell größer machen
Das skaliert dann auch unten drunter gar nicht host so
Warte mal was was ist was ist was ist root
Ad Ad ist gut genau standard ttl ad record also wunderbar so und wenn ich jetzt keck weh wir pingen das ganze mal mache
Er hat so nicht gecheckt guck mal da bäm
Da ist die ip und jetzt achtung keck weh punkt services zack mit gültig im zertifikat
Load balenzt auf zwei linux server dahinter
Könnt ihr ausprobieren wenn ihr wollt keck weh punkt services
Auch noch ich bin mir nicht sicher ob ich hat der load balancer ip 4 6
Ich bin mir nicht sicher ob das funktioniert
Können das mit ip 4 6 mal hat jemand bei euch ip 4 6 und kann das ausprobieren
Kann man von ip 4 6 auf ip 4 4 intern werden
Na gut das ist ja ein proxy das muss funktionieren
Wenn es ein proxy ist muss das gehen
So also dann machen wir das mal also machen wir noch einen eintrag für
Hat irgendjemand eine glorreiche idee warum es ein a ist für ip 4 4 und 4 a für ip 4 6
Ich meine wenn es 4 a für ip 4 4 wäre und 6 für ip dann würde ich es noch verstehen oder wenigstens 2 oder hier 6 aber warum 4 und
Das ergibt keinen sinn oder ich verstehe es bloß nicht
End record
2 3 spit für versus 128 spit ist das vierfache das ist aber richtig massive brain alter
Ok wer ip 4 4 hat kann es mal ip 4 6 hat kann jetzt mal keck weh punkt services ausprobieren
Nee ich kann kein ping 4 6 mal ich habe rein ip 4 4 4 ich komme nicht bei ip 4 6 raus
Wobei doch ich habe doch jetzt einen richtig echten dual stack aber ein router dazwischen habe ich nicht für ip 4 6 eingerichtet geht nicht
Also können ausprobieren ob keck wie services ip 4 6 funktioniert jetzt sollte jetzt funktionieren
So und das nächste ist tatsächlich eine sehr gute frage
Ja die domain ist bei namenshipp gekauft aber die hets namenserver eingetragen genau
Und wie macht man das wenn dahinter eine datenbank steht dann muss ja server 1 und server 2 miteinander sync machen
Nee die datenbank muss sync machen da gibt es da gibt es verschiedene ansätze aber in der regel wirst du
Also beispielsweise wenn du ein mysql oder postgres cluster oder was auch immer hast da gibt es ja verschiedene varianten
Meistens ist es so ein datenbank server ist aktiv und der andere ist quasi so hot backup
Also das dann immer nur einer master ist der auch schreibvorgänge macht die anderen sind also read only
Also das ist zumindest eine variante die ganz gerne gemacht wird
Nee nicht hot spare der ist schon an und sync sich auch aber nur ein server committed changes in die datenbank
Also wenn du jetzt zwei postgresserver dahinten stehen hast einer ist master einer ist ja quasi read only stand by
Wie auch immer man das nennt bei postgres keine ahnung und dann geht deine anwendung halt
Beide anwendungserver gehen dann halt auf die gleiche datenbank das ist kein problem
Die datenbank handelt das was zuerst kommt und was danach kommt
So aber man sieht mit loadbalancer und services funktioniert alles wunderbar
Wozu db cluster stand einfach eine externe db ja die frage war doch wie man das macht mit mehreren datenbanken
Und eine datenbank alleine sind halt nicht mehrere
Aber ansonsten wenn du wenn du nen was weiß ich irgendeine datenbank as a service geschichte nimmst
Und ich nicht selbst darum kümmern willst dann kann es dir egal sein da nimmste da nimmste einfach was so was so kommt
Und gut ist aber wenn du selbst machst ja dann kann man sich überlegen wie man das machen will
Und das ist halt wie sagen anwendung spezifisch in dem fall ist es easy weil die da weil die anwendung überhaupt keine datenbank braucht
Komplett stateless das ding so und beide wei ihr könnt es jetzt auch mal auf den slash 20
Bäm immer die gleiche rotation so muss das sein macht max eigentlich alles in c-shop
Nee wir haben ja auch schon sachen in cc plus plus in go gemacht und
Was haben wir sonst noch cobalt wir haben sogar mal cobalt gemacht kein witz
Wofür braucht man eigentlich keck wss service ist so obvious du kannst keck w rotaten
Also wenn das nicht das nächste nächste start up funktionalität ist dann weiß ich auch nicht
Also viel jetzt mal ernsthaft viel besser geht es nicht mehr das ist die app wo die ganze welt darauf gewartet hat
Oder wollt ihr etwa was anderes behaupten
Also das hat jeder braucht das und vielleicht wissen sie leute bloß noch nicht aber in wirklichkeit ist eigentlich allen klar
Das ist denn das der nächste nächste große shit hier
Funktioniert das keck wss service 0xd das müsste funktionieren 0xd müsste funktionieren
Ja
Man kann die dinge auch als hex übergeben was funktioniert
Ok wunderbar also laut balancer und so funktioniert alles wunderbar wir können ja auch gucken beim hetzen im dashboard
Was haben wir hier alle alle servers enthält die wir simulieren jetzt mal den ausfall von einem server
Da müsste 0b 1101 das weiß ich nicht ob der alle sachen beim parsen unterstützt aber kann ich mir schon vorstellen
Ne das funktioniert nicht
Warte mal ist das nicht wohl encoding ist das nicht wohl encoding das ist gar nicht beim service an ach
Scheiß ob es egal es funktioniert es funktioniert also wir können jetzt mal wir können jetzt mal einen ausfall
Simulieren das machen wir jetzt mal guck mal ausfall ich brauche mal ein auto refresh
Kennt ihr ein gutes auto refresh firefox
Moment das konnte firefox doch eingebaut oder ich ich erinnere mich das konnte firefox doch irgendwie eingebaut
Ich weiß aber nicht mehr wo
Bild in
Autorefresh plugin
Ja gut ich mache das jetzt ich mache das jetzt mal von hand macht es mal von hand ist egal
Also gehen wir mal kurz zu unseren servoren die wir jetzt mal von hand machen
Ich mache das jetzt ich mache das jetzt mal von hand macht es mal von hand ist egal also gehen wir mal kurz zu unseren servoren
Achso ich wollte übrigens das skalieren noch fertig zeigen also wir haben server jetzt hoch skaliert auf drei cpus
Und nachdem wir nicht rescaled haben die platte
Stimmt wir machen den cache aus das ist eine gute idee ist able cache nachdem wir nichts nicht die platte skaliert haben
Können wir auch wieder ohne probleme runter runter skalieren
Ist von dem größeren auf den kleineren runter skalieren funktioniert also das ist mein tipp macht den server immer als kleinstes
Er stellt den server immer als kleinstes mit der kleinsten platte dann könnt ihr beliebig hoch und runter skalieren
Ohne dass ihr den server neu erstellen müsst
So also hier load balancer
Der load balancer ist hier auf also hier load balancer
Heck W LB
So und jetzt machen wir den server aus nehmen wir beispielsweise den ersten den schalte ich jetzt einfach aus
So jetzt bin ich auf dem ersten gelandet jetzt kriege ich gleich ein timeout
Aber der andere sollte noch funktionieren das heißt wir bekommen jetzt es ruckelt guckt es ruckelt jetzt vielleicht mal kurz
Immer wenn wir und jetzt hat es gecheckt dass das service weg ist das heißt es hat jetzt mal ganz kurz geruckelt
Aber das service ist nicht da und obwohl ein server weggeflogen ist
Das ist halt das praktische wenn du load balancer davor und man kann das bei the way noch viel viel cooler machen
Ja also es gibt ja es gibt ja load balancer die können das wirklich mit session states
Also dass du quasi geschaerte tcp connections hast über beide server und sowas
Da wird es ganz abgedeckt dann merkst du vom ausfall gar nichts mehr
Wie lautet der link noch mal hier preisschamp.org
Es gibt nix box series x das habe ich ja nie gesehen ob das stimmt
Geht alter egal so also seht ihr ein server ist weg
Aber es geht immer noch kek wie erstes service so jetzt schalten wir den server wieder ein
Und jetzt sollte nach kurzer zeit der service auch wieder abkommen
Ich hoffe ich habe automatisch eingestellt
Zeit mal traffic vom load balancer waren wir gleich
Ich hoffe ich habe den server so eingestellt dass da wieder hochfährt mit dem service
Ich weiß nicht ob ich ob ich enable lass mal ins ansible gucken habe ich das enabled unit file
Unit file oh ich glaube wir haben das nicht enabled guckt mal hier
Aber wir starten das nur wir haben wir haben das gar nicht enabled beim starten ok das ist natürlich fail
Der service startet nicht automatisch beim server starten ok das ist natürlich ein config fehler
Den sollte man den sollte man nicht machen also der service ist wieder da aber das service startet nicht
Welche kiste war das habe ich welche leute habt ihr aufgepasst welche habe ich jetzt runtergefahren
Wieder ne
Hier war das ssh igen minus r ging das so kann man das immer nicht merken
Es sehr gut
System ctl status keqw ne wie habe ich das ding genannt keqw ist das service
Inactive dead start so status ok und jetzt jetzt sollte die musik
So und jetzt sollte der load balancer checken dass es wieder da ist gleich wenn es hier gestartet ist
Sobald der load balancer den nächsten check macht genau so jetzt müssen wir in unser ansible
noch reinschreiben dass das auch enabled werden soll also restart ssh ja also das müssen wir noch
rein haben enable keqw as a service ansible enable service muss ich mal gucken wie das enabled
Das richtig guck da ist er wieder beide server sind wieder da jetzt laden wir noch mal wir gucken uns
gleich den traffic an aber ich muss das hier erst noch mal state ne alter ist mir zu viel ist mir zu viel
offen 1ks flick nicht mehr durch wo sind wir hier ich mache mir auch noch einen browser auf
Ansible enable system d ok enable gibt es ein beispiel für aha hier also enabled yes
enabled yes demon reload meinetwegen ok das brauchen wir dass es nach dem nach dem neustart
vom server auch wieder automatisch automatisch hochfährt so überprüfen wir mal dass es auch
funktioniert ich habe ich habe das ja von hand enabled wir probieren noch mal aus ob das
funktioniert also server crash jetzt bäm habe ich es enabled enable ne habe ich nicht
jetzt aber also power off server ist gecrashed noch hat es nichts von mitbekommen
hat es gecheckt server ist raus und alles wird auf den zweiten server load balancen
server load balancen als ist da ein app server kann ausfallen und es läuft weiterhin ohne
probleme so muss das sein so und jetzt server starten power on und jetzt warten wir kurz
und jetzt sollte das ding wieder automatisch ins load balancer reinkommen wenn der load balancer
down ist dann hat man gelitten gibt es hier sowas wie crafts open connections irgendjemand
ist ganz schön heftig am keck wss servicen würde ich sagen hier wird ordentlich keck
wer ist es serviced wer ist es von euch wer ist hier hacker man am start so ist das service
wieder da ja nicht enable status status läuft so das sollte jetzt eigentlich der load balancer
gleich checken dass es wieder da ist das server da checkt er nur alle 15 sekunden und dann
muss es dreimal ok sein hat der lb den aus protection ja so viel wie alles andere so viel
oder wenig wie alles andere auch services hier läuft health check deswegen ist es übrigens
wichtig dass wir einen health check haben klar server down könnte man auch mit allem
anderen machen aber es gibt ja auch so sachen wie anwendung läuft aber datenbank ist kaputt
oder sonstige geschichten also anhand des health checks kann man dann schon ein bisschen
genauer genauer sachen ausprobieren so jetzt sind beide server wieder da zack guckt automatisch
hin man könnte mit dem kleinen load balancer bis auf 25 server load balenzen also da könnten
wir keck wss service hyper skalieren hier ob ich dir ich kann dir erklären was ich mache
also ich habe zwei zwei server wo eine web anwendung von mir drauf läuft diese web anwendung
macht nichts anderes außer keck w zu rotieren und zurück und und auszugeben sonst nix das
sind legit fünf zeilen die anwendung so ich habe zwei server und davor habe ich einen
load balancer mit dieser domain drauf und wenn du auf diese domain gehst kannst du ja
ausprobieren bei dir im browser wenn du auf die domain gehst keck w punkt services dann
kommst du auf dann wirst du laut balenzen vom laut balenzen auf eine dieser server wo
die anwendung drauf läuft ja das funktioniert crafts also irgendjemand ist ganz heftig am
keck w rotaten targets ja hier kann man noch mehr einstellen services networking ich nicht
rescale auch guck mal man kann sogar die laut balenzen rescale auf 35 euro im monat progas
windows on linux no linux on windows windows ist host system linux ist virtual machine
inside wmw workstation and i use virtual windows virtual virtual desktops to switch quickly
between windows and linux der chat wieder der chat wieder arch by the way natürlich
arch by the way was sonst oi oi mate so also der test hat wunderbar funktioniert wollt
ihr dazu noch was wissen sonst machen wir weiter mit dem nächsten punkt also wir haben
laut balenzen mit zertifikaten gemacht wir haben keck wie erstes service aber jetzt kommt
die eigentliche attraktion des streams jetzt machen wir continues integ naja das vielleicht
ein bisschen bisschen zu hoch aufgehängt wir machen automatisierung mit github actions
also das ziel ist jetzt folgendermaßen das ziel ist jetzt folgendes wir haben hier unser
repo hier keck wie erstes service repo in status das muss ich gleich noch kommenten
also wir haben hier unser repo ihr könnt euch das ganze übrigens auf github angucken
der lb hat eine eigene lp klar die server übrigens auch aber die bräuchten keine also
nur dass die kannst du jetzt kannst du ich kann es noch mal zeigen also der server also
der lb hat hier public lp und die domain löst auf keck wie punkt services löst auf diese
lp auf hier als übrigens mal einer hat er hat übrigens mal einer ausprobiert mit lp
v6 ob es funktioniert sieht man beim laut balenzen noch andere
stance ich glaube nicht so sophisticated ist das nicht ja funktioniert nice sehr gut
genau also der laut balenzen hat die extra lp keck wie punkt services löst darauf aus
drauf auf so dann hat er ein internes netz 1221 68 5.0 slash eigentlich ist slash 24
warum haben wir immer 28 weiß gar nicht ob ich da 28 habe ich da 28 eingestellt habe
ich vertippt so und dann hat meine server haben interne lps nämlich 1221 68 5.2 1221
68 5.3 darauf wird laut balenzt so funktioniert das so jetzt lassen wir das ganze mal so laufen
und jetzt machen wir big brain time wobei wartet mal wartet mal leute wir machen was
anderes wir löschen wir löschen mal kurz die server wir löschen die server und legen
neue an und die pläne die ordentlich noch mal wir machen fünf server wir machen fünf
server so der laut balenzer ist natürlich jetzt broken as fuck weil no targets vor e
als wir bauen jetzt wir bauen jetzt vier vier server auf mit keck ws service drauf
allerdings cx cx 11 die kleinen reichen wir brauchen keine triple core server nicht löschen
warum nicht vor e wir machen wir machen fette kisten der laut balenzer gerade wohner s ja
warum denn kann man hier sagen network geht das minus minus network kann man sagen minus
minus network gleich internal bin ich mal gespannt ob das funktioniert jetzt kannst
du nicht mehr drauf ja schauen wir mal gucken wir mal ha cloud server create ich brauche
mal kurz hilfetext von der von dem cli server create create minus minus network geht das
ok wir müssen mal kurz den hilfetext angucken ha cloud server create bla bla bla bla konnte
man sich da nicht hilfe für anzeigen lassen help help minus minus network genau wunderbar
so dann sollte nämlich netz sich auch an das interne netz hängen für das laut balenzen
was millionenverluste gemacht dann würde ich sagen ich fahre das jetzt mal ganz schnell
wieder hoch und dann beteiligst du mich an den millionen gewinnen die du gleich wieder
hast big stonks time paypal adresse kann ich dir schicken nach dem stream oder alternativ
also gibt ich würde sagen zwei varianten ich meine nachdem du ja quasi mit meinem service
ohne lizenz millionen gebühren machst zwei sachen also entweder fünf subs giften oder
paypal adresse nach dem stream und millionen überweisen ganz einfach easy um nicht zu
sagen schon wieder doppelte klicks guckt euch mal an so server werden aufgebaut dann
enden wir die auch gleich mal zum laut balenzen übrigens mein an simple aufbau script hat
ein bug monkaS ich habe es kaputt gemacht warum ich
bin im falschen ordner lull das habt ihr nicht gesehen ich bin im falschen ordner also
gar kein problem delete oh delete alles kein problem gar kein ding
calculated alles nach plan so nochmal komm wir machen jetzt das 5 server bam auf gehts
so server werden created mein lokales übrigens mein lokales bild script ist ziemlich ziemlich
3 hat weil ja ist halt wieder triple core ist egal dass das ist das schöne von stündliche
abrechnung es kostet auch so nix also ich habe nämlich in meinem bild script hier ziemlich
ziemlich einen bescheuerten eintrag ich baue nämlich jedes mal die anwendung neu so und
wenn das parallel passiert dann geht es natürlich kaputt hellsinki warum nicht mich nicht ob
das in hellsinki ist wir haben wir haben keinen standort angegeben hier drin ist aber auch
egal so server werden aufgebaut jetzt gehe ich
mal in den laut balenzer und edit diese services hier laut balenzer targets add targets cloud
server bam bam bam bam bam add five targets so die sind jetzt natürlich erstmal down
oder vielleicht sind manche schon oben nein es ist nix da weil die server sich grad noch
im aufbau befinden was wird denn das wir haben eine anwendung programmiert die cac w rotated
sonst nix macht aber jetzt laut balenzt wird auf fünf server in der cloud mit laut balenzer
davor und wenn du es gleich ausprobieren willst kannst du machen gehe einfach auf die domain
cac w.services allerdings die server sind grad noch nicht oben deswegen funktioniert
das nicht also du kannst jetzt zwar auf cac w.services gehen aber der laut balenzer sagt es geht
nicht weil keine application server da sind aber gleich sind application server da und
dann sollte es auch wieder funktionieren restarting dann cac w.s.services deploy copy app ich hoffe
das funktioniert jetzt alles macht bei mir mein rechner irgendwas die playbooks laufen
noch ich werde mir überlegen ob ich zukünftig noch mit cars arbeite kann ich dir empfehlen
also das ist das nächste große ding cac w.s.services sag ich ja also da kommt man da kommt man kommt
man nicht dran vorbei ein server ist schon da leute cac w.s.services sollte funktionieren
bam könnt ihr ausprobieren cac w.s.services ist wieder da und ihr seht das coole ist mit
dem laut balenzer davor halt auch wenn ein application server noch da ist klappt der
kram doch so guck mal die server kommen nach und nach kommen nach und nach hoch ja ja geh
mal aus hier und schon haben wir fünf cac w.s.services am start jetzt flutscht das ganze
es wird übrigens auch hellsinki gerade gelaut balenzer ist nicht so gut aber gut ich kann
damit leben so wunderbar und jetzt können wir jetzt können wir weitermachen also wir
haben 5 application server hyperscaled zahlt hetsner eigentlich die rechnung für deine
server die bezahle ich selbst aber ich krieg ein bisschen geld für solche streams hier
und sowas in der richtung falls es euch noch nicht aufgefallen ist dieser stream ist gesponsert
von hetsner cloud wer jetzt auch mal ein bisschen rum basteln will kann ausrufezeichen hetsner
im chat machen und dann runter scrollen wenn ihr ausrufezeichen im hetsner hausrufezeichen
hetsner im chat macht dann könnt ihr euch unter diesem link registrieren mit meinem
code und dann bekommt ihr fast dann bekommt ihr 20 euro startguthaben das gilt glaube
ich drei monate könnt ihr einlösen bis 31.12. und das gute ist dass hetsner stündlich
abrechnen das heißt ihr könnt euch auch eine übelst fette kiste kaufen hier 60 euro
im monat oder oder gar irgendwie 100 320 euro im monat und wenn ihr die zwei stunden laufen
habt bezahlt ihr bloß ein euro wollen wir mal einen stresstest machen du meinst auf
keck wss service aber du musst den load balancer stressen und nicht die einzelnen server weil
die einzelnen server die haben ja normalerweise gar keine public IP die ihr kennen würdet
so schauen wir mal auf die load balancer was hier bei crafts so passiert das hält es geht
aber noch das hält aber noch in grenzen noch funktioniert das ohne probleme ok es geht
schon bisschen hoch womit stressen jetzt muss der ummut wissen keine ahnung er hat gefragt
ob er stressen soll ok es geht schon ein bisschen hoch aber keck wss service ist davon nicht
geschockt wo musst du den hetsner key eingeben wenn du dich registrierst gibt es irgendwo
ein feld ich habe das selbst noch nie gemacht keine ahnung die sollten mir vielleicht mal
den screenshot schicken dass ich das zeigen kann wenn das einer fragt du kannst wohl
hier steht es doch du gehst dann nach erfolgreicher cloud account erstellung gehst du auf konsole
hetsner.cloud und dann gehst du auf den punkten kosten also da wo du auch die rechnung bezahlen
musst und dann auf gutschein einlösen und auf gutschein code einlösen dann gibt es
die hier max 21 also hier wird nichts gestresstestet das funktioniert aber so einfach jetzt habe
ich zu früh gefrescht mit deinen cousins ja stress die bei hetsner mit deinen cousins
so machen wir mal curl keck wss services ja das ist binary das ist mir doch egal zack
ja def 0 zack wegschmeißen damit wyatt nee russkuh ah keine ahnung silence was s was
s für silence dass curl nichts macht ja das problem ist ich kann curl sequenziell gar
nicht genug starten dass das sinnvolle sinnvoll stresst super silence ich kann curl gar nicht
genug starten dass es das das stresst du dann ich kanns hier ein paar mal ok kanns hier
ein paar mal starten ja ok aber das war es ich bezweifle dass das nennenswert nennenswerten
stress verursacht wenn ich das hier ein paar mal anschmeißen ja jetzt sind wir schon mal
bei 100 mbit keck wss service stimmt mit curl ist das aber mit curl ist das richtig dumm
da gibt es bessere tools für apache benchmark ja damit geht das wunderbar aber wir machen
jetzt mal was sinnvolles also keck wss service ist äußerst robust hatte überhaupt keine
probleme funktioniert macht genau das was es soll nur dass wir server in hellsinki haben
das vielleicht ein bisschen doof wie gebe ich denn hier bei dieser hetzener cloud bei
dieser h cloud server create wie gebe ich denn hier den standort an h cloud server da muss
man das help nochmal help angucken help data center data center string ok data center string
das heißt ich kann ich sag dann network internal data center string und dann nehmen wir hier
beispielsweise nur nur im berg nehmen wir dann ok mehr darf ich nicht anlegen ich muss
mal muss mein account mal upgraden gibt den servern doch bei hetzener cloud ein label
dann sind die automatisch im load balancer als target das ist nice das ist nice das probieren
wir jetzt das wird massif massif agil hier so server werden alle wieder gelöscht bäm
sag sag hallo kann ich sagen warte mal add label funktioniert das denn das muss ich jetzt
ausprobieren warum darfst du nur fünf server haben weil wir maximal zehn server haben kann
ohne dass man upgradet und ich habe im anderen projekt schon fünf server so label ok zeig
mal wie funktioniert das denn labels ok keg w s s service und firm so heißt es ich kann
jetzt hier bei load balancer sagen das habe ich wie gesagt habe die load balancer auch
nie ausprobiert das heißt ich kann jetzt sagen hier targets und dann alle labels oder
wie wir mal ausremove add targets label warum nicht habe ich irgendwas falsch gemacht label
was habe ich doch hier warum warum match das nicht load balancer moment das müssen wir
uns jetzt angucken warum warum funktioniert das nicht targets add targets label keg w
s s service ah man muss das ausschreiben es ist kein es ist kein automatisches ding
ah ok ok ok ok verstehe verstehe also server zack achtung leute noch gehts noch gehts und
jetzt letzter server letzter server keg keg quadruple u s s service bam rip ok also wie
helb und dann sagt man minus minus tech oder was oder wie oder wo name tech wie gebe ich
es ist kein tech es ist label label ok also minus minus also minus means location gleich
dann haben wir hier dass man das jetzt auch mal richtig machen dann brauchen wir hier
nur im berg alles klar nur im berg und minus minus label gleich keg w s s service so wenn
das jetzt richtig funktioniert dann sollte ich jetzt fünf neue server bekommen bekommen
in nur im berg das label haben die automatisch gelaut balancet werden sollten und mit keg
w s s service direkt starten oh invalid argument ist der hetzer lb dann renundant ja das muss
man jetzt da fragen was zum label key gleich value ja was ist dann bitteschön mein value
das check ich jetzt net das check ich das muss ich jetzt mal ausprobieren wie das funktioniert
mach einfach service gleich keg w s s so label labels are key value press both keys and values
must be this value is optional ah the value is optional ah das war der key ok ok ok keg
w s service und es lb oder so ja ok ok ok das ist das value alles klar also das heißt
dann machen wir lassen wir das leer also sprich label keg w s s service gleich das müsste
jetzt ja so funktionieren weil der value ist optional oh not not found ok location h cloud
server create muss die location nbg ist das woher wisst ihr das denn nbg chat ich glaube
euch das jetzt einfach ihr seid huge huge brain keg w s s service ansible create location
ein selbstbehetzter also nbg alles klar nur im bg ok bam jetzt aber she baited richtig
art she baited alda ok h cloud server location nbg oder hellsinki api warum heißt das keg
w s s service im streamtitel steht keg w s microservice oh nein ja was brauche ich denn
da h cloud docks hetzer cloud also zeigt mal her da muss es doch irgendwo eine hilfe zugeben
wie das funktioniert zli programm aber hier guck mal hier gibt's hier gibt's big brain
hier gibt's hier gibt's hilfe hier gibt's hilfe guck mal ok location locations wir haben
ok nbg 1 ah nbg 1 ok nbg 1 so also wenn das funktioniert sollte ich jetzt fünf server
bekommen in nürnberg oder nur nuremberg ist ja nicht nur ist das nürnberg keine ahnung
englische schreibweise ich hab keine ahnung nur nürnberg ne das ist was anderes oder
ist auch mit dem label keg w s s service das heißt es sollte direkt ins loadbalancing
kommen und postchamp postchamp das sieht gut aus zack da sind sie mein loadbalancer mein
loadbalancer sagt no targets mixed hohoho healthchecks moment die können denn die services
healthy sein ah jetzt ok der hat einfach eine weile gebraucht ach der ist die fault
healthy ok das server wird aufgenommen ist lebendig und dann kommt der erste healthcheck
ja ok die fault die fault healthy ist vielleicht nicht so der beste nicht so die beste idee
vielleicht kann man das hier umstellen anscheinend nicht die fault healthy ist vielleicht nicht
die beste variante na gut ich kann mit leben so jetzt sind die dinger unhealthy alles klar
so jetzt wird der kram aufgeholt keg w s s service ist down 503 chat wer ist big brain
genug wer weiß warum das ein fünfer ist warum ist das warum hat das warum ist das ein htp
error code mit fünf am anfang weil wer hat physik gelernt und aufgepasst server ich weiß
es nicht ich weiß es aus dem kopf nicht mehr warum das so ist waren 500 nicht temporär
ne oder ich weiß es nicht mehr 500 error codes weiß ich doch nicht mal ich kann ich
habe gedacht generic error response ok das weiß ich dann die 300er waren temporär 300er
waren temporär so war das 300er sind temporär so wie redirects und so was 200er sind ok
ok der erste server ist schon da und bern keg ws das service funktioniert ist das nicht
nice mit dem load balancer davor richtig cool wie sie durchgefallen haben an physik schon
sehr länger länger ja ok guckt bern alles da so und jetzt machen wir es agil ajai leute
jetzt wirds richtig massive agil shit up actions kommt jetzt also die sache ist die wir haben
jetzt ein load balancer mit fünf application server dahinter also genauso wie sie gemalt
hab funktioniert gültige zertifikate hier zertifikat connection secure bla alles so
was uns jetzt fehlt ist noch eine moderne variante neue software versionen zu deployen
ich mein wir bräuchten für unsere sache wenn man ehrlich ist wenn man wirklich ehrlich
ist wir bräuchten gar keine ähm super ausgefeilte deployment oder testing build wie auch immer
methode also man könnte einfach sagen ok ich habe fünf server die werden sich wahrscheinlich
nie ändern ich mach lokal nen build scp das ding hin oder rsync das auf die server von
mir lokal das kann ich immer n simple build rein machen und restart den service so aber
wir gehen mit der zeit wir machen github actions das bedeutet wir haben hier unser repo ich
ich klär das mal status add lull beste push so wir haben hier unser repo und aktuell haben
wir da nur ein branche nämlich master wir machen jetzt den zweiten branche geht check
out minus b nennen wir mal brot so und jetzt haben wir zwei branche in unserem lokalen
jit master und brot so und was wir jetzt machen ist folgendes im master wird entwickelt und
nach brot wird gemärcht wenn das wenn wenn released werden soll switch minus t ist das
neue check out warum ist das besser warum ist switch minus c besser als check out minus
b kürzer bei mir habe ich eh gtc o minus b also das ist bei mir ein ich benutze nie
check out ich schreibe check out nur für euch jetzt aus ich habe seit jahren gtc o für
check out oder sogar github für neuen branche bam github master github branche minus d s
github github genau also wir haben jetzt wir haben jetzt zwei branches master und brot
so das ziel ist jetzt folgendes ich möchte eine ein automatisches script laufen lassen
auf github wenn ich nach brot pushe das heißt ich mache kommets in master und dann mache
ich irgendwann ein merch nach brot und pushe das und der soll das automatisch ohne dass
ich lokal irgendwas machen muss auf die server pushen so das heißt wir werden jetzt github
actions verwenden dafür github actions ist die github verität der jenkins von github
sozusagen falls ihr jenkins kennt jenkins ist so der oldschool bildserver überhaupt
den gibt schon seit 500 jahren haben schon die alten die alten griechen haben schon jenkins
verwendet so gratis hat philosophiert hat gesagt wir machen mal jenkins bild also so
alt ist das schon und wir haben übrigens auch noch ein jenkins so ist das so ist das
nicht so und github actions ist quasi das jenkins auf github soll ich zeige ich zeige
ich zeige euch mal wie das wie das ganze funktioniert also ich bin aber übrigens auch nicht der
wahnsinns profi da drin muss ich muss ich auch gleich sagen es könnte sein wir müssen
ein bisschen müssen ein bisschen rumprobieren aber service und so funktioniert auch alles
wunderbar sind jetzt übrigens die server in dem richtigen rechenzentrum erstellt welchem
rechenzentrum sind wir denn jetzt nürnberg ok perfekt laut balancer ist auch ist auch
oben funktioniert ok also github actions es kann sein dass es ein bisschen rumklicken
muss also wir haben dort net anwendung das heißt wir nehmen den standard workflow für
sp dot net hier das da set up this workflow zack shit shit ab so der eigentliche workflow
der liegt immer im repo drin das heißt er ist glaube ich auch branche abhängig und man
kann den ändern also man hat hier seine continuous integration schräg schräg continuous delivery
testing was auch immer konfig die hat man immer zusammen mit dem code liegen im gleichen
repo damit nichts zusätzlich konfig geht also run on push pull request prominent run on
push branche brot so jobs later wir machen unsere builds auf nem ubuntu auf dem neuesten
ubuntu so actions set up ok nennen wir einfach nur set up dort wir nehmen dort net version
fünf dort net restore und so das brauchen wir das brauchen wir alles nicht das können
wir alles können wir alles weg schmeißen was wir machen wollen ist folgendes wir wollen
unsere dot net anwendung bauen mit dot net publish minus minus configuration release
dass es schneller ist minus r linux x64 hoffe das stimmt was ich jetzt aus dem kopf hier
tippe also wir wollen linux binary bauen dann minus minus self contained so und das ganze
in den output directory bild schreiben ok sekunde leute ich muss mal ausbringen ob
das funktioniert was ich da sage nein wäre auch zu einfach also ich bin im falschen ordner
keck wer ist das service jetzt ok alles jetzt funktioniert ja bild ja ok nice hat funktioniert
sehr schön das heißt hier geht auch kein run drinne na genau so git ignore da muss wo
habe ich kein git ignore wo habe ich mein git ignore file git ignore da muss auf jeden
fall noch bild mit rein sonst commit ich hier meine meine lokalen meine lokalen binaries
natürlich natürlich nicht ok also das ist schon mal richtig wir möchten unser dot net
programm bauen als linux binary self contained das heißt wir brauchen auf dem server selbst
kein installiertes dot net was wir auch nicht haben wohlgemerkt weil aktuell deployen wir
ja über unser script und wir machen das ja schon so guck hier dot net publish release
machen wir das so in kurzvariante self contained und dann pushen wir es auf den server rüber
wir machen das ganze jetzt nur mit der github action also das ziel ist folgendermaßen so
soll das ganze dann funktionieren also mal angenommen ich mache hier ich mache ich mache
hier einen commit habe ich eine readme drin habe ich eine readme ja mal angenommen ich
mache hier einen commit drinne in master pushe master dann soll nichts passieren aber jetzt
sage ich irgendwann ich bin bereit ich will neue versionen releasen warum ist das bild
da noch drinne ah weil ich das nicht gemercht habe aus master so und irgendwann sage ich
git merge master und wenn ich das hier jetzt pushe git push bot also quasi nächste version
releasen dann will ich dass der ein automatisches bild macht und es auf den server schiebt
das heißt ich brauche nichts mehr lokal auszuführen ok also legen wir mal los wir wollen die dot
net version bauen und das testen wir jetzt mal ob das funktioniert also runs on steps
check out dot net publish release self contained alles klar start commit achso ich muss auf
ich muss auf prot null ja ich bin im falschen prat null naja gut naja gut remote update merge
origin master so jetzt machen wir hier mal einen commit und checken mal ob das an sich
funktioniert brauchst du nicht ein cd doch ich brauche wahrscheinlich ein cd wir gucken
uns jetzt erstmal an ob das funktioniert ich muss jetzt mal ein paar test commits machen
und gucken ob das funktioniert also warte mal wir achten mal irgendeinen mist in die
mir und gucken ob es funktioniert geht komm mit a-m weg weh und und geht push origin origin
brot ok schauen wir mal ob die github action funktioniert ja da ist sie also wir sollen
jetzt hier wir kommen jetzt hier ein automatisches bild bei jedem push in den brot branche also
check out funktioniert setup gibt wahrscheinlich ein fehler ja setup gibt ein fehler weil ich
im falschen verzeichnis bin siehst du sind wir schon mal sind wir schon mal verkehrt bin
im falschen verzeichnis also gehen wir mal packen wir das ganze mal ins richtige verzeichnis
github workflows dot net so wie mache ich denn hier in den cd ich denke mal hier davor zack
cd dort wie heißt der ordner auch keck wss service ok pushen gucken ob es funktioniert
actions nächster test bild geht das bild jetzt postchamp postchamp gut das muss er immer
machen und und und bild bild bild ah das sieht schon mal besser aus restored sehr schön ok
also meine web anwendung wird gebaut also job durchgelaufen gut jetzt muss ich mir irgendwas
überlegen wie ich das auf den server bekomme so ich werde es jetzt mal hier in der action
programmieren aber das wird ein bisschen schwierig weil um auf den server zu kommen brauche
ich ein ssh key das heißt ich muss jetzt in den secrets mein ssh private key hinterlegen
und das muss ich so machen dass ihr es im stream nicht seht jaja das muss ich mir jetzt mal
überlegen also von der idee her wir machen jetzt hier es heißt nicht restore dependency
sondern es heißt bild bild so und jetzt machen wir noch einen neuen job der die sachen auf
den server kopiert so das nennen wir deploy so und die pläne wird folgendermaßen kann
man bei github keine secrets hinterlegen doch doch kann man machen aber ich kann das ja
nicht im stream machen wenn ich das im stream machen seht ihr alle seht ihr seht ihr das
ja alle wir machen nichts versprochen jaja chat glaube ich euch sofort les idee rsa ne
deploy wie habe ich das genannt deploy key so das der public deploy key mit dem komme
ich nicht weit mit mit dem komme ich nicht weit ich brauche den private deploy key und
ich muss gucken dass es nicht bei mir in der zwischenablage landet wie mache ich das denn
jetzt chat ok big brain time also erstmal zwischenablage ausschalten kill all ich mache
ich mache jetzt die zwischenablage erstmal kaputt erstmal die zwischenablage kaputt machen
abtippen so mal gucken ob ich die zwischenablage kaputt gemacht hab jawoll sieht gut aus zwischenablage
der zwischenablage ist kaputt ok chat ihr dürft jetzt nicht gucken ihr dürft nicht
gucken ihr dürft ihr dürft nix sehen so deploy key ja wie deploy key also ich kopiere
das jetzt mal da rein github settings secrets secrets new secrets private key nennen wir
das mal ssh brief key ok key ist reinkopiert ich hoffe man sieht auch nix jawoll ok ich
pläne euch wieder ein ok also key ist als secret hinterlegt key ist als secret hinterlegt
jetzt können wir weitermachen also wir gehen cd cac vs the service run deploy gut das haben
wir gemacht so was wir jetzt machen müssen wir müssen diesen ganzen ordner den wir hier
eben in bild angelegt haben müssen wir rüber auf den server kopieren so also von der idee
her ich schreibe das jetzt einfach mal so runter von der idee her müssen wir jetzt folgendes
machen einen ssh auf irgendeinen x beliebigen hetzen der server zum ausprobieren ob das
funktioniert nennen wir mal den hier zum beispiel so ups by the way kann ich green clip wieder
anmachen green clip dass ich wieder history habe und es ist nicht drinne also ssh root
add also übrigens ähm eine der sachen die wir probieren probieren wollen ist dann am
ende dass es noch automatisch auf alle server geht wie ist das eigentlich wenn das server
download bekommt er nicht eine neue ip nein da behält die gleiche ip aber wir versuchen
es ja am ende noch dynamisch zu machen da müssen wir mal gucken also root server ich
probiere jetzt erstmal auf einen server zu deployen und gucken dass das funktioniert
dann wollen wir dann sagen system ctl system ctl stop hack ws service so dann wollen wir
deployen und dann wollen wir starten so ähm und dazwischen wollen wir die anwendung rüber
ersunken also ersunken minus a und dann ist es glaube ich info progress 2 oder so das
ist ganz wir das ist ein progress progress anzeigt und nicht jede datei 1 so und dann
wollen wir bild ordner rüber kopieren und zwar nach root ads dem da so soweit müsste
mein deployment sein das funktioniert jetzt allerdings nicht weil ich keine ssh keys habe
und jetzt muss ich mal gucken github secrets wie man darauf überhaupt zugreift das weiß
ich das weiß ich aus dem kopf nämlich nicht also ich habe hier in meinem repo mein private
key hinterlegt so dass ihr den nicht sehen könnt und da kann man jetzt darauf zugreifen
nämlich mit hier secrets so ich vermute mal dass das hier nicht funktioniert wie habe
ich das genannt ssh das wird nicht funktionieren weil das hier ein string ist es gibt einen
extra github action für kopieren von ssh und stp kopieren aber das ist doof ich probiere
mal was ich hoffe ich liege meinen key jetzt nicht was aber by the way nicht schlimm ist
wenn ich meinen key liege ich habe das für nichts anderes verwendet als das wirds was
gucken auf dem zweiten bildschirm wo ist denn hier cacqss service ich mache das einfach
im zweiten bildschirm dann ist gar nicht die gefahr dass ich irgendwas liege secrets ja
wunderbar wieso hast du den private key im repo hinterlegt
ja warum nicht weil es ein secret ist was zu diesem repo gehört und der nur für den
server verwendet wird wo es drauf soll da ist doch eigentlich sinnvoll dass er ins repo
kommt so also es könnte sein dass ich jetzt meinen key liege ich bin mir nicht sicher
ob das eine gute idee ist was ich hier mache also wir schreiben den key einfach in eine
datei rein so wir machen ein ssh verzeichnis mk dir punkt ssh dann echeln wir das da rein
nach punkt ssh slash id rsa so es kann sein es kann gleich sein dass es geleaked wird
die private keys sind nicht im repo die private keys sind als github secret im repo so und
jetzt kann ich sagen minus i ne brauch ich gar nicht minus i das greift jetzt ja automatisch
ok mal checken mal gucken was passiert ich hab keine ahnung komm mit bam push schauen
was passiert gleich ist key liege angesagt weiß ich eh schon was key in anführungszeichen
ups oh nein es habe ich auch mal gepusht ich kann nur nö das muss nicht oh ja das muss
in anführungszeichen ok anführungszeichen ja ja ist gut ist gut anführungszeichen anführungszeichen
zwar keine gute idee gleich kann man das kann man das cancel cancel ran bam weg damit cancel
ran brauche man alles nicht alles alles overrated jebaited outdated guck mal hier cancel ran
ok wunderbar ok habe ich das jetzt richtig gemacht gequoted wir machen übrigens nicht
wir machen single single quotes dass der auch auf gar keinen fall irgendwas irgendwas escaped
und danach mache ich mal einen guck mal ob das funktioniert lsla auf punkt ssh und guck
ob das ob das klappt ok push beim trauma mal bin jetzt bin ich mal gespannt ob das funktioniert
pausierungschamp ob ah yes setup bild so ja funktioniert nice host key verification failed
oh no anyway ich weiß was ich verkehrt hab ich muss ihm noch sagen dass er den key das
erste mal akzeptieren soll also was ist das für eine richtige option stricthost key checking
nicht no nicht no wir wollen except new das ist die neue big brain options für sowas
so also ssh except new so das müsste eigentlich jetzt klappen was ich hier mache by the way
was macht er überhaupt ah guck mal der ist richtig massive brain der tut das secret aus
sternchen huge easy sie wissen genau dass so leute wie ich da regelmäßig was liegen
übrigens habe ich die server überhaupt aufgebaut habe ich die server überhaupt aufgebaut mit
dem richtigen ssh key ich glaube nicht schau mal mal er sagt wahrscheinlich als dass das
nicht funktioniert nee ich habe diese aber nicht aufgebaut mit dem richtigen key ne schau
mal mal schau mal was das bild was das bild macht mit test attest attest hast du ah mist
dann funktioniert nicht unprotected private keyfile oh mein gott permission denied ja
ok das das können wir das können wir fixen dann machen wir hier noch weil ansonsten geht
im zweifelfall ssh nicht chmod 600.sh dass das ssh nicht rum meckert.sh slash idsa so
und jetzt muss ich die server bei hetzer nochmal neu aufbauen weil der key falsch ist da lacht
er da lacht er über mich hier zack wobei ich kann kann man den key nicht zusätzlich
danach hinzufügen geht das außer per ssh copy id oder sowas kann können die sowas
kann die sowas übers webinterface nee oder task geht down leute das ganze verzeichnend
muss 600 sein nee nee nur der key nur der key muss mache ich jetzt ssh copy id auf alle
oder nicht nein ich baue jetzt einfach alle nochmal neu auf easy da können wir gleich
testen ob unser kekwi ssh service gut funktioniert so und delete weil das muss ja in zukunft
auch funktionieren mit dem richtigen key ok also der richtige key ist kann man hier zu
ansible der richtige key ist nichts wo ist der key nicht test test der richtige key ist
test add poggers 2 ist der richtige key wenn ich jetzt nicht komplett falsch liege max
add poggers 2 ist das richtige max add poggers 2 alles klar jetzt wissen wir Bescheid nicht
poggers 1 nicht poggers 0 nein poggers 2 hab ich meinen alias hier nicht workflow juckt
mich jetzt nicht so server werden wieder aufgebaut ich mein ich bin ja ich bin ja ein fan von
wenn so sachen automatisiert sind aber das müsste schon zugeben das ist eine echt coole
geschichte mit service down neues server hinstellen service ab und sie kommen automatisch ins load
balancing rein also viel einfacher es sei denn man hat das verkontainerisiert mit irgendeinem
orchestrator oder so noch dabei also viel einfacher kann das jetzt an dieser stelle
für unseren für unseren dienst echt nicht sein jetzt hat interessante range also mir
sagt diese range jetzt nix
zu knackig ja ok wenn es danach geht wo was monkeys ah die ip sind doppelt ok ich muss
sagen mein aufbau script ist doch nicht so big brain wie ich mir das gedacht habe jetzt
sind die ip doppelt vergeben kann ansible irgendwie das ignorieren das ist das ist ja
doof kann ansible das irgendwie gibt es irgendwie die möglichkeit zu sagen ansible piss piss
ich alte nerv nicht rum ich meine ich kann einfach ssh known host machen und mal diesen
ganzen shit hier rausschmeißen bäm so und jetzt nochmal ausführen aber so gehts auch
ja mit umgebungsvariable oder ansensible cfg ignore errors jetzt ne ich will ja nicht ignore
errors jetzt ich will nur ignore ssh errors gut ok jetzt warten wir bis kekwe ss service
aufgebaut ist in der zwischenzeit können wir eigentlich weitermachen mit unserem mit
unsere github github action github workflows.net also wir legen den ssh key an dann connecten
wir uns adden den server key dass es keine fehler gibt stoppen kekwe ss service scp in
den bildordner rüber nach ins heimatverzeichen wo muss der bildordner eigentlich hin ansible
host key checking ah exellent exellent wo muss wo muss der bildordner eigentlich hin
der muss nach home app kekwe ss service siehste schon wieder schon wieder verkehrt aber wir
gucken erstmal ob das deployen an so funktioniert nehmen wir mal den hier als ip und funktioniert
der kram noch was ist denn jetzt schon wieder hier fail to connect warum permission denied
ah ich hab mir den anderen host key ausgewählt deswegen funktioniert das nicht wie sag ich
ansible was es für einen host key verwenden soll ok wir stoßen hier auf ganz neue probleme
ich muss ich muss den shit noch mal kurz kurz löschen wenn das jetzt in den heads der admin
hier im monitoring sieht er denkt auch was treibt der typ da eigentlich warum erstellt
er wie verrückt immer fünf server und löscht die wieder was macht der duta also moment
moment ss key ist richtig aber ich kann mich ja nicht dran verbinden ansible key identity
ok ok wie geht das ansible ssh private key file exellent das brammer inventory file
in host zwar kann ich nicht in der environment variable machen oder so environment variable
oder ansible ssh key environment geht doch bestimmt private default private key file
ansible private key file ok so geht das ansible private key file also export ansible private
key file ähm welches brauchen wir denn überhaupt home deploy key home max deploy key ja so
hieß das ding ok home max deploy key so und jetzt jetzt muss das funktionieren pass mal
auf bäm easy so plus rng hoffentlich funktioniert es jetzt hoffentlich hoffentlich frisst er
das jetzt oder meckert bestimmt auch weil der key moment leute ha ha ha ch mod 666 ch
mod 600 zack ich habe jetzt gemacht so ah guck mal es scheint zu funktionieren leute
grad noch mal rechtzeitig grad noch mal rechtzeitig ip leak omfg ich habe ganz viele ips geliegt
ok ok komm funktioniere einfach changed changed klingt schon mal gut install packages ich
glaube es funktioniert leute ich glaube es funktioniert ok was macht der service der
service ist unreachable ok das das das passt auch load balancer der kann es schwachsinn
darum ist das hell sie der load balancer ist richtig ok jetzt ist ein bisschen fail was
hast du schon gemacht eigentlich sind wir gerade beim letzten schritt github actions
anlegen für deployment das das muss das muss heute noch sein da bin ich ganz scharf drauf
dass das funktioniert auf deploy let's go was local host ach so das bild das bild macht
er immer local host ja ok das ist in ordnung ok keck wss service sollte bald wieder verfügbar
sein leute gleich gleich ist wieder da postchamp postchamp bei der gelegenheit könnte ich
noch mal kurz erwähnen dass dieser stream gesponsert ist von hetzner cloud wenn ihr
auch mal ausprobieren wollt ausrufezeichen hetzner im chat anmelden über den link gutscheincode
einlösen 20 euro startguthaben sichern und rumbasteln und hetzner rechnen stündlich
ab das heißt ihr könnt euch auch ein paar richtig fette server kaufen für ein paar
stunden und ihr müsst dafür nichts bezahlen so siehts aus so ist keck wie erster keck
wss service ist schon wieder da bäm da ist es funktioniert wieder müsst für die anwendung
euch noch verifizieren ja gut das kann sein das ist ja mittlerweile standart dass die
alle hoops wobei bei o v h habe ich nicht gemacht o v h wollte von mir die ausweis
kopie da habe ich gesagt nope no pass aus grad sehr schnell das service hier so die
anderen server sollten jetzt eigentlich gleich auch wieder hochkommen drei haben wir schon
hier zack jawoll der load balancer ist hart am load balancen 4 von 5 zack wunderbar also
da sind wir wieder gut jetzt können wir jetzt können wir unser github unsere github geschichte
weitermachen also doch das sollte jetzt eigentlich funktionieren nachdem ich den key richtig
drin habe also von der idee her sollte der sich jetzt auf diesen server verbinden und
die neue version dahin deployen zeig mal her ob das funktioniert github actions und chat
meint ihr es funktioniert erst wenn directory anpassen was habe ich verkehrt gemacht zeigt
mal erst ein bild wieso ist doch richtig will das bild directory in ins heimatverzeichnis
kopieren zum testen danach ist falsch das stimmt aber zum testen ist doch ist doch ist
doch alles gut ok jetzt jetzt kommt ah ich was ist denn jetzt schon wieder so falls wir
no such files or directory äh warum nicht jetzt bin ich jetzt bin ich verwirrt das bild
hat doch funktioniert also home runner work kekwi as a service kekwi as a service kekwi
as a service bild wie oft er noch kekwi as a service dreimal warum kekwi as a service
kekwi als a service kekwi as a my freste alter wie oft er noch das hört er gar nicht mehr
auf triple triple triple triple triple du kekwi du hast dreimal cd im work flow das habe ich
nur dass ich das dass ich aber das ergibt keinen sinn ich bin doch hier
in dem ordner wo bild drinne ist warum bin ich in dem anderen ordner wo bild
drinne ist guck mal hier hier bin ich hier sage ich cd und und da ist das
verstehe ich jetzt nicht das verstehe ich jetzt nicht ich gehe ich gehe in das
verzeichnis rein und sache mache bild output bild ok ich meine ich kann das
hier ein verzeichnis nach oben machen dann wird es funktionieren aber so das
verstehe ich jetzt nicht wirklich aber scheiß drauf ich will es jetzt nicht
verstehen ich will gucken dass es funktioniert der bild ist in cars was
mal drei aber erst in keck wie erstes service mal zwei aber warum so jetzt
jetzt jetzt habe ich jetzt habe ich ihm gesagt dass er den kram ein ordner
weiter oben drüber machen soll gucken wir mal ob es jetzt funktioniert auf die
ploi auch die ploi hängt schon das ist gut die ploi ist schon am wie clean ab
moment er macht einen clean ab bevor er die plutt ich glaube das stimmt nicht
was da steht ich glaube das hat es funktioniert hey es hat funktioniert es
hat funktioniert guck mal er hat er hat jetzt nach ihr weiß er hat es jetzt hier
hinkopiert minus i die ploi key alter nerf nicht rum ssh please gefahrt es und
jetzt haben wir hier den ordner bild da ist es doch wunderbar bäum funktioniert
sehr schön also wir haben bild gemacht das landet auf dem server das ist das
ist doch schon mal exzellent genauso genauso soll das sein
also wimm aber weiter also von der idee funktioniert das ja was wir hier
gestrickt haben der baut die anwendung und schiebt sie unter dem ordner
bild auf das zielsystem ja das ist ja eigentlich erst mal alles was wir
erreichen wollen so und jetzt kommt big brain time und jetzt dynamisch auf alle
server die es gibt wie kriege ich von github raus welche server ich bei
hetzner habe
moment ich habe ich habe die idee kann man hetzner cloud cli auf ubuntu
installieren pass mal auf geht das ist das im repo drinnen
ubuntu ubuntu hallo browser please voter phone
hey das funktioniert ok das probieren wir jetzt aus also wenn das funktioniert
da wäre ich äußerst also mega überrascht wenn das funktioniert alle
du kannst doch einfach einen h cloud container ein ein bild quatsch wir machen
das manuell glaube es geht los irgendwelche komischen
container aber dann hast du einen hetzner api key im repo
ne habe ich nicht habe ich nicht das mache ich als secret das mache ich als secret
minus epsilon ja ok also von der idee er sollte jetzt hetzner falls das funktioniert
ich glaube nicht dass das funktioniert sekunde das müssen wir ausprobieren
wo ist dann der key der ist als secret hier unter den unter den settings der
gehört zwar logisch gesehen zum repo in github ist aber nicht geht geht
mäßig eingecheckt
das geht echt nice
ok bildstab zack deploy hat es jetzt funktioniert mit dem
install zudo abt moment moment hey das funktioniert hat er hat es
installiert jetzt muss ich jetzt muss ich auch mein api key hinterlegen ok
leute ich muss mit api key generieren da könnt ihr da könnt ihr jetzt leider
nicht zugucken wenn ich mein api key generieren
zack dürft ihr dürft ihr nicht sehen security
api ich mache einen read api tauchen read only api tauchen ja aber ich will
trotzdem nicht dass ihr den seht generate api tauchen read only heißt
der read only api tauchen was generated und jetzt gehe ich auf github und werf
das bei mir in die secrets rein als als haklaut oder so du secrets haklaut api
machen wir jetzt add add secret ok wunderbar ok ich habe es geerdet ich kann
euch jetzt wieder einschalten kann euch wieder einschalten ok also secret ist
geerdet heißt haklaut underscore api ich muss übrigens mal hier meinen ganzen
kram zu machen so das heißt ich kann jetzt hier sagen
boah boah big brain time big brain moment das muss ich das muss ich das muss ich
lokal machen haklaut wie funktioniert haklaut server list so das kriege ich
alle server ausgespuckt ok ok ich will ich will die api alle server haben also
ne big brain time leute jetzt jetzt jetzt jetzt jetzt jetzt könnte jetzt könnte
was lernen wobei ich mir da auch nicht genau sicher bin wie das aussehen aussehen
muss awk print was ist das 1 2 3 4 dollar 4 dollar 4 aber nur mit dem tag
stimmt na gut ich habe aktuell in diesem projekt nur welche damit guck mal zack
label stimmt stimmt list mit dem label brauchen wir jetzt label an und flack
labels
die gemmisch denn hier die labels aus unknown flack labels columns ah minus o
boah jetzt wird es aber hier minus o labels ok da bin ich zu da bin ich jetzt zu
low brain für output penny can be controlled minus o flack use minus o no
header to suppress table header das finde ich schon mal gut das brauchen wir
auf jeden fall klein doch kein header minus columns so
kann ich sagen ip ip muss ich muss ich das jetzt muss ich das jetzt immer so
machen oder wie es ist nicht ip es ist ip 4 4 und kann das kann ich nicht so
hintereinanderschreiben doch so no header headers ich bin dazu ich bin ich
bin also no ich war das no no header ich gebe dir header alter also ok ok
wunderbar wunderbar ok also grepp also nur die mit keck wss service grepp nach
keck wss service in der ersten zeile alles klar ich meine das sind jetzt alle
die wir haben so und jetzt ok jetzt kann ich auch einfach sagen hier kratz
delimiter leerzeichen feld 2 das kriege ich feld 1 tap ok abk was auch immer
das ignoriert das ganze print dollar 2 das haben wir die ip jetzt haben wir die
ip und jetzt und jetzt können wir folgendes machen jetzt können wir
folgendes machen das wird eklig aber es funktioniert vor in den ip hier du
echo dollar i dann ne aber jetzt nice ok und da drin können wir jetzt unser
deployment machen big brain time alter massive brain time wenn das funktioniert
dann beiß ich mir in arsch also sprichwörtlich nicht wirklich wo sind
von hier also wenn das funktioniert wenn das ein zeiler easy wenn das
funktioniert ok wie das schon ausschaut ok echt so flupp wir machen halbwegs
schöne ausgabe echt so change innerdings deploy dollar i ach so ich brauche den
api key hier noch drinnen moment moment ha klaut cli api key environment
variable wie schreibe ich das da rein
cf ne als vielleicht token wenn ich api key ha klaut cli api token environment
variable doch bestätigt ha klaut token ha klaut token ok environment variable
github actions leute ich habe es euch in ein paar videos gesagt google ist das
wichtigste was ihr können muss was ist keck we as a service
gehen wir drauf keck we punkt services geht man bei dir in browser ein dann
wirst du sehen was es ist environmente ach hier entf entf day of week ok also das
heißt wir wollen hier jetzt haben entf er gibt das ergibt das sind falsch
eingerückt entf so und dann wollen wir nicht day of week haben sondern wir
wollen ha klaut token haben also würde ich sagen rücken wir das mal so ein so
und jetzt secrets secrets nicht in private key sondern ha klaut api habe
ich das genannt alter ich beiß mir so in arsch wenn das funktioniert erste
einreihen war korrekt glaube ich nett oder entf ist auf selben selber ebene
wie steps tatsächlich nee man kann es da und da angeben
nee hier reicht das hier reicht das ich brauchte es ja nur hier lasst dir nix
erzählen genau anzeige ist raus abmahnung ist raus kündigung ist
unterwegs so also dann kopieren wir das mal hier rein so ok also also ob das
funktioniert facket also root add dollar e deploy dollar e dollar i habe ich
noch sieht jemand noch irgendwo hardcoded ips drinstehen
noch irgendjemand ne ne ok ok ob das ist ich beiß mir so in arsch wenn das
funktioniert er actions aber wir eine prediction machen können
wenn er prediction machen kann setup ja ja mach das interessiert mir nicht da
wissen wir dass es funktioniert bild ok er bild bild deploy ok jetzt wird
spannend jetzt wird spannend ab install ab install ja install ok gut deploy
stop das funktioniert der deployed jetzt auf alle hetsler server drauf
poggers das ist ja nice richtig 6 hat time huge guck mal alle der reihe nach so
nice so das heißt jetzt können wir ausprobieren ob alles funktioniert
achso moment das landet noch im falschen ordner das landet noch im falschen
ordner das landet noch im falschen ordner das landet hier unter ssh das
landet hier unter unter bild da ist es ja falsch das muss nach wo muss das noch
mal hin home ab heck wie erstes service ok und dann muss es auch ab gehören ok
es wird es wird auch noch ein bisschen eklig als gedacht also wim ok wir
deployen jetzt den bild ordner nicht dahin sondern wir deployen bild nach ab
heck wie erstes service und danach muss man auch ein chr und rüber machen
es ist minus kleiner oder minus groß er wir machen übrigens mal einen break
nach dem ersten weil ich nicht ewig warten will
es groß er und sehr ist recursive tatsächlich
moment ach so es ist ja muss per ssh gemacht werden natürlich
ich habe zu viel gewimmt alter
das können wir übrigens hier mit rein machen warum warum zwei warum zwei ssh
kommandos wenn man eins machen kann kann er sind das nicht auch gleich zu
hauen ich weiß es nicht er singt sie hauen gute frau kann das er singt
for permissions to propagate unit perms minus p-flag and for owner unit owner group
ok er singt owner group das ist mir zu hoch dass das mir zu big brain gewesen
jetzt tupi the same as the source file nee nee nee nee nee zu hauen user group
perfekt da war das doch er singt sie hauen app app wunderbar wunderbar ok also das
sollte jetzt soweit funktionieren er holt sich alles aber die pleute ist stopp
hack ws service erst um die app rüber übrigens hier sollten wir noch machen
minus minus die lied dass er falls löst die es im source nicht gibt ich bin ja
gar nicht so ok da bin ich mir nicht so sicher wenn an der datenbank drin liegt
sq light oder so ist er weg danach das vielleicht keine allzu clevere idee
so der stop das danach startet erst ich blick jetzt nur bei erst nicht durch wie
die richtigen kommandos sind er singt der schiebt jetzt bild dahin muss ich kann
ich den taget ordner irgendwie um benennen so und er singt kommen er singt
dinger also jetzt heißt bild halt halt halt auch da bild kann ich nicht erst und sagen
ich möchte ich möchte den kompletten bild ordner umbenennen nach keck ws
service schauen wir mal ich würde es jetzt einfach mal aus mal gucken mal gucken was
dann da rauskommt einfach bild slash
ich keine ahnung er singt ist echt so ein buch mit sieben siegel ich kann ein paar
dinger aber das kann ich mir immer nicht merken er singt rename er singt kann
das will ich ja auch nicht hier link des ach du große scheiße was kann das ok es
wird kopiert es wird wurde kopiert auf sekunde a scroll action zu viel so es
wurde kopiert auf deploy auf den da ok schauen wir mal schauen ob das richtig
gemacht hat jetzt ssh deploy key auf den da jetzt ok home ab keck ws service
da ist ein fucking bild ordner drin ok chat ich vertraue euch dass ihr wisst
was sie was sie was sie macht ich macht es jetzt so wie ihr das wie ihr das wie
ihr das geschrieben habt m minus f home ab keck ws service bild ich weiß chat
vertrauen ist immer so eine sache aber bei hat der chat schon jemals nicht recht
fällt euch fällt euch was ein ja um ehrlich zu sein wir fallen bestimmt
500 sachen ein oder chat nicht recht hat aber das kann nicht sein der chat hatte
eigentlich immer recht meinst du einfach hier in den slash machen dass er das
dann umbenennt da habe ich so meine zweifel dass das funktioniert ok
schauen wir mal schauen wir mal ok
gucken wir mal ob das jetzt funktioniert predict ich glaube es kriegen wir nicht
mal schnell genug hin der job läuft schon nix mehr predictions
predictions
ja ok hoffentlich funktioniert es jetzt weil ich habe hunger und ich will dann
noch einmal zeigen was es jetzt alles gebracht hat was wir gemacht haben weil
es ist eigentlich ein richtig cooles setup
guck mal das api token wird auch ausgegraut das ding ist richtig clever
ok ssh auf welchem hat es jetzt gemacht hier 143 143
home jetzt kommt der moment der wahrheit bild wie hat es jetzt funktioniert
ernsthaft 20.27 na gut das war die ganze zeit schon da
neunter 29 august 18 uhr das hat funktioniert leute das hat
funktioniert so system ctl restart restart heck wie es service status
funktioniert nice ok ok das bedeutet das ist ja cool das bedeutet wenn ich jetzt
mal hier das break wieder raus nehme das bedeutet ok testen wir doch mal aus ob
das funktioniert also machen wir mal eine änderung in keck wss service machen wir
mal eine änderung keck wss service und lassen die deployen auf alle auf alle
systeme so was was können wir machen für die
änderung rein machen die man überall sieht habt ihr eine massive idee wir
können das randomness wir können das randomness weg machen von null auf null
um zu gucken ob es funktioniert so werden
also die randomness von keck wss weg ich kann die background color nicht machen
ich liefere das bild zurück und nicht etwa eine html seite aber ich mach ich
mache ich mache die randomness ich mache die randomness weg also es heißt ab jetzt
ist das bild immer gerade zum testen ok ja ja perfekt so wie kommenden das in
jit pushen das geht nicht das ist ja keine html
ok jetzt jetzt bin ich jetzt bin ich mal gespannt ob das funktioniert und mal
gucken ob es der load balancer mitkriegt mit dem deployment ok wir lassen ihn
jetzt im hintergrund deployen und gucken hier mal ok noch ist noch ist alles beim
alten ja wiegt ihr kriegt trotzdem nicht raus
load balancer
ok was was macht die action es ist es deployed ok es deployed es fängt jetzt
an ok
ah guck mal guck mal
die servicen die servicen sind kurz dauernd wenn man sollte ein bisschen
warten zwischen dem deployen dass der service nicht nicht auf einmal weg ist
dafür haben wir nämlich den load balancer nichts gemacht aber es sollte
jetzt auch da guck mal der erste schon wieder da
beim es funktioniert leute fünf server die pleite und jetzt kommen sie auch
wieder ab langsam so jetzt war jetzt machen wir mal ein real jetzt war man
realistischen realistischen workflow dass man sich mal so vorstellen kann wie
cool das eigentlich ist jetzt also gehen wir noch mal kurz hier rein wir machen
wir machen mal hier einen kurzen wir machen noch mal ein sleep rein so sleep
30 30 sekunden oder so würde ich sagen dass nicht alle server oder mal 15
sekunden das reicht eigentlich dass nicht alle server down sind also nach dem
deployment sleep 15 sekunden so und jetzt fixen wir das wieder jetzt fixen das
ist ja eindeutig ein back also wir haben hier back gefixt wir haben hier
festgestellt ok red randomness war proppen also jetzt sagen wir geht jetzt
kommets keine fix randomness randomness ich weiß gar nicht was man so schreibt
jetzt sagen wir ok wir haben nice nice fix gemacht nach jetzt einfach nur geht
push ganz wichtiger fix geht push direkt kontinuos agile delivery direkt
produktion pushen bäm so fix ist raus github action erkennt das gepusht wurde
läuft los fix randomness also agila geht es kaum noch agila geht so mit
kubernetes cluster noch so aktuell seht ihr noch alles kaputt alles noch alles
noch noch broken so aber das coole ist jetzt sollte der service nie down sein
der service sollte immer funktionieren es sollte vielleicht sollten paar
requests verloren gehen aber es sollte alles der reihe nach deployed werden
also jetzt haben wir noch den kaputten service guckt der erste service ist
down der erste service ist down und wird gerade deployed ok funktioniert alles
ohne probleme weiter aber noch verbackt
zweiter service ist down also ich hoffe der erste service kommt wieder ab bevor
der letzte down ist weil ich in sleep 15 drin hab jetzt habt ihr es gesehen der
erste service war schon wieder da wenn ich auf dem richtigen lande guckt der
erste service schon wieder da der erste server mit mit fix ist am start
es werden immer mehr systeme mit mit gefixtem je nachdem auf welchem
back end ich lande und wenn alle backends wieder da sind ist der fix
überall ausgerollt
ist das nicht cool das ist doch richtig nice
oh
noch zwei stück verfügbar aber die zwei die zwei mit fix ist noch verfügbar
so und da sieht man jetzt auch ein bisschen daran warum diese ganzen
orchestrator geschichten wie kubernetes und containerisierung so beliebt
geworden ist wenn du das im großen steel machst ist es halt richtig geil du
hast was noch eine zwischenschicht die sich für dich um so was kümmert bei
kubernetes würdest du einfach sagen ok wir haben jetzt besonders viele user und
skalieren unsere container hoch von 5 auf 30 deployment laut balancer rein
raus und es ist da dafür ist es halt ist es halt praktisch aber auf der anderen
seite für so was kleines finde ich ist es relativ überflüssig weil du dich
dann auch um irgendwelche cluster geschichten zusätzlich kümmern
muss also ich finde für so einen kleinen service hier wie keck ws service ist
das ziemlich das optimalste was man machen kann
laut balancer mit zertifikat drauf fünf back end kisten das ist jetzt total
übertrieben fünf back end kisten bräuchte da im leben nicht da würde da
würden vielleicht da würdens also eigentlich bräuchte gar kein laut
balancer dafür ja also
sagen wir mal so wenn es jetzt der neueste shit wäre hier dass die
gesamte welt keck ws service benutzen würde dann wäre das wäre das angebracht
ja aber da müsste zugeben dass ein echt cooles setup jetzt dass du bringst
vor davon was heute so heute abend so lahm ist das ist nicht nicht hetzner
oder sonst was aber ich bin begeistert heute ich bin richtig begeistert massive
poggers macht man einen push mit einem fix und zack bumm ist das deployed
na gut wir haben maximal 10.000 connections auf dem laut balancer ich
weiß nicht ob man hier die connection anzahlen sieht target crafts open
connections ok ne wir sind nicht am connection limit wir sind nicht am
connection limit wir können 10.000 connections haben gar kein problem
in no problem life eine stunde
ja
richtig diagonal skaliert hier
richtig 3d diagonal skaliert sehr schön sehr schön ich bin begeistert so ich kann
euch jetzt bei der gelegenen noch mal eine sache zeigen wir haben hier
relativ viele sinnlos kommens kommets produziert ich meine guckt euch das mal
an unsere kommet history ist vielleicht nicht so so clean wie man das wie man
das gerne hätte
man sieht eine aktualisierungswut na ja
sehr atomic aber man könnte man könnte jetzt beispielsweise das ein bisschen
schöner machen ich könnte jetzt zum beispiel sagen ok wir machen mal wir
fassen mal die kommets zusammen also sagen wir mal fix fix randomness war mal
beispielsweise jetzt behalten also die einfachste variante ist wir sagen geht
reset auf wir sagen geht reset auf das kommet wo wir die historie wegschmeißen
wollen bei der wei das macht man nur das macht man nur wenn man der einzige ist
der da dran arbeitet ja interactive rebase ist mir in dem fall zu viel
arbeit so wir machen wir machen einfach ein reset und dann machen wir neues
kommet und sagen jetzt status ich muss erst noch mal alles enden geht status
jetzt ist gerne geht kommet minus a-m fix randomness die ich übrigens nie
kaputt gemacht habe aber egal in dieser history bäm jetzt haben wir ordentlich
history push rot zack mit neu deployed ach ja force pushen natürlich was
sonst so muss es sein excellent
so und nachdem mein master komplett sinnlos ist geht reset minus minus hart
brot bäm push master
gut sehr schön und jetzt haben wir jetzt jetzt die pleite zwar im
hintergrund noch mal was relativ sinnlos ist deswegen macht man ja so was in
master und ich in brot
so und jetzt könnte ich wunderbar hier drin entwickeln und wenn ich fertig
bin kann ich sogar noch in tech setzen wenn ich brauners cool sein will dann
gehe ich hier einfach in mein pot branch merge master rein push port bäm geht
ab action ab geht's die pläne im load balancer läuft die pläne läuft service
geht runter aber er ist permanent noch verfügbar so muss es sein würde man
nicht in der branche arbeiten und irgendwann pot mit ja master gleich
deff kann man sich jetzt drüber streiten was man da weil es ist geschmacks frage
auf github ist es auch in der regel so master ist gleich def oder main master
darf man nicht mehr sagen oder was gibt es noch für alternativen main master
trank es gibt es da sonst noch so für für master branche alternativen
what are best alternativen main
ich habe damit kein schmerz wenn mein gitter wenn meine git branche ist master
branche oder juckt mich nicht ich habe mich da so dran gewöhnt und auf der
arbeit lasse ich das auch weiterhin master weil wir genug scripts laufen
haben die im master irgendwo hardcoded drin stehen haben unser deployment
funst leute wie hat euch der stream gefallen ich fand war richtig poc
wieder bei der gelegenheit noch mal kurz sellout shoutout dieser stream wurde
gesponsert von hetzner ausrufezeichen hetzner im chat 20 euro startguthaben
sichern für neukunden könnte selbst ein bisschen rum bauen aber denkt dran
nix irgendwie relevantes in die cloud schieben also ihr wollt ja nicht wollt
ja nicht üben mit irgendwelche linuxserver die im internet stehen und
dann wichtige daten draufschieben macht kein scheiß und denkt nach davor aber so
einfach bekommt ihr nie wieder 20 euro startguthaben außer bei meinem nächsten
stream und am nächsten jahr wenn wir weitermachen mit hetzner sponsor ich
dann auch die switch man windows tasten control
feiltaste also windows tasten control drücken und feiltaste keck wie es ist
service wer sich angucken will was wir heute getrieben haben geht er ja auf
github kann sich das anschauen da ist der workflow drin da ist das
ensemble playbook drinnen für die server natürlich könnt ihr damit nix
direkt anfangen weil ihr nicht meine ap keys habt was er auch so sein soll
ja und keck keck wie es das service ist am start leute
so jetzt werden wir noch mal eine sache machen die ns konsole wir die liten wir
die lieten die records
und ich lösche den load balancer weil ich will dafür kein geld bezahlen
ich habe kein bock dass sie mir geld abziehen für was man sich einfach nur
testweise temporär aufgebaut hat keck wie es das service ist da und no also
leute wenn ihr keck wie es das service vermisst ihr könnt euch das github
repo auschecken und lokal laufen lassen ja
so und server weg zack boom
ich muss sagen das hänstner klauzeug auch guilletechnisch ist das echt gut
durchdacht zack infrastructure ist code na ja ein bisschen haben wir ja mit
unserem end simple playbook schon was das nächste mal machen wir dann big
brain kontainerisierung eventuell vielleicht machen wir auch noch einen
anderen stream dazwischen muss die surfer push noch automatisch bauen lassen wenn
sie nicht da sind nee ist glaube ich keine so gute idee
kein select all das ist absicht du willst kein select all bei server
löschen machen das ist schon absicht
gehe ich davon aus ja nice leute also wir sehen uns guckt mal bei meinem link
vorbei löst den code ein wenn ihr euch auch ein bisschen austoben wollt und wir
sehen uns leute im nächsten stream bis denn macht's gut
zu
